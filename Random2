경원님, 질문의 핵심을 정확히 짚으셨습니다. 사내 LLM API의 JSON 구조가 {"data": {"input": "...", "output": "...", "inputvalue": "..."}} 이런 식으로 고정되어 있다면, **"여기에 내 마음대로 파라미터를 추가해도 LLM이 알아먹을까?"**가 가장 궁금하실 겁니다.

결론부터 말씀드리면, **"API의 JSON 구조(껍데기)는 유지하되, input이나 inputvalue라는 필드 안에 LLM이 해석할 수 있는 '도구 설명서'를 텍스트로 밀어 넣는 것"**이 핵심입니다.

LLM은 JSON의 키(Key) 이름을 보고 동작하는 게 아니라, 그 키 안에 담긴 텍스트 내용을 읽고 판단하기 때문입니다. 개발자 관점에서 이 구조를 어떻게 비틀어 활용해야 하는지 명해드리겠습니다.

1. 사내 API 구조를 유지하며 MCP 적용하기
회사 API가 고정되어 있다면, 우리는 그 고정된 필드(예: inputvalue)를 LLM과의 대화 창구로만 사용하면 됩니다.

기존 방식 (단순 질의응답)
보낼 때: {"inputvalue": "어제 에러 로그 좀 보여줘"}

받을 때: {"output": "죄송합니다, 저는 실시간 로그에 접근할 권한이 없습니다."}

MCP 방식 (도구 설명서 주입)
경원님이 만드신 **Host(중계 앱)**가 LLM에게 보낼 때, inputvalue 안에 질문만 넣는 게 아니라 **"설명서(System Prompt)"**를 같이 합쳐서 보냅니다.

보낼 때 (Host가 가공):

JSON

{
  "inputvalue": "너는 로그 분석 전문가야. 너에게는 [read_log]라는 도구가 있어. 
                 사용자가 로그를 물어보면 반드시 'CALL: read_log(date=...)'라고 답변해.
                 질문: 어제 에러 로그 좀 보여줘"
}
받을 때 (LLM의 응답):

JSON

{
  "output": "CALL: read_log(date='2026-01-26')"
}
2. 파라미터를 내 마음대로 넣어도 되나?
API 서버(백엔드)가 input, output, inputvalue 외의 다른 키를 허용하지 않는다면, JSON 구조 자체에 새 키를 추가하는 것은 에러가 날 확률이 높습니다. (서버에서 Validation을 할 경우)

하지만 inputvalue라는 문자열 내부에는 어떤 형식이든 넣을 수 있습니다.

핵심 전략: LLM에게 "답변할 때 JSON 형식으로 답변해줘"라고 시키는 것입니다.

경원님의 Host 앱 시나리오:

사용자가 "DB 조회해줘"라고 함.

Host 앱이 사내 API에 보낼 때: inputvalue에 **"너는 DB 조회가 가능해. 만약 조회가 필요하면 다른 말 하지 말고 반드시 { "action": "query_db", "sql": "..." } 형식으로만 대답해"**라고 프롬프트를 보냄.

LLM의 응답(output)에 { "action": "query_db", ... }라는 텍스트가 들어있음.

Host 앱이 이 텍스트를 파싱해서 진짜 MSSQL에 쿼리를 날림.

3. "알아서 동작하나?"에 대한 답변
아니요, 저절로 되지는 않습니다. LLM은 그저 "텍스트를 뱉는 기계"일 뿐입니다.

LLM이 하는 일: "아, 내가 지금 DB를 뒤져야 하는구나? 그럼 시킨 대로 { "action": "query_db" }라고 글자를 써야지." (판단)

경원님의 코드가 하는 일: LLM이 뱉은 output 글자 중에서 {...} 부분을 찾아내서, 진짜 파이썬 pymssql 라이브러리로 DB를 찌름. (실행)

즉, 사내 API의 규격이 빡빡하더라도 그 안의 텍스트(Value)를 조작함으로써 MCP의 기능을 완벽하게 구현할 수 있습니다.

4. 경원님이 작성하실 "Host 코드"의 로직 (Pseudo Code)
Python

# 1. 사용자 질문 받기
user_input = "MSSQL에서 어제자 불량 개수 조회해줘"

# 2. 도구 설명서(System Prompt)와 질문 합치기
# 사내 API 규격에 맞게 inputvalue에 몰아넣음
prompt = f"""
너는 사내 데이터 전문가야. 아래 도구를 쓸 수 있어.
- query_mssql(sql_query): SQL을 실행함.
반드시 도구가 필요하면 'ACTION: [함수명] 파라미터' 형식으로 대답해.

질문: {user_input}
"""

# 3. 사내 API 호출 (기존 curl 방식)
response = call_company_llm_api(inputvalue=prompt) 
# 결과: {"output": "ACTION: query_mssql(sql_query='SELECT count(*) FROM ...')"}

# 4. 결과 해석 (Parsing)
if "ACTION: query_mssql" in response['output']:
    sql = extract_sql(response['output']) # 텍스트에서 쿼리만 추출
    db_result = run_actual_mssql(sql)    # 경원님이 짠 파이썬 함수 실행
    
    # 5. DB 결과를 들고 LLM에게 최종 답변 요청
    final_prompt = f"DB 결과는 {db_result}야. 이걸로 사용자에게 친절히 답해줘."
    final_response = call_company_llm_api(inputvalue=final_prompt)
    print(final_response['output'])
결론 및 다음 단계
사내 API의 JSON 키를 바꾸실 필요 없습니다. **inputvalue에 들어가는 "내용"**을 똑똑하게 구성하면 됩니다.

현재 경원님 업무 환경에서 가장 먼저 자동화하고 싶은 **"도구"**가 무엇인가요?

MSSQL 특정 테이블 조회 (예: SMD 제조 로그)

특정 폴더의 텍스트 파일(로그) 검색

라즈베리파이 제어 명령 전송

이 중 하나만 골라주시면, 경원님의 사내 API 규격(inputvalue)에 딱 맞춘 실제 파이썬 MCP 서버/호스트 예제 코드를 짜드리겠습니다. 어느 것을 먼저 해볼까요?