[Step 1] Dify 설치 (도커)
브릿지 서버가 돌아가는 터미널은 그대로 두시고(끄면 안 됩니다), 새 터미널 창을 열어서 진행하세요.

Dify 소스코드 다운로드

Bash

cd /home/kw
git clone https://github.com/langgenius/dify.git
설치 폴더로 이동

Bash

cd dify/docker
Dify 실행 (이미지 다운로드 및 컨테이너 실행)

이 명령어는 인터넷 속도에 따라 5~10분 정도 걸릴 수 있습니다.

Bash

docker compose up -d
설치 확인

docker ps를 쳤을 때 dify-api, dify-web 등 여러 개가 떠 있으면 성공입니다.

[Step 2] Dify 초기 설정 (웹 접속)
이제 마우스를 잡으시고 크롬(또는 브라우저)을 켜세요.

접속: 주소창에 http://localhost 입력.

관리자 계정 생성:

처음 접속하면 관리자 계정을 만들라고 나옵니다.

이메일/비번/이름은 아무거나 입력해도 됩니다. (로컬 DB에만 저장됨)

예: admin@smd.com / password1234

[Step 3] 브릿지 서버(5077)와 연결 ★제일 중요★
Dify에게 "내 컴퓨터 5077번에 있는 AI를 써라"고 알려주는 과정입니다.

설정 진입:

우측 상단 계정 아이콘(이니셜) 클릭 -> Settings (설정).

모델 제공자 선택:

좌측 메뉴 Model Provider.

화면 중간쯤 OpenAI-API-compatible 카드 찾아서 클릭. (안 보이면 검색창에 OpenAI 입력 후 compatible 선택)

연결 정보 입력 (정확히 입력하세요):

Model Name: smd-ai (원하는 이름)

Base URL: http://host.docker.internal:5077/v1

(설명: 도커 내부에서 내 컴퓨터(우분투)의 5077번에 접속하려면 localhost가 아니라 host.docker.internal을 써야 합니다.)

Model Type: Chat

Context Window Size: 4096 (대충 넉넉히)

Max Tokens: 4096

API Key: any (아무거나 입력, 빈칸만 아니면 됨)

저장: 우측 하단 Save 버튼 클릭.

에러가 안 뜨고 창이 닫히면 성공입니다.

[Step 4] 실전 사용법 (챗봇 만들기)
이제 연결된 회사 AI를 가지고 **"SMD 공정 챗봇"**을 만들어 보겠습니다.

1. 앱 생성
상단 메뉴 Studio (스튜디오) 클릭.

Create from Blank (새로 만들기) 클릭.

Chat App (챗봇) 선택.

Name: SMD 공정 도우미 입력 후 Create.

2. 설정 및 프롬프트
화면이 바뀌면 왼쪽(설정)과 오른쪽(미리보기)으로 나뉩니다.

모델 선택 (우측 상단):

GPT-3.5 등으로 되어있는 부분을 클릭해서 아까 등록한 **smd-ai**를 선택하세요.

프롬프트 작성 (Instructions):

왼쪽 Instructions 칸에 AI의 역할을 지정해 줍니다.

입력 예시:

Plaintext

너는 파나소닉 NPM 마운터 및 SMT 공정 전문가야.
작업자가 에러 코드나 현상을 물어보면, 기술적 원인과 조치 방법을 간결하게 설명해줘.
3. 지식(Knowledge) 추가 (RAG 테스트)
아까 말씀하신 "텍스트 업로드" 기능입니다.

상단 메뉴 Knowledge (지식) 클릭 -> Create Knowledge.

Import Text Data -> Custom.

여기에 갖고 계신 매뉴얼 내용이나 에러 코드 리스트를 복사 붙여넣기 하세요.

예시: "E1020은 흡착 에러임. 노즐 세척 필요."

Next -> Save & Process.

다시 Studio -> SMD 공정 도우미 앱으로 돌아옴.

왼쪽 Context 부분의 Add 버튼 클릭 -> 방금 만든 지식 선택 -> Add.

4. 대화하기
이제 오른쪽 Preview 채팅창에 질문을 던져보세요.

질문: "야 3호기에서 E1020 뜨는데 뭐냐?"

작동 원리:

Dify가 질문을 받음.

Knowledge에서 "E1020=흡착에러" 정보를 찾음.

host.docker.internal:5077 (브릿지 서버)로 "이 정보랑 질문 합쳐서 답해줘"라고 보냄.

브릿지 서버가 회사 API에 물어보고 답을 받아옴.

화면에 답변 출력.

[문제 발생 시 체크리스트]
만약 "Connection Error" 같은 게 뜬다면:

터미널 확인: 브릿지 서버(run.sh 실행한 창)가 켜져 있나요?

방화벽: 우분투 방화벽이 5077을 막고 있을 수 있습니다.

sudo ufw allow 5077 (필요시 실행)

주소 확인: Base URL 뒤에 /v1을 꼭 붙였나요? (http://host.docker.internal:5077/v1)

로그 확인: 브릿지 서버 터미널에 [LOG] 질문 수신됨 같은 글자가 뜨는지 확인하세요.

이제 회사 AI를 님만의 사설 Dify에서