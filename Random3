import urllib.request
import json
import ssl

# ===========================
# ğŸ‘‡ ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ì„¸ìš”
GHE_TOKEN = "ghp_xxxxxxxx" 
# ===========================

# ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬í•´ì„œ ê°€ì ¸ì˜¤ëŠ” API
API_URL = "https://github.sec.samsung.net/api/v3/user/repos?sort=created&direction=desc&per_page=5"

def list_my_repos():
    print("ğŸ” ì„œë²„ì— ë“±ë¡ëœ ìµœì‹  í”„ë¡œì íŠ¸ 5ê°œë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤...\n")
    
    headers = {"Authorization": f"token {GHE_TOKEN}", "User-Agent": "Python"}
    
    # SSL ë¬´ì‹œ ì„¤ì •
    ctx = ssl.create_default_context()
    ctx.check_hostname = False
    ctx.verify_mode = ssl.CERT_NONE

    try:
        req = urllib.request.Request(API_URL, headers=headers)
        with urllib.request.urlopen(req, context=ctx) as res:
            repos = json.loads(res.read().decode())
            
            if not repos:
                print("âŒ ì¡°íšŒëœ í”„ë¡œì íŠ¸ê°€ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤! ë°© ìƒì„±ì´ ì•ˆ ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤.")
                return

            print("============================================")
            for i, repo in enumerate(repos):
                print(f"[{i+1}] ì´ë¦„: {repo['name']}")
                print(f"    ì£¼ì†Œ: {repo['clone_url']}")
                print(f"    ê³µê°œì—¬ë¶€: {'Private' if repo['private'] else 'Public'}")
                print("--------------------------------------------")
            print("============================================")
            print("ğŸ‘‰ ìœ„ 'ì£¼ì†Œ' ì¤‘ í•˜ë‚˜ë¥¼ ë³µì‚¬í•´ì„œ git remote add í•˜ì„¸ìš”.")

    except Exception as e:
        print(f"âŒ ì¡°íšŒ ì‹¤íŒ¨: {e}")

if __name__ == "__main__":
    list_my_repos()