import os
from datetime import datetime

# ==========================================
# ì‚¬ìš©ì ì„¤ì • (ì›í•˜ëŠ” ê²½ë¡œë¡œ ìˆ˜ì • ê°€ëŠ¥)
# ==========================================
BASE_DIR = os.path.expanduser("~/My_Dev_Center")

# ==========================================
# í´ë” êµ¬ì¡° ì •ì˜
# ==========================================
STRUCTURE = {
    "00_Inbox": ["ì•„ì´ë””ì–´_ë¤í”„.md", "ê¸‰í•œë©”ëª¨.md"],
    "10_Servers": ["Linux_Main.md", "Win_Sub1.md", "Win_Sub2.md", "Port_Map.md"],
    "20_Projects": ["Current_Work.md", "Pending_Issues.md"],
    "30_Manuals": ["íŒ€ê³µìœ ìš©_ê°€ì´ë“œ.md", "ë‚˜ë§Œì˜_íŠ¸ëŸ¬ë¸”ìŠˆíŒ….md"],
    "90_Templates": ["ì„œë²„_ì •ë³´_í…œí”Œë¦¿.md", "ì¼ì¼_ì—…ë¬´_í…œí”Œë¦¿.md"],
    "99_Archive": []
}

# ==========================================
# íŒŒì¼ ë‚´ìš© í…œí”Œë¦¿ (ë§ˆí¬ë‹¤ìš´)
# ==========================================
TEMPLATES = {
    "Dashboard.md": f"""# ğŸš€ ê²½ì›ë‹˜ì˜ ê°œë°œ ê´€ì œ ì„¼í„°
Date: {datetime.now().strftime('%Y-%m-%d')}

## ğŸ”¥ ìµœìš°ì„  ì‘ì—… (DO NOW)
- [ ] (ì—¬ê¸°ì— ì§€ê¸ˆ ë‹¹ì¥ í•´ì•¼ í•  ì¼ì„ ì ìœ¼ì„¸ìš”)
- [ ] 

## ğŸ–¥ï¸ ì„œë²„ ìƒíƒœ ìš”ì•½
| ì„œë²„ëª… | IP / ì ‘ì†ì •ë³´ | ì£¼ìš” ìš©ë„ | ë¹„ê³  |
| :--- | :--- | :--- | :--- |
| **Main (Ubuntu)** | Local | ë©”ì¸ ê°œë°œ í™˜ê²½ | |
| **Sub 1 (Win)** | RDP: 192.168.x.x | ìœˆë„ìš° ê°œë°œìš© | |
| **Sub 2 (Win)** | RDP: 192.168.x.x | í…ŒìŠ¤íŠ¸ìš© | |

## ğŸ“‚ ë°”ë¡œê°€ê¸°
- [[10_Servers/Port_Map|í¬íŠ¸/ë°©í™”ë²½ ê´€ë¦¬ëŒ€ì¥]]
- [[20_Projects/Current_Work|í˜„ì¬ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸]]
- [[30_Manuals/íŒ€ê³µìœ ìš©_ê°€ì´ë“œ|íŒ€ ê³µìœ  ê°€ì´ë“œ]]
""",

    "Port_Map.md": """# ğŸ›¡ï¸ í¬íŠ¸ ë° ë°©í™”ë²½ ê´€ë¦¬ ëŒ€ì¥

## ğŸŒ ì˜¤í”ˆëœ í¬íŠ¸ ëª©ë¡
| ì„œë¹„ìŠ¤ëª… | í¬íŠ¸ | í”„ë¡œí† ì½œ | ì‚¬ìš© ì„œë²„ | ë¹„ê³  |
| :--- | :--- | :--- | :--- | :--- |
| SSH | 22 | TCP | All | |
| Web | 8080 | TCP | Main | |

## ğŸ§± ë°©í™”ë²½ ê·œì¹™ (UFW / Windows)
- `sudo ufw allow 8080/tcp` : ì›¹ ê°œë°œìš©
""",

    "ì„œë²„_ì •ë³´_í…œí”Œë¦¿.md": """# ğŸ–¥ï¸ ì„œë²„ ìƒì„¸ ì •ë³´: [ì„œë²„ëª…]

## 1. ê¸°ë³¸ ì ‘ì† ì •ë³´
- **IP:** - **User:** - **OS:** - **ì ‘ì† ë°©ë²•:** `ssh user@ip`

## 2. ì£¼ìš” ì„œë¹„ìŠ¤
- [ ] Docker Container A
- [ ] DB Service

## 3. íŠ¹ì´ì‚¬í•­ & íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
- (ê³¼ê±° ì´ìŠˆ ë° í•´ê²°ì±… ê¸°ë¡)
""",

    "íŒ€ê³µìœ ìš©_ê°€ì´ë“œ.md": """# ğŸ“š íŒ€ ê³µìœ  ê°€ì´ë“œ (ê³µìœ  í´ë” ë“±)

> ì‚¬ëŒë“¤ì´ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ ì—¬ê¸°ì— ì •ë¦¬í•˜ê³  ë§í¬ë§Œ ë˜ì ¸ì£¼ì„¸ìš”.

## 1. ê³µìœ  í´ë” ì ‘ì†ë²•
- Windows: `\\\\Server\\Share`
- Ubuntu: `smb://Server/Share`

## 2. ê°œë°œ í™˜ê²½ ì…‹íŒ… (One-shot)
- (ìŠ¤í¬ë¦½íŠ¸ ìœ„ì¹˜ ë§í¬)
"""
}

def create_file(path, content):
    """íŒŒì¼ ìƒì„± í•¨ìˆ˜ (ê¸°ì¡´ íŒŒì¼ ë®ì–´ì“°ê¸° ë°©ì§€)"""
    if not os.path.exists(path):
        with open(path, "w", encoding="utf-8") as f:
            f.write(content)
        print(f"[ìƒì„±] {path}")
    else:
        print(f"[ê±´ë„ˆëœ€] ì´ë¯¸ ì¡´ì¬í•¨: {path}")

def main():
    print(f"ì‹œìŠ¤í…œ êµ¬ì¶• ì‹œì‘: {BASE_DIR} ...")
    
    # 1. ë©”ì¸ ë””ë ‰í† ë¦¬ ìƒì„±
    if not os.path.exists(BASE_DIR):
        os.makedirs(BASE_DIR)

    # 2. í•˜ìœ„ í´ë” ë° ê¸°ë³¸ íŒŒì¼ ìƒì„±
    for folder, files in STRUCTURE.items():
        folder_path = os.path.join(BASE_DIR, folder)
        if not os.path.exists(folder_path):
            os.makedirs(folder_path)
            print(f"[í´ë”] {folder}/")
        
        for file_name in files:
            file_path = os.path.join(folder_path, file_name)
            # í…œí”Œë¦¿ ë§¤ì¹­ (ì—†ìœ¼ë©´ ë¹ˆ íŒŒì¼)
            content = TEMPLATES.get(file_name, f"# {file_name[:-3]}\n\në‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.")
            create_file(file_path, content)

    # 3. ëŒ€ì‹œë³´ë“œ(ë©”ì¸ í™”ë©´) ìƒì„±
    create_file(os.path.join(BASE_DIR, "Dashboard.md"), TEMPLATES["Dashboard.md"])
    
    # 4. í…œí”Œë¦¿ íŒŒì¼ ìƒì„± (90_Templates í´ë”)
    for name, content in TEMPLATES.items():
        if "í…œí”Œë¦¿" in name:
            create_file(os.path.join(BASE_DIR, "90_Templates", name), content)

    print("\nâœ… [ì™„ë£Œ] ì‹œìŠ¤í…œ êµ¬ì¶•ì´ ëë‚¬ìŠµë‹ˆë‹¤.")
    print(f"ğŸ‘‰ 'VS Code'ë‚˜ 'Obsidian'ìœ¼ë¡œ '{BASE_DIR}' í´ë”ë¥¼ ì—´ì–´ì„œ ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.")

if __name__ == "__main__":
    main()