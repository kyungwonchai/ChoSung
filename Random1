알겠습니다. Flask 웹 애플리케이션의 모든 페이지에 대한 기본 레이아웃을 정의하는 app/templates/layout.html 파일의 최종 전체 코드를 한국어 설명과 함께 다시 제공해 드리겠습니다.

이 파일은 상단 네비게이션 바, 기본 스타일, 그리고 다른 페이지들이 내용을 채워 넣을 수 있는 블록({% block title %}, {% block content %} 등)을 포함합니다. Flash 메시지(알림 메시지)는 이 layout.html에서 직접 표시하지 않고, 각 개별 페이지 템플릿(예: control_panel.html, manage_target_pcs.html 등)이 필요에 따라 원하는 위치에 표시하도록 구성했습니다.

최종: app/templates/layout.html
HTML

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SControl Web{% endblock %} - Flask</title> {# 기본 제목에 "- Flask" 추가 (선택적) #}
    <style>
        body { 
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif; 
            margin: 0; 
            padding: 0;
            background-color: #f4f4f8; 
            color: #333; 
            font-size: 14px;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 10px 20px;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        nav { 
            background-color: #34495e; 
            padding: 12px 0; 
            text-align: center; 
            margin-bottom: 20px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        nav a { 
            color: #ecf0f1; 
            margin: 0 15px; 
            text-decoration: none; 
            font-weight: 500; /* 약간 얇게 */
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        nav a:hover { 
            background-color: #4e667f;
            text-decoration: none; 
        }
        nav .user-info { /* 네비게이션 바 우측 사용자 정보 스타일 */
            color: #bdc3c7; 
            font-size: 0.9em;
            float: right; /* 오른쪽 정렬 */
            margin-right: 20px;
            padding-top: 3px; /* 링크와 세로 중앙 정렬을 위해 약간 조정 */
        }

        .container { 
            width: 90%;
            max-width: 1200px; /* 최대 너비 설정 */
            margin: 20px auto; /* 좌우 자동 마진으로 중앙 정렬 */
            background-color: white; 
            padding: 25px; 
            border-radius: 8px; 
            box-shadow: 0 2px 15px rgba(0,0,0,0.1); 
        }
        h1, h2, h3 { color: #2c3e50; margin-top:0; }
        h1 { font-size: 1.7em; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px;}
        h2 { font-size: 1.4em; margin-top: 30px; margin-bottom:15px; border-bottom: 1px solid #eee; padding-bottom: 8px;}
        
        table { width: 100%; border-collapse: collapse; margin-top: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        th, td { border: 1px solid #e0e0e0; padding: 10px 12px; text-align: left; vertical-align: middle;}
        th { background-color: #f5f7fa; font-weight: 600; color: #333;}
        tr:nth-child(even) { background-color: #fdfdfd; }
        tr:hover { background-color: #f0f5fa; }
        
        /* Flash 메시지 리스트 스타일 (개별 페이지 템플릿에서 사용) */
        ul.flash-messages { 
            list-style-type: none; 
            padding-left: 0;       
            margin-top: 20px;
            margin-bottom: 0; /* 다른 요소와의 간격은 flash-messages-container에서 조절 */
        }
        .flash-messages li { 
            padding: 12px 15px; 
            margin-bottom: 10px; 
            border-radius: 4px; 
            border-width: 1px;
            border-style: solid;
            font-size: 0.95em;
        }
        .flash-messages li:last-child { margin-bottom: 0; }
        .flash-messages .success { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
        .flash-messages .error { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
        .flash-messages .warning { background-color: #fff3cd; color: #856404; border-color: #ffeeba; }
        .flash-messages .info { background-color: #d1ecf1; color: #0c5460; border-color: #bee5eb; }

        .form-group { margin-bottom: 18px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 500; color: #555;}
        .form-group input[type="text"], 
        .form-group input[type="number"], 
        .form-group input[type="password"], 
        .form-group input[type="date"], /* DateField 스타일 추가 */
        .form-group textarea,
        .form-group select { /* SelectField 스타일 추가 */
            width: calc(100% - 24px); /* padding 고려 */
            padding: 10px; 
            border: 1px solid #ccc; 
            border-radius: 4px;
            font-size: 1em;
            box-sizing: border-box; /* padding과 border가 width에 포함되도록 */
        }
        .form-group input[type="text"]:focus, 
        .form-group input[type="number"]:focus, 
        .form-group input[type="password"]:focus,
        .form-group input[type="date"]:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
            outline: none;
        }
        .form-group textarea { resize: vertical; min-height: 80px; }
        .form-group .errors li { color: red; font-size: 0.85em; list-style-position: inside; padding-left:0;}
        .form-group .errors { padding-left: 0; margin-top: 4px;}


        .btn { padding: 10px 18px; color: white; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; display: inline-block; font-size: 0.95em; font-weight: 500; transition: background-color 0.2s ease-in-out; }
        .btn-primary { background-color: #007bff; }
        .btn-primary:hover { background-color: #0056b3; }
        .btn-danger { background-color: #dc3545; }
        .btn-danger:hover { background-color: #c82333; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn-secondary:hover { background-color: #545b62; }
        .btn-sm { padding: 6px 12px; font-size: 0.8em;}
        .action-links a, .action-links input[type="submit"], .command-buttons button { margin-right: 8px; margin-bottom: 8px;}
        .command-buttons { margin-top: 15px; }

        .pagination { margin-top: 25px; text-align: center; }
        .pagination a, .pagination span.disabled, .pagination strong { margin: 0 4px; padding: 8px 12px; border: 1px solid #ddd; text-decoration: none; color: #007bff; border-radius: 4px; }
        .pagination span.disabled { color: #aaa; border-color: #ddd; }
        .pagination strong { font-weight: bold; background-color: #007bff; color: white; border-color: #007bff;}

        footer { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; color: #777; font-size: 0.9em; }
    </style>
</head>
<body>
    <header>
        <h1>SControl 웹 시스템</h1>
    </header>
    <nav>
        <a href="{{ url_for('main.index') }}">홈</a>
        {% if current_user_role == 'admin' %}
            <a href="{{ url_for('admin.manage_target_pcs') }}">PC 관리</a>
            <a href="{{ url_for('admin.manage_user_ips') }}">사용자 IP 관리</a>
            <a href="{{ url_for('admin.manage_admin_ips') }}">관리자 IP 관리</a>
            <a href="{{ url_for('admin.manage_calendar_exceptions') }}">달력 예외 관리</a> 
        {% endif %}
        {% if current_user_role in ['admin', 'user'] %}
             <a href="{{ url_for('user.control_panel') }}">원격 제어판</a>
        {% endif %}
        {# 오른쪽 정렬된 사용자 정보 #}
        <span class="user-info">(접속 IP: {{ current_user_ip }} | 역할: {{ current_user_role }})</span>
    </nav>

    <div class="container">
        {# layout.html에서는 전역 flash 메시지를 표시하지 않습니다. #}
        {# 각 개별 페이지 템플릿(예: control_panel.html)이 content 블록 내 원하는 위치에 flash 메시지를 표시합니다. #}
        
        {% block content %}{# 개별 페이지의 메인 콘텐츠가 여기에 렌더링됩니다. #}{% endblock %}

    </div>

    <footer>
        <p>&copy; {{ now.year if now else "" }} SControl System. All rights reserved.</p>
    </footer>

    {# 개별 페이지에서 필요한 JavaScript 파일들을 여기에 추가할 수 있습니다. #}
    {% block scripts %}{% endblock %}
</body>
</html>
layout.html 주요 특징 및 변경 사항:

기본 HTML 구조: 모든 페이지에서 공통으로 사용될 HTML, HEAD, BODY 구조를 제공합니다.
CSS 스타일: 기본적인 CSS 스타일을 <style> 태그 내에 포함시켰습니다. 프로젝트가 커지면 별도의 CSS 파일로 분리하는 것이 좋습니다.
테이블, 버튼, 폼 요소, 페이지네이션 등에 대한 스타일이 포함되어 있습니다.
Flash 메시지 스타일 (ul.flash-messages li 등)은 유지되어, 개별 페이지에서 flash 메시지를 표시할 때 일관된 모양을 제공합니다.
이전에 추가했던 .flash-messages-container-fixed 관련 CSS는 제거했습니다.
네비게이션 바:
main.index (홈), admin.* (관리자 메뉴), user.control_panel (사용자 제어판) 링크를 포함합니다.
current_user_role 컨텍스트 변수 (auth.py의 inject_user_info_to_templates에서 주입됨)를 사용하여 현재 접속한 사용자의 역할에 따라 다른 메뉴를 보여줍니다.
"달력 예외 관리" 링크를 관리자 메뉴에 추가했습니다.
접속 IP와 역할 정보를 네비게이션 바 오른쪽에 표시하도록 .user-info 클래스와 함께 float: right 스타일을 적용했습니다. (간단한 예시이며, CSS를 더 다듬을 수 있습니다.)
{% block title %}: 각 페이지에서 브라우저 탭 제목을 설정할 수 있도록 합니다.
{% block content %}: 각 페이지의 주요 내용이 이 블록을 채워서 표시됩니다.
Flash 메시지 표시 부분 제거: 이 layout.html에서는 전역적으로 flash 메시지를 표시하는 코드를 제거했습니다. 각 하위 템플릿(예: control_panel.html, manage_target_pcs.html 등)이 자신이 원하는 위치(예: 표 아래)에 get_flashed_messages()를 사용하여 메시지를 표시하도록 합니다.
푸터: 간단한 저작권 정보를 표시합니다. now.year는 app/__init__.py의 inject_now 컨텍스트 프로세서를 통해 현재 연도를 전달받아 표시합니다.
{% block scripts %}: 각 페이지에서 필요한 JavaScript 파일을 추가할 수 있도록 합니다.
이 layout.html 파일을 프로젝트의 app/templates/ 폴더에 저장하거나 업데이트하시면 됩니다. 이제 각 페이지 템플릿(예: control_panel.html)에서 {% extends "layout.html" %}를 사용하고, {% block content %} 내에 페이지별 내용을 작성하며, 필요한 위치에 flash 메시지 로직을 직접 포함시키면 됩니다.

다음으로 어떤 부분을 진행할까요?

