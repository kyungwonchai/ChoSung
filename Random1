컴의 폼 애플리케이션 코드
폼 디자인:

Visual Studio에서 Windows Forms App (.NET Framework) 프로젝트를 생성합니다.
Form1.cs 파일을 엽니다.
필요한 네임스페이스 추가:

csharp
코드 복사
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;
using System.Windows.Forms;
폼 코드 수정:

csharp
코드 복사
public partial class Form1 : Form
{
    private Thread serverThread;

    public Form1()
    {
        InitializeComponent();
        StartServer();
    }

    private void StartServer()
    {
        serverThread = new Thread(new ThreadStart(RunServer));
        serverThread.IsBackground = true;
        serverThread.Start();
    }

    private void RunServer()
    {
        IPAddress ip = IPAddress.Parse("본컴의 IP 주소");
        TcpListener server = new TcpListener(ip, 8080);
        server.Start();

        while (true)
        {
            try
            {
                TcpClient client = server.AcceptTcpClient();
                NetworkStream stream = client.GetStream();
                byte[] buffer = new byte[1024];
                int bytesRead = stream.Read(buffer, 0, buffer.Length);
                string command = Encoding.ASCII.GetString(buffer, 0, bytesRead);

                if (command == "OFF")
                {
                    // NirCmd로 화면 끄기
                    System.Diagnostics.Process.Start("nircmd.exe", "monitor off");
                }
                else if (command == "ON")
                {
                    // NirCmd로 화면 켜기
                    System.Diagnostics.Process.Start("nircmd.exe", "monitor on");
                }
                client.Close();
            }
            catch (Exception ex)
            {
                // 예외 처리
                Console.WriteLine("서버 오류: " + ex.Message);
            }
        }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        serverThread?.Abort();
    }
}
갤럭시 북의 클라이언트 코드
갤럭시 북에서 폼을 사용하여 명령을 전송하는 간단한 클라이언트 애플리케이션을 작성합니다.

폼 디자인:

Visual Studio에서 Windows Forms App (.NET Framework) 프로젝트를 생성합니다.
Form1.cs 파일을 엽니다.
필요한 네임스페이스 추가:

csharp
코드 복사
using System;
using System.Net.Sockets;
using System.Text;
using System.Windows.Forms;
폼 코드 수정:

csharp
코드 복사
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnTurnOff_Click(object sender, EventArgs e)
    {
        SendCommand("OFF");
    }

    private void btnTurnOn_Click(object sender, EventArgs e)
    {
        SendCommand("ON");
    }

    private void SendCommand(string command)
    {
        try
        {
            TcpClient client = new TcpClient("본컴의 IP 주소", 8080);
            NetworkStream stream = client.GetStream();
            byte[] data = Encoding.ASCII.GetBytes(command);
            stream.Write(data, 0, data.Length);
            client.Close();
        }
        catch (Exception ex)
        {
            // 예외 처리
            MessageBox.Show("연결 오류: " + ex.Message);
        }
    }
}
폼 디자인에 버튼 추가:

btnTurnOff와 btnTurnOn이라는 두 개의 버튼을 추가합니다.
각각의 버튼 클릭 이벤트 핸들러를 btnTurnOff_Click와 btnTurnOn_Click 메서드에 연결합니다.
이렇게 하면, 본컴의 폼 애플리케이션에서 스레드를 사용하여 소켓 서버를 실행하고, 갤럭시 북의 폼 애플리케이션에서 명령을 전송하여 본컴의 모니터 상태에 따라 갤럭시 북의 화면을 제어할 수 있습니다.






