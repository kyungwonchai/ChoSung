public partial class MainForm : Form
{
    private List<string> playbackFiles = new List<string>();
    private int currentFileIndex = 0;

    public MainForm()
    {
        InitializeComponent();

        LoadVideoFiles();

        // EndReached 이벤트 핸들러 등록
        videoView1.MediaPlayer.EndReached += OnMediaPlayerEndReached;
    }

    private void LoadVideoFiles()
    {
        string[] files = Directory.GetFiles(@"D:\11", "recording*.mp4", SearchOption.AllDirectories);

        foreach (var file in files)
        {
            playbackFiles.Add(file);
            listBox1.Items.Add(Path.GetFileName(file));
        }
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        currentFileIndex = listBox1.SelectedIndex;
        PlayFile(currentFileIndex);
    }

    private void PlayFile(int index)
    {
        if (index >= 0 && index < playbackFiles.Count)
        {
            string filePath = playbackFiles[index];
            videoView1.MediaPlayer.Stop(); // 이전 재생 중지
            videoView1.MediaPlayer.Media = new Media(_libVLC, filePath, FromType.FromPath);
            videoView1.MediaPlayer.Play();
        }
    }

    private void OnMediaPlayerEndReached(object sender, EventArgs e)
    {
        // 다음 파일 재생
        currentFileIndex++;
        if (currentFileIndex < playbackFiles.Count)
        {
            PlayFile(currentFileIndex);
        }
    }

    private void trackBar1_Scroll(object sender, EventArgs e)
    {
        // 시간 표시 코드
    }
}
