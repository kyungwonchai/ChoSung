까지의 코드가 제대로 작동하지 않아서 불편을 드렸습니다. 주어진 조건에 대해 다시 코드를 작성하겠습니다.

csharp

using System;

namespace StringManipulation
{
    class Program
    {
        static void Main(string[] args)
        {
            string C = "gsgsgBSM-sgsgsg_5_005";
            string prefix = "BSM-";
            int startIndex = C.IndexOf(prefix);

            if (startIndex != -1)
            {
                int endIndex = C.IndexOf(' ', startIndex);
                if (endIndex == -1) endIndex = C.Length;

                string targetString = C.Substring(startIndex, endIndex - startIndex);
                string[] parts = targetString.Split('_');

                if (parts.Length >= 3)
                {
                    if (int.TryParse(parts[^1], out int lastNumber))
                    {
                        lastNumber++;
                        parts[^1] = lastNumber.ToString("D3");
                    }
                }
                else
                {
                    parts[^1] += "_001";
                }

                string newString = string.Join('_', parts);
                C = C.Replace(targetString, newString);
            }

            Console.WriteLine("Modified string: " + C);
        }
    }
}

이 코드는 다음과 같이 동작합니다:

    "gsgsgBSM-sgsgsg_5" → "gsgsgBSM-sgsgsg_5_001"
    "gsgsgBSM-sgsgsg_5_005" → "gsgsgBSM-sgsgsg_5_006"

다시 한번 확인해 주시면 감사하겠