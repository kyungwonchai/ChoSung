름이 your_database_name, 사용자 이름이 abc, 비밀번호가 1233445일 때의 예시입니다.

1. MySQL JDBC URL과 연결 정보 설정
kotlin
코드 복사
val mySqlUrl = "jdbc:mysql://10.244.122.122:3306/your_database_name?useSSL=false&serverTimezone=UTC"
val mySqlUser = "abc"
val mySqlPassword = "1233445"
2. 실제 예시 코드
이제 실제 연결 코드와 함께 예외 처리를 포함한 전체 예시를 보여드리겠습니다.

kotlin
코드 복사
private suspend fun checkModelInMySQL(qrCode: String): String? {
    return withContext(Dispatchers.IO) {
        var connection: Connection? = null
        var preparedStatement: PreparedStatement? = null
        var resultSet: ResultSet? = null
        var result: String? = null
        try {
            // 최신 MySQL JDBC 드라이버 로드
            Class.forName("com.mysql.cj.jdbc.Driver")

            // 데이터베이스 연결
            val mySqlUrl = "jdbc:mysql://10.244.122.122:3306/your_database_name?useSSL=false&serverTimezone=UTC"
            connection = DriverManager.getConnection(mySqlUrl, "abc", "1233445")

            // 쿼리 실행
            val query = "SELECT district, at, modelnumber FROM smd.management_mobile_mainseet WHERE modelnumber = ?"
            preparedStatement = connection.prepareStatement(query)
            preparedStatement.setString(1, qrCode)
            
            resultSet = preparedStatement.executeQuery()

            // 결과 처리
            if (resultSet.next()) {
                val district = resultSet.getString("district")
                val at = resultSet.getString("at")
                val modelnumber = resultSet.getString("modelnumber")
                result = "District: $district, At: $at, Model: $modelnumber"
            }
        } catch (e: Exception) {
            // 예외 발생 시 로그 출력
            e.printStackTrace()
            Log.e("MySQLConnection", "Error connecting to MySQL: ${e.message}")
        } finally {
            try {
                resultSet?.close()
                preparedStatement?.close()
                connection?.close()
            } catch (e: Exception) {
                e.printStackTrace()
                Log.e("MySQLConnection", "Error closing MySQL resources: ${e.message}")
            }
        }
        result
    }
}
주요 사항:
JDBC URL:

"jdbc:mysql://10.244.122.122:3306/your_database_name?useSSL=false&serverTimezone=UTC"는 MySQL 데이터베이스에 연결하기 위한 URL입니다. your_database_name을 실제 데이터베이스 이름으로 대체하세요.
사용자 이름과 비밀번호:

사용자 이름은 "abc", 비밀번호는 "1233445"입니다.
드라이버 클래스:

최신 MySQL 드라이버를 위해 "com.mysql.cj.jdbc.Driver"를 사용합니다.
이 코드를 사용하면 MySQL 5.7 데이터베이스에 올바르게 연결할 수 있습니다. 문제 발생 시 로그(Log.e