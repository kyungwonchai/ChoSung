시키는 트리거와 요청하신 대로 뷰를 생성하는 스크립트입니다.

    트리거 생성:
    트리거는 smd.scm_warpage_result 테이블에서 time 컬럼이 14일 지난 행을 삭제할 때 smd.scm_warpage_result_back으로 이동시키도록 합니다.

sql

DELIMITER //
CREATE TRIGGER move_to_backup
BEFORE DELETE ON smd.scm_warpage_result
FOR EACH ROW
BEGIN
  INSERT INTO smd.scm_warpage_result_back SELECT * FROM smd.scm_warpage_result WHERE time < DATE_SUB(NOW(), INTERVAL 14 DAY);
  DELETE FROM smd.scm_warpage_result WHERE time < DATE_SUB(NOW(), INTERVAL 14 DAY);
END;
//
DELIMITER ;

    뷰 생성:
    뷰는 smd.scm_warpage_result와 smd.scm_warpage_result_back을 합쳐서 view_scm_warpageAll로 만듭니다.

sql

CREATE VIEW view_scm_warpageAll AS
SELECT * FROM smd.scm_warpage_result
UNION ALL
SELECT * FROM smd.scm_warpage_result_back;

트리거는 특정 행을 삭제하기 전에 작동하며, 해당 행을 백업 테이블로 이동시킵니다. 뷰는 두 테이블의 데이터를 하나로 합쳐 조회할 수 있게 해줍니다.

테이블의 구조나 컬럼의 세부 정보에 따라 스크립트를 조정해야 할 수도 있으니, 테스트 후 필요하면 수정해주세요!
