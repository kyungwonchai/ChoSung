5.7에서 특정 문자열 패턴에서 문자 부분을 제거하고 남은 숫자를 조회하는 쿼리를 작성하려면, MySQL의 문자열 함수들을 사용해야 합니다. 주어진 패턴이 SMD_01초롬과 같은 형태라면, 문자열에서 SMD_와 그 뒤의 문자를 제거하고 숫자 부분만 추출하는 방법을 설명하겠습니다.

여기서는 SUBSTRING_INDEX, REPLACE, REGEXP_REPLACE 함수 등을 활용할 수 있습니다. MySQL 5.7에서는 REGEXP_REPLACE 함수가 지원되지 않으므로, SUBSTRING_INDEX와 REPLACE를 조합해서 사용해야 합니다.

예제 테이블 및 데이터 생성
먼저 예제 테이블을 만들고 데이터를 삽입하겠습니다.

sql
코드 복사
CREATE TABLE example (
    id INT AUTO_INCREMENT PRIMARY KEY,
    code VARCHAR(100)
);

INSERT INTO example (code) VALUES
('SMD_01초롬'),
('SMD_02초롬'),
('SMD_03초롬'),
('SMD_04초롬');
쿼리 작성
다음 쿼리는 SMD_를 제거하고, 그 뒤의 문자들을 제거하여 숫자만 추출합니다. 숫자가 1인 행을 조회하도록 합니다.

sql
코드 복사
SELECT *
FROM example
WHERE CAST(
    REPLACE(
        SUBSTRING_INDEX(code, '_', -1),
        SUBSTRING_INDEX(SUBSTRING_INDEX(code, '_', -1), SUBSTRING_INDEX(SUBSTRING_INDEX(code, '_', -1), '초롬', 1), -1),
        ''
    ) AS UNSIGNED
) = 1;
쿼리 설명
SUBSTRING_INDEX(code, '_', -1): code 열에서 _ 이후의 문자열을 추출합니다. 예를 들어, SMD_01초롬에서 01초롬을 추출합니다.
SUBSTRING_INDEX(SUBSTRING_INDEX(code, '_', -1), SUBSTRING_INDEX(SUBSTRING_INDEX(code, '_', -1), '초롬', 1), -1): 이 부분은 코드의 뒤쪽에 있는 문자를 제거하기 위해 사용합니다. 예를 들어, 01초롬에서 초롬을 추출합니다.
REPLACE(..., ..., ''): 추출된 문자를 제거하여 숫자만 남깁니다. 예를 들어, 01초롬에서 초롬을 제거하여 01이 됩니다.
CAST(... AS UNSIGNED): 최종적으로 숫자 부분을 정수로 변환합니다.
WHERE ... = 1: 변환된 숫자가 1인 행만 조회합니다.
이 쿼리를 실행하면 code가 SMD_01초롬인 행이 조회됩니다. 다른 패턴이나 문자열이 있는 경우에도 동일한 논리를 적용하여 필요한 데이터를 조회할 수 있습니다.