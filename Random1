이 문제를 해결하기 위해 onclick 이벤트에서 파일 이름(filename)이 제대로 전달되고 있는지 확인해야 합니다. 그리고 버튼을 클릭할 때마다 올바른 파일 이름을 가져와 QR 코드를 생성할 수 있도록 코드를 수정하겠습니다.

문제 원인
파일 이름이 제대로 전달되지 않음: onclick 이벤트에서 파일 이름이 제대로 전달되지 않으면, Flask 서버에 요청할 때 올바른 파일 이름이 포함되지 않아 404 오류가 발생할 수 있습니다.
콘솔 로그가 출력되지 않음: JavaScript의 console.log가 출력되지 않는 경우, 자바스크립트 코드가 실행되지 않거나 브라우저 콘솔이 제대로 설정되지 않았을 수 있습니다.
문제 해결
파일 이름 전달 확인: HTML에서 onclick 이벤트를 설정할 때 파일 이름이 제대로 전달되도록 코드를 수정합니다.
테이블 구성 시 데이터 속성 사용: HTML 테이블을 구성할 때, 각 파일 행에 data-* 속성을 사용하여 파일 이름을 저장하고, 버튼 클릭 시 이를 참조하도록 수정합니다.
수정된 코드
1. index.html 수정
아래는 파일 이름을 data-* 속성으로 설정하고, 이를 참조하여 QR 코드를 생성하는 방식으로 수정한 코드입니다.

html
코드 복사
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
</head>
<body>
    <div class="container">
        <h1>File List</h1>
        <p>Your IP: {{ client_ip }}</p>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>File Name</th>
                    <th>QR Code</th>
                </tr>
            </thead>
            <tbody>
                {% for file in files %}
                <tr data-filename="{{ file }}">
                    <td>{{ file }}</td>
                    <td><button class="btn btn-primary" onclick="showQR(this)">QR 보기</button></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- QR 코드 팝업 -->
    <div id="qrModal" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">QR Code</h5>
                    <button type="button" class="btn-close" onclick="hideQR()" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <!-- QR 코드를 표시할 이미지 요소 -->
                    <img id="qrImage" src="" alt="QR Code" class="qr-image">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="hideQR()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
    <script>
        function showQR(button) {
            // 부모 <tr> 요소에서 파일 이름 가져오기
            const filename = button.closest('tr').getAttribute('data-filename');
            console.log("Generating QR for file:", filename); // 파일 이름이 제대로 전달되는지 확인

            if (filename) {
                const qrImage = document.getElementById('qrImage');
                qrImage.src = `/generate_qr/${filename}`;  // 파일명을 URL에 포함하여 QR 코드 생성 요청
                const qrModal = new bootstrap.Modal(document.getElementById('qrModal'));
                qrModal.show();
            } else {
                alert("파일 이름을 찾을 수 없습니다.");
            }
        }

        function hideQR() {
            const qrModal = bootstrap.Modal.getInstance(document.getElementById('qrModal'));
            qrModal.hide();
        }
    </script>
</body>
</html>
코드 설명
data-filename 속성 사용:

각 파일 행(<tr>)에 data-filename 속성을 사용하여 파일 이름을 저장합니다. 예: <tr data-filename="{{ file }}">.
showQR 함수 수정:

showQR 함수는 버튼 객체(this)를 인자로 받아 클릭된 버튼의 부모 <tr> 요소에서 data-filename 속성값을 가져옵니다.
filename 변수에 파일 이름이 올바르게 저장되었는지 console.log로 확인합니다.
파일 이름이 올바르게 전달되면, 해당 파일의 QR 코드를 생성하는 URL을 설정하여 이미지를 로드합니다.
콘솔 출력:

console.log("Generating QR for file:", filename); 라인을 통해 파일 이름이 제대로 전달되는지 브라우저 콘솔에서 확인할 수 있습니다.
디버깅 단계
브라우저 콘솔 확인:

웹 브라우저에서 페이지를 열고 "QR 보기" 버튼을 클릭합니다.
브라우저 개발자 도구(크롬: F12 키 또는 마우스 오른쪽 클릭 > '검사')의 콘솔 탭에서 파일 이름이 출력되는지 확인합니다.
Flask 서버 로그 확인:

Flask 서버 터미널 로그에서도 파일 이름이 포함된 요청이 제대로 들어오는지 확인합니다.
이 수정 사항을 적용하면, "QR 보기" 버튼 클릭 시 올바른 파일 이름이 전달되고 QR 코드가 정상적으로 표시될 것입니