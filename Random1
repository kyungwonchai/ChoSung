정 색상을 전역 변수로 관리하여 InitializeButton에서도 같은 색상이 적용되도록 수정한 코드는 아래와 같습니다. 이 코드에서는 그라데이션 배경색과 테두리 색상을 전역 변수로 설정하여 즐겨찾기 추가/제거와 초기화 시 동일한 색상을 사용할 수 있도록 처리합니다.

수정된 코드 (전역 변수와 초기화 처리)
csharp
코드 복사
// 전역 변수로 지정 색상 관리
private static readonly Color FavoriteBackColor1 = Color.LightBlue; // 연파랑
private static readonly Color FavoriteBackColor2 = Color.Blue;      // 파랑
private static readonly Color FavoriteBorderColor = Color.DarkBlue; // 짙은 파랑

private void InitializeButton(BarButtonItem button)
{
    // 즐겨찾기 상태에 따라 버튼의 배경색 및 테두리 색상 설정
    if (favoriteKeys.Contains(button.Name))
    {
        ApplyFavoriteStyle(button); // 즐겨찾기 색상 적용
        AddToFavorites(button, GetButtonGroupName(button));
    }
}

private void ToggleFavorite(string buttonName, BarButtonItem button)
{
    // 즐겨찾기 추가/제거 로직
    if (favoriteKeys.Contains(buttonName))
    {
        favoriteKeys.Remove(buttonName);

        // 색상 초기화
        ResetButtonStyle(button);
        RemoveFromFavorites(button);
    }
    else
    {
        favoriteKeys.Add(buttonName);

        // 즐겨찾기 스타일 적용
        ApplyFavoriteStyle(button);
        AddToFavorites(button, GetButtonGroupName(button));
    }

    SaveFavorites(); // 즐겨찾기 상태를 변경할 때마다 저장
}

// 버튼에 즐겨찾기 스타일 적용
private void ApplyFavoriteStyle(BarButtonItem button)
{
    // 배경색 그라데이션 설정
    button.ItemAppearance.Normal.BackColor = FavoriteBackColor1;
    button.ItemAppearance.Normal.BackColor2 = FavoriteBackColor2;
    button.ItemAppearance.Normal.Options.UseBackColor = true;

    // 테두리 색상 설정
    button.ItemAppearance.Normal.BorderColor = FavoriteBorderColor;
    button.ItemAppearance.Normal.Options.UseBorderColor = true;
}

// 버튼 스타일 초기화
private void ResetButtonStyle(BarButtonItem button)
{
    button.ItemAppearance.Normal.BackColor = Color.Empty; // 배경색 초기화
    button.ItemAppearance.Normal.BackColor2 = Color.Empty; // 그라데이션 초기화
    button.ItemAppearance.Normal.Options.UseBackColor = false; // 배경색 비활성화

    button.ItemAppearance.Normal.BorderColor = Color.Empty; // 테두리 초기화
    button.ItemAppearance.Normal.Options.UseBorderColor = false; // 테두리 비활성화
}
주요 변경 사항
전역 변수 추가:

FavoriteBackColor1, FavoriteBackColor2: 그라데이션 배경색.
FavoriteBorderColor: 테두리 색상.
InitializeButton 수정:

초기화 시 ApplyFavoriteStyle 호출로 지정된 스타일 적용.
스타일 처리 함수 분리:

ApplyFavoriteStyle: 버튼에 즐겨찾기 색상을 적용.
ResetButtonStyle: 기본 스타일로 초기화.
ToggleFavorite에서 중복 제거:

즐겨찾기 추가 시 ApplyFavoriteStyle 호출, 제거 시 ResetButtonStyle 호출.
결과
모든 버튼 초기화 시에도 즐겨찾기된 버튼은 지정된 색상(파랑-연파랑 그라데이션 및 테두리)으로 표시됩니다.