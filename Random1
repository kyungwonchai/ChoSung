using DevExpress.XtraBars;
using DevExpress.XtraBars.Ribbon;
using DevExpress.XtraEditors;
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;

private void SearchControl1_TextChanged(object sender, EventArgs e)
{
    string searchText = SearchControl1.Text.ToLower();

    // 필터링된 아이템을 툴팁 형태로 표시합니다.
    ShowFilteredItemsBelowSearchControl(searchText);
}

private void ShowFilteredItemsBelowSearchControl(string searchText)
{
    List<BarItem> filteredItems = new List<BarItem>();

    // 필터링된 아이템을 수집합니다.
    foreach (RibbonPage page in ribbonControl1.Pages)
    {
        foreach (RibbonPageGroup group in page.Groups)
        {
            foreach (BarItemLink itemLink in group.ItemLinks)
            {
                BarItem item = itemLink.Item;
                if (item != null && item.Caption.ToLower().Contains(searchText))
                {
                    filteredItems.Add(item);
                }
            }
        }
    }

    // 필터링된 아이템을 보여주기 위한 컨트롤 생성
    Panel panel = new Panel();
    panel.BorderStyle = BorderStyle.FixedSingle;
    panel.Width = SearchControl1.Width;
    panel.Location = new Point(SearchControl1.Left, SearchControl1.Bottom + 5);
    panel.BackColor = SystemColors.Info;
    panel.AutoScroll = true;

    // 필터링된 아이템을 리스트로 표시합니다.
    for (int i = 0; i < filteredItems.Count; i++)
    {
        BarItem item = filteredItems[i];
        string caption = item.Caption;

        Button button = new Button();
        button.Text = caption;
        button.Width = panel.Width - 10;
        button.Location = new Point(5, i * 25 + 5);
        button.Click += (s, e) => HandleItemClick(item); // 아이템 클릭 시 처리할 이벤트 핸들러를 지정합니다.

        panel.Controls.Add(button);
    }

    // 필터링된 아이템이 없는 경우, 패널을 숨깁니다.
    if (filteredItems.Count == 0)
    {
        panel.Visible = false;
    }

    // 패널을 Form에 추가합니다.
    this.Controls.Add(panel);
}

private void HandleItemClick(BarItem item)
{
    // 클릭한 아이템에 대한 동작을 처리합니다.
    MessageBox.Show($"Clicked: {item.Caption}");
}
