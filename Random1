, ì•Œê² ìŠµë‹ˆë‹¤. git add ì´í›„ì— ì¶”ê°€ë  íŒŒì¼ë“¤ì˜ ì´ìš©ëŸ‰ì„ ê³„ì‚°í•´ì„œ, 90MBê°€ ë„˜ìœ¼ë©´ í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ì»¤ë°‹ê³¼ í‘¸ì‹œë¥¼ ê±´ë„ˆë›°ë„ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

ìš©ëŸ‰ ì œí•œì€ ìŠ¤í¬ë¦½íŠ¸ ìƒë‹¨ì—ì„œ ì‰½ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë„ë¡ ë³€ìˆ˜ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## ìµœì¢… ì—…ë°ì´íŠ¸ëœ Python ìŠ¤í¬ë¦½íŠ¸
ì•„ë˜ëŠ” íŒŒì¼ ìš©ëŸ‰ ì œí•œ ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ìµœì¢… ì½”ë“œì…ë‹ˆë‹¤.

Python

import os
import subprocess
import glob
import sys
import re # ì •ê·œí‘œí˜„ì‹ ëª¨ë“ˆ

# --------------------------------------------------
# ì„¤ì •: ì•„ë˜ ë³€ìˆ˜ë“¤ì„ ìì‹ ì˜ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •í•˜ì„¸ìš”.
# --------------------------------------------------
# âœ¨ 1. ë³¸ì¸ì˜ GitHub ìœ ì €ë„¤ì„ì„ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.
GITHUB_USER = "<YOUR_GITHUB_USERNAME>"

# âœ¨ 2. ê²€ìƒ‰ì„ ì‹œì‘í•  ì ˆëŒ€ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”. (ë¹„ì›Œë‘ë©´ í˜„ì¬ í´ë”ì—ì„œ ê²€ìƒ‰)
TARGET_DIRECTORY = ""  # ì˜ˆ: "/home/user/projects"

# âœ¨ 3. ìƒì„±ë  ì €ì¥ì†Œì˜ ê¸°ë³¸ ê³µê°œ ìƒíƒœë¥¼ 'ë¹„ê³µê°œ'ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
VISIBILITY = "--private"

# âœ¨ 4. í‘¸ì‹œí•  íŒŒì¼ì˜ ìµœëŒ€ ìš©ëŸ‰(MB)ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì´ ìš©ëŸ‰ì„ ì´ˆê³¼í•˜ë©´ í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” ê±´ë„ˆëœë‹ˆë‹¤.
SIZE_LIMIT_MB = 90

# --------------------------------------------------
# ì•„ë˜ ì½”ë“œëŠ” ìˆ˜ì •í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤.
# --------------------------------------------------

def sanitize_path(path_string):
    """ê²½ë¡œ ë¬¸ìì—´ì—ì„œ ì•ˆì „í•˜ì§€ ì•Šì€ ë¬¸ìë¥¼ ì–¸ë”ìŠ¤ì½”ì–´ë¡œ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜"""
    return re.sub(r'[^a-zA-Z0-9_./-]', '_', path_string)

def run_command(command):
    """ì£¼ì–´ì§„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜"""
    print(f"ğŸš€ ì‹¤í–‰: {' '.join(command)}")
    try:
        result = subprocess.run(command, check=True, text=True, capture_output=True)
        if result.stdout: print(result.stdout)
        if result.stderr: print(result.stderr, file=sys.stderr)
    except FileNotFoundError:
        print(f"âŒ ì˜¤ë¥˜: '{command[0]}' ëª…ë ¹ì–´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. PATHë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.", file=sys.stderr)
        sys.exit(1)
    except subprocess.CalledProcessError as e:
        print(f"âŒ ëª…ë ¹ì–´ ì‹¤í–‰ ì‹¤íŒ¨: {' '.join(e.cmd)}", file=sys.stderr)
        print(f"--- STDOUT ---\n{e.stdout}", file=sys.stderr)
        print(f"--- STDERR ---\n{e.stderr}", file=sys.stderr)
        sys.exit(1)

def detect_project_type(directory):
    """ë””ë ‰í† ë¦¬ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ í”„ë¡œì íŠ¸ íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜."""
    package_json_path = os.path.join(directory, 'package.json')
    if os.path.isfile(package_json_path):
        try:
            with open(package_json_path, 'r', encoding='utf-8') as f:
                if '"react":' in f.read(): return "react"
        except Exception: pass

    py_files = glob.glob(os.path.join(directory, '*.py'))
    if not py_files: return None

    contains_flask, contains_streamlit = False, False
    for file_path in py_files:
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                content = f.read().lower()
                if 'flask' in content: contains_flask = True
                if 'streamlit' in content: contains_streamlit = True
        except Exception: continue
            
    if contains_flask: return "flask"
    if contains_streamlit: return "streamlit"
    return None

def main():
    if GITHUB_USER == "<YOUR_GITHUB_USERNAME>":
        print("âŒ ì˜¤ë¥˜: ìŠ¤í¬ë¦½íŠ¸ ìƒë‹¨ì˜ GITHUB_USER ë³€ìˆ˜ë¥¼ ì‹¤ì œ GitHub ìœ ì €ë„¤ì„ìœ¼ë¡œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.")
        return

    print(f"ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. GitHub ì‚¬ìš©ì: {GITHUB_USER}")
    base_path = TARGET_DIRECTORY if TARGET_DIRECTORY else os.getcwd()
    print(f"ê²€ìƒ‰ì„ ì‹œì‘í•  í´ë”: {base_path}")
    print("--------------------------------------------------")

    all_subdirs = glob.glob(os.path.join(base_path, '*/'))
    
    projects_to_upload = []
    print(">>> í”„ë¡œì íŠ¸ í´ë”ë¥¼ ê²€ìƒ‰í•˜ê³  íƒ€ì…ì„ ë¶„ì„í•©ë‹ˆë‹¤...")
    for subdir_path in all_subdirs:
        dir_name = os.path.basename(os.path.normpath(subdir_path))
        if not (dir_name and dir_name[0].isalpha()):
            print(f"-[SKIP] '{dir_name}': ì•ŒíŒŒë²³ìœ¼ë¡œ ì‹œì‘í•˜ì§€ ì•ŠìŒ")
            continue
        project_type = detect_project_type(subdir_path)
        if project_type:
            print(f"+[OK] '{dir_name}': {project_type.capitalize()} í”„ë¡œì íŠ¸ë¡œ ê°ì§€ë¨")
            projects_to_upload.append({'path': subdir_path, 'type': project_type, 'name': dir_name})
        else:
            print(f"-[SKIP] '{dir_name}': ì§€ì›í•˜ëŠ” í”„ë¡œì íŠ¸ íƒ€ì…ì´ ì•„ë‹˜")

    if not projects_to_upload:
        print("\nğŸ¤” ì¡°ê±´ì— ë§ëŠ” í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        return

    original_directory = os.getcwd()
    print("\n>>> GitHub ì—…ë¡œë“œ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤...")
    print("--------------------------------------------------")

    PREFIXES = {"react": "react-", "flask": "flask-", "streamlit": "streamlit-"}
    size_limit_bytes = SIZE_LIMIT_MB * 1024 * 1024

    for project in projects_to_upload:
        project_dir = project['path']
        project_name = project['name']
        project_type = project['type']
        
        prefix = PREFIXES.get(project_type, "unknown-")
        repo_name = f"{prefix}{project_name}"

        print(f">>> [ì‹œì‘] í”„ë¡œì íŠ¸: {project_name} (íƒ€ì…: {project_type})")

        try:
            os.chdir(project_dir)

            if os.path.isdir(".git"):
                print("--- ğŸ’¡ ì´ë¯¸ Git ì €ì¥ì†Œì…ë‹ˆë‹¤. ê±´ë„ˆëœë‹ˆë‹¤.")
                print("--------------------------------------------------")
                continue
            
            print("--- Git safe.directoryì— í˜„ì¬ í´ë”ë¥¼ ì¶”ê°€í•˜ì—¬ ì†Œìœ ê¶Œ ë¬¸ì œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤...")
            safe_dir_path = os.path.normpath(project_dir)
            run_command(['git', 'config', '--global', '--add', 'safe.directory', safe_dir_path])

            print(f"--- GitHubì— '{repo_name}' ë¹„ê³µê°œ ì €ì¥ì†Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤...")
            gh_command = ["gh", "repo", "create", repo_name, VISIBILITY, "--description", f"Automated initial push for {project_name}"]
            run_command(gh_command)

            print("--- ë¡œì»¬ Git ì €ì¥ì†Œë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤...")
            run_command(["git", "init", "-b", "main"])

            remote_url = f"https://github.com/{GITHUB_USER}/{repo_name}.git"
            run_command(["git", "remote", "add", "origin", remote_url])
            
            print("--- ëª¨ë“  íŒŒì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤...")
            run_command(["git", "add", "."])
            
            # âœ¨ --- ì¶”ê°€ë  íŒŒì¼ ì´ ìš©ëŸ‰ í™•ì¸ ë¡œì§ ---
            print("--- ìŠ¤í…Œì´ì§•ëœ íŒŒì¼ì˜ ì´ ìš©ëŸ‰ì„ í™•ì¸í•©ë‹ˆë‹¤...")
            staged_files_process = subprocess.run(['git', 'diff', '--cached', '--name-status'], capture_output=True, text=True)
            total_size = 0
            if staged_files_process.stdout:
                for line in staged_files_process.stdout.strip().split('\n'):
                    try:
                        status, file_path = line.split('\t')
                        if status.strip() in ['A', 'M'] and os.path.exists(file_path):
                            total_size += os.path.getsize(file_path)
                    except (ValueError, FileNotFoundError):
                        continue # íŒŒì¼ ì´ë¦„ì— íƒ­ì´ ìˆê±°ë‚˜, race conditionìœ¼ë¡œ íŒŒì¼ì´ ì‚¬ë¼ì§„ ê²½ìš° ë¬´ì‹œ
            
            total_size_mb = total_size / (1024 * 1024)
            print(f"--- ì´ ìš©ëŸ‰: {total_size_mb:.2f} MB / {SIZE_LIMIT_MB} MB")
            
            if total_size > size_limit_bytes:
                print(f"--- âŒ ìš©ëŸ‰ ì´ˆê³¼: ì´ í”„ë¡œì íŠ¸ë¥¼ ê±´ë„ˆë›°ê³  ìŠ¤í…Œì´ì§•ëœ íŒŒì¼ë“¤ì„ ì›ìƒ ë³µêµ¬í•©ë‹ˆë‹¤.")
                run_command(['git', 'reset'])
                print("--------------------------------------------------")
                continue
            # ------------------------------------

            sanitized_original_path = sanitize_path(project_dir)
            commit_message = f"feat: Initial commit from {sanitized_original_path}"
            
            print("--- ì²« ì»¤ë°‹ì„ ìƒì„±í•©ë‹ˆë‹¤...")
            status_result = subprocess.run(["git", "status", "--porcelain"], capture_output=True, text=True)
            if status_result.stdout:
                run_command(["git", "commit", "-m", commit_message])
            else:
                print("--- ğŸ˜® ì»¤ë°‹í•  ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤. ë¹ˆ ì»¤ë°‹ì„ ìƒì„±í•©ë‹ˆë‹¤.")
                run_command(["git", "commit", "--allow-empty", "-m", commit_message])

            print("--- GitHub ì €ì¥ì†Œë¡œ í‘¸ì‹œí•©ë‹ˆë‹¤...")
            run_command(["git", "push", "-u", "origin", "main"])
            print(f"<<< [ì™„ë£Œ] í”„ë¡œì íŠ¸: {project_name}")

        finally:
            os.chdir(original_directory)
            print("--------------------------------------------------")

    print("ğŸ‰ ëª¨ë“  ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")

if __name__ == "__main__":
    main()
## âœ¨ ì£¼ìš” ë³€ê²½ ì‚¬í•­
SIZE_LIMIT_MB ì„¤ì • ì¶”ê°€: ìŠ¤í¬ë¦½íŠ¸ ìƒë‹¨ì— SIZE_LIMIT_MB = 90 ë³€ìˆ˜ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ì´ì œ ì´ ìˆ«ìë§Œ ë°”ê¾¸ë©´ ìš©ëŸ‰ ì œí•œì„ ì‰½ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìš©ëŸ‰ í™•ì¸ ë¡œì§ ì¶”ê°€: git add . ëª…ë ¹ì´ ì‹¤í–‰ëœ ì§í›„, ì»¤ë°‹í•˜ê¸° ì „ì— ë‹¤ìŒ ë¡œì§ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.

git diff --cached --name-status ëª…ë ¹ìœ¼ë¡œ ìŠ¤í…Œì´ì§•(staging) ì˜ì—­ì— ì¶”ê°€ëœ ëª¨ë“  íŒŒì¼ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

Pythonì˜ os.path.getsizeë¥¼ ì´ìš©í•´ ê° íŒŒì¼ì˜ ìš©ëŸ‰ì„ ë”í•˜ì—¬ ì´í•©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

ê³„ì‚°ëœ ì´ìš©ëŸ‰ì´ SIZE_LIMIT_MBë¥¼ ì´ˆê³¼í•˜ë©´, ê²½ê³  ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³  git reset ëª…ë ¹ìœ¼ë¡œ ìŠ¤í…Œì´ì§•ì„ ì·¨ì†Œí•œ ë’¤, í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ë‚˜ë¨¸ì§€ ê³¼ì •ì„ ê±´ë„ˆë›°ê³  ë‹¤ìŒ í”„ë¡œì íŠ¸ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.