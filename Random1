using System;
using System.Drawing;
using System.IO;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using DevExpress.XtraEditors;

public partial class MainForm : Form
{
    // 나머지 필드와 코드는 이전 코드와 동일하므로 생략합니다.

    private bool _locked = false;  // 윈도우가 잠겨 있는지 여부를 나타내는 플래그

    private void LockOrUnlockControls(bool locked)
    {
        _locked = locked;
    }

    private void btnLock_Click(object sender, EventArgs e)
    {
        if (btnLock.Text == "Lock")
        {
            btnLock.Text = "Unlock";
            LockOrUnlockControls(true);  // 모든 컨트롤을 비활성화합니다.
        }
        else
        {
            btnLock.Text = "Lock";
            LockOrUnlockControls(false);  // 모든 컨트롤을 활성화합니다.
        }
    }

    protected override void WndProc(ref Message m)
    {
        const int WM_MOUSEFIRST = 0x200;
        const int WM_MOUSELAST = 0x20A;

        // 마우스 이벤트를 확인합니다. 
        if (_locked && m.Msg >= WM_MOUSEFIRST && m.Msg <= WM_MOUSELAST)
        {
            // 잠금 상태에서는 모든 마우스 이벤트를 무시합니다.
            // 이것은 버튼 클릭 등의 이벤트도 무시하게 됩니다.
            return;
        }

        base.WndProc(ref m);  // 잠금 상태가 아니면 마우스 이벤트를 정상적으로 처리합니다.
    }
}
