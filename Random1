ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„¸í•˜ê²Œ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ ê°œìš”
**ê°€ìƒì˜ íšŒì‚¬ 'ì•ŒíŒŒ í”„ë¡œì íŠ¸'**ê°€ 3ê°œì˜ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ì—¬ ë°°í¬í•˜ëŠ” ìƒí™©ì„ ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.

ë©”ì¸ ì„œë¹„ìŠ¤ (React + Flask)

í”„ë¡ íŠ¸ì—”ë“œ: app.your_domain.com (React)

ë°±ì—”ë“œ API: api.your_domain.com (Flask)

ë°ì´í„° ëŒ€ì‹œë³´ë“œ (Streamlit)

ë‚´ë¶€ ë°ì´í„° ë¶„ì„ìš©: dashboard.your_domain.com

ë…ë¦½ ì„œë¹„ìŠ¤ (Flask)

ê°„ë‹¨í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤: service.your_domain.com

ì´ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ìš°ë¶„íˆ¬ ì„œë²„ì—ì„œ Nginxë¥¼ **ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ(Reverse Proxy)**ë¡œ ì‚¬ìš©í•˜ì—¬ ë°°í¬í•˜ëŠ” ì „ì²´ ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.

ğŸ‘‘ 1ë‹¨ê³„: ì‚¬ì „ ì¤€ë¹„ ë° ê¸°ë³¸ ì„¤ì¹˜
ì„œë²„ì— ì²˜ìŒ ì ‘ì†í•´ì„œ ê¸°ë³¸ì ì¸ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  ë°©í™”ë²½ì„ ì„¤ì •í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

1. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
Bash

# íŒ¨í‚¤ì§€ ëª©ë¡ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# Nginx, Python, ê°€ìƒí™˜ê²½ ë„êµ¬ ì„¤ì¹˜
sudo apt install -y nginx python3-pip python3-venv

# Node.js ë° npm ì„¤ì¹˜ (React ë¹Œë“œë¥¼ ìœ„í•¨)
sudo apt install -y nodejs npm
2. ë°©í™”ë²½ ì„¤ì •
Nginxê°€ ì™¸ë¶€ ì ‘ì†ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë°©í™”ë²½ì„ ì„¤ì •í•©ë‹ˆë‹¤.

Bash

# Nginx Full í”„ë¡œí•„ í—ˆìš© (HTTP: 80, HTTPS: 443 í¬íŠ¸)
sudo ufw allow 'Nginx Full'

# ë°©í™”ë²½ í™œì„±í™”
sudo ufw enable

# ìƒíƒœ í™•ì¸
sudo ufw status
ğŸ—ï¸ 2ë‹¨ê³„: í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„± ë° ì•± ì¤€ë¹„
ì´ì œ ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„œë²„ì— ì¤€ë¹„ì‹œí‚¤ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ì›¹ í”„ë¡œì íŠ¸ëŠ” ë³´í†µ /var/www ê²½ë¡œì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.

1. í”„ë¡œì íŠ¸ ë””ë ‰í„°ë¦¬ ìƒì„±
Bash

# ì „ì²´ í”„ë¡œì íŠ¸ë¥¼ ë‹´ì„ ìµœìƒìœ„ ë””ë ‰í„°ë¦¬
sudo mkdir -p /var/www/alpha-project

# ê° ì•±ì˜ ë””ë ‰í„°ë¦¬ ìƒì„±
sudo mkdir /var/www/alpha-project/react-app
sudo mkdir /var/www/alpha-project/flask-api
sudo mkdir /var/www/alpha-project/streamlit-dashboard
sudo mkdir /var/www/alpha-project/flask-service

# ì‘ì—… í¸ì˜ë¥¼ ìœ„í•´ ì†Œìœ ê¶Œ ë³€ê²½ (myuserëŠ” ì‹¤ì œ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ë³€ê²½)
sudo chown -R $USER:$USER /var/www/alpha-project
2. ê° ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„± (ê°„ë‹¨í•œ ì˜ˆì œ)
A. React í”„ë¡ íŠ¸ì—”ë“œ (app.your_domain.com)

Bash

# React ì•± ìƒì„± (ì‹œê°„ì´ ì¢€ ê±¸ë¦½ë‹ˆë‹¤)
npx create-react-app /var/www/alpha-project/react-app

# ìƒì„±ëœ ì•± ë””ë ‰í„°ë¦¬ë¡œ ì´ë™
cd /var/www/alpha-project/react-app

# API ìš”ì²­ ì£¼ì†Œ ìˆ˜ì • (api.your_domain.comì„ ë°”ë¼ë³´ë„ë¡)
# src/App.js íŒŒì¼ì„ ì—´ì–´ì„œ fetch ì£¼ì†Œë¥¼ ìˆ˜ì •í–ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.

# í”„ë¡œë•ì…˜ìš©ìœ¼ë¡œ ë¹Œë“œ
npm run build
build ëª…ë ¹ì–´ê°€ ëë‚˜ë©´ /var/www/alpha-project/react-app/build ë””ë ‰í„°ë¦¬ì— ì •ì  íŒŒì¼ë“¤ì´ ìƒì„±ë©ë‹ˆë‹¤. NginxëŠ” ì´ ë””ë ‰í„°ë¦¬ë¥¼ ì„œë¹™í•˜ê²Œ ë©ë‹ˆë‹¤.

B. Flask API (api.your_domain.com)

Bash

cd /var/www/alpha-project/flask-api

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python3 -m venv venv
source venv/bin/activate

# Gunicornê³¼ Flask ì„¤ì¹˜ (Gunicornì€ í”„ë¡œë•ì…˜ìš© WSGI ì„œë²„)
pip install gunicorn flask

# ê°„ë‹¨í•œ API ì½”ë“œ ì‘ì„± (app.py)
cat <<EOF > app.py
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/data')
def get_data():
    return jsonify({'message': 'Hello from Flask API!'})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5001)
EOF

# ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
deactivate
ì´ ì•±ì€ ë‚´ë¶€ì ìœ¼ë¡œ 5001 í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

C. Streamlit ëŒ€ì‹œë³´ë“œ (dashboard.your_domain.com)

Bash

cd /var/www/alpha-project/streamlit-dashboard

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python3 -m venv venv
source venv/bin/activate

# Streamlit ì„¤ì¹˜
pip install streamlit

# ê°„ë‹¨í•œ ëŒ€ì‹œë³´ë“œ ì½”ë“œ ì‘ì„± (app.py)
cat <<EOF > app.py
import streamlit as st
st.title('ì•ŒíŒŒ í”„ë¡œì íŠ¸ ë°ì´í„° ëŒ€ì‹œë³´ë“œ')
st.write('Nginxë¥¼ í†µí•´ ì„œë¹„ìŠ¤ë˜ê³  ìˆìŠµë‹ˆë‹¤.')
st.slider('í…ŒìŠ¤íŠ¸ ìŠ¬ë¼ì´ë”', 0, 100, 50)
EOF

# ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
deactivate
Streamlitì€ ê¸°ë³¸ì ìœ¼ë¡œ 8501 í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

D. Flask ë…ë¦½ ì„œë¹„ìŠ¤ (service.your_domain.com)

Bash

cd /var/www/alpha-project/flask-service

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python3 -m venv venv
source venv/bin/activate

# Gunicornê³¼ Flask ì„¤ì¹˜
pip install gunicorn flask

# ê°„ë‹¨í•œ ì›¹í˜ì´ì§€ ì½”ë“œ ì‘ì„± (app.py)
cat <<EOF > app.py
from flask import Flask

app = Flask(__name__)

@app.route('/')
def home():
    return "<h1>ì•ŒíŒŒ í”„ë¡œì íŠ¸ì˜ ë…ë¦½ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.</h1>"

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
EOF

# ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
deactivate
ì´ ì•±ì€ ë‚´ë¶€ì ìœ¼ë¡œ 5000 í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

âš™ï¸ 3ë‹¨ê³„: ì•±ì„ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ (Systemd)
ì•±ë“¤ì´ ì„œë²„ ì¬ë¶€íŒ… ì‹œì—ë„ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ systemd ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ì´ëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì˜ í•„ìˆ˜ ê³¼ì •ì…ë‹ˆë‹¤.

1. ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„± (3ê°œì˜ Python ì•±)
A. Flask API ì„œë¹„ìŠ¤ (flask-api.service)

Bash

sudo nano /etc/systemd/system/flask-api.service
Ini, TOML

[Unit]
Description=Gunicorn instance for Flask API
After=network.target

[Service]
User=myuser # ì‹¤ì œ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ë³€ê²½
Group=www-data
WorkingDirectory=/var/www/alpha-project/flask-api
ExecStart=/var/www/alpha-project/flask-api/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:5001 app:app

[Install]
WantedBy=multi-user.target
B. Streamlit ëŒ€ì‹œë³´ë“œ ì„œë¹„ìŠ¤ (streamlit-dashboard.service)

Bash

sudo nano /etc/systemd/system/streamlit-dashboard.service
Ini, TOML

[Unit]
Description=Streamlit instance for Dashboard
After=network.target

[Service]
User=myuser # ì‹¤ì œ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ë³€ê²½
Group=www-data
WorkingDirectory=/var/www/alpha-project/streamlit-dashboard
ExecStart=/var/www/alpha-project/streamlit-dashboard/venv/bin/streamlit run app.py --server.port 8501 --server.headless true

[Install]
WantedBy=multi-user.target
C. Flask ë…ë¦½ ì„œë¹„ìŠ¤ (flask-service.service)

Bash

sudo nano /etc/systemd/system/flask-service.service
Ini, TOML

[Unit]
Description=Gunicorn instance for Flask Service
After=network.target

[Service]
User=myuser # ì‹¤ì œ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ë³€ê²½
Group=www-data
WorkingDirectory=/var/www/alpha-project/flask-service
ExecStart=/var/www/alpha-project/flask-service/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:5000 app:app

[Install]
WantedBy=multi-user.target
2. ì„œë¹„ìŠ¤ ì‹œì‘ ë° í™œì„±í™”
Bash

# systemd ë°ëª¬ ë¦¬ë¡œë“œ
sudo systemctl daemon-reload

# ê° ì„œë¹„ìŠ¤ ì‹œì‘
sudo systemctl start flask-api
sudo systemctl start streamlit-dashboard
sudo systemctl start flask-service

# ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰ë˜ë„ë¡ í™œì„±í™”
sudo systemctl enable flask-api
sudo systemctl enable streamlit-dashboard
sudo systemctl enable flask-service

# ìƒíƒœ í™•ì¸ (ëª¨ë‘ active (running) ìƒíƒœì¸ì§€ í™•ì¸)
sudo systemctl status flask-api streamlit-dashboard flask-service
ğŸŒ 4ë‹¨ê³„: Nginx ì„¤ì • (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ)
ì´ì œ Nginxê°€ ê° ë„ë©”ì¸ ìš”ì²­ì„ ì˜¬ë°”ë¥¸ ë‚´ë¶€ í¬íŠ¸ë¡œ ì „ë‹¬í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

1. ê¸°ì¡´ ê¸°ë³¸ ì„¤ì • ì œê±°
Bash

# ê¸°ë³¸ í™œì„±í™” ë§í¬ ì œê±°
sudo rm /etc/nginx/sites-enabled/default
2. ê° ì‚¬ì´íŠ¸ë³„ ì„¤ì • íŒŒì¼ ìƒì„±
A. React ì•± (app.your_domain.com.conf)

Bash

sudo nano /etc/nginx/sites-available/app.your_domain.com.conf
Nginx

server {
    listen 80;
    server_name app.your_domain.com;

    root /var/www/alpha-project/react-app/build;
    index index.html;

    location / {
        try_files $uri /index.html;
    }
}
B. Flask API (api.your_domain.com.conf)

Bash

sudo nano /etc/nginx/sites-available/api.your_domain.com.conf
Nginx

server {
    listen 80;
    server_name api.your_domain.com;

    location / {
        proxy_pass http://127.0.0.1:5001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
C. Streamlit ëŒ€ì‹œë³´ë“œ (dashboard.your_domain.com.conf)

Bash

sudo nano /etc/nginx/sites-available/dashboard.your_domain.com.conf
Nginx

server {
    listen 80;
    server_name dashboard.your_domain.com;

    location / {
        proxy_pass http://127.0.0.1:8501;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
D. Flask ì„œë¹„ìŠ¤ (service.your_domain.com.conf)

Bash

sudo nano /etc/nginx/sites-available/service.your_domain.com.conf
Nginx

server {
    listen 80;
    server_name service.your_domain.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
3. ì„¤ì • íŒŒì¼ í™œì„±í™” ë° Nginx ì¬ì‹œì‘
Bash

# sites-enabledì— ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±
sudo ln -s /etc/nginx/sites-available/app.your_domain.com.conf /etc/nginx/sites-enabled/
sudo ln -s /etc/nginx/sites-available/api.your_domain.com.conf /etc/nginx/sites-enabled/
sudo ln -s /etc/nginx/sites-available/dashboard.your_domain.com.conf /etc/nginx/sites-enabled/
sudo ln -s /etc/nginx/sites-available/service.your_domain.com.conf /etc/nginx/sites-enabled/

# Nginx ì„¤ì • ë¬¸ë²• í…ŒìŠ¤íŠ¸
sudo nginx -t

# í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì •ìƒì´ë©´ Nginx ì¬ì‹œì‘
sudo systemctl restart nginx
âœ… 5ë‹¨ê³„: ìµœì¢… í™•ì¸
ì´ì œ ëª¨ë“  ì„¤ì •ì´ ëë‚¬ìŠµë‹ˆë‹¤. ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  ê° ì£¼ì†Œë¡œ ì ‘ì†í•˜ì—¬ ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

http://app.your_domain.com -> React ì•± í™”ë©´

http://api.your_domain.com/data -> Flask APIì˜ JSON ì‘ë‹µ

http://dashboard.your_domain.com -> Streamlit ëŒ€ì‹œë³´ë“œ

http://service.your_domain.com -> Flask ì„œë¹„ìŠ¤ì˜ HTML ë©”ì‹œì§€

ì¶”ê°€ ê¶Œì¥ ì‚¬í•­: ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë³´ì•ˆì„ ìœ„í•´ Let's Encryptë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬´ë£Œë¡œ HTTPSë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. certbotì„ ì„¤ì¹˜í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
sudo apt install certbot python3-certbot-nginx ì„¤ì¹˜ í›„ sudo certbot --nginx ëª…ë ¹ì–´ë¡œ ì‰½ê²Œ HTTPSë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.






Deep Research
