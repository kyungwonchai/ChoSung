는 요구사항에 따라 수정된 코드입니다. 주요 변경 사항은 다음과 같습니다:

5가닥의 선(Line Chart): 상세 차트에 MP1~MP5 데이터를 각각의 선으로 표시.
막대 선택 시 LineName 가져오기: MainChart에서 막대를 클릭했을 때 LineName을 가져오는 로직 추가.
경계선 색상 변경: Line Chart에 SegmentColorizer를 적용하여 경계 조건에 따라 색상을 변경할 수 있도록 구현.
XAML (MainWindow.xaml)
xml
코드 복사
<Window x:Class="RouterAlaskaResultViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
        Title="Router Alaska Result Viewer" Height="600" Width="900">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="2*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Main Chart: 라인별 표준편차 -->
        <dxc:ChartControl Grid.Row="0" x:Name="MainChart" MouseUp="MainChart_MouseUp">
            <dxc:ChartControl.Diagram>
                <dxc:XYDiagram2D>
                    <!-- X축 설정 -->
                    <dxc:XYDiagram2D.AxisX>
                        <dxc:AxisX2D>
                            <dxc:AxisX2D.Title>
                                <dxc:AxisTitle Content="Line Name" Visibility="Visible" Alignment="Center" />
                            </dxc:AxisX2D.Title>
                        </dxc:AxisX2D>
                    </dxc:XYDiagram2D.AxisX>

                    <!-- Y축 설정 -->
                    <dxc:XYDiagram2D.AxisY>
                        <dxc:AxisY2D>
                            <dxc:AxisY2D.Title>
                                <dxc:AxisTitle Content="Standard Deviation" Visibility="Visible" Alignment="Center" />
                            </dxc:AxisY2D.Title>
                        </dxc:AxisY2D>
                    </dxc:XYDiagram2D.AxisY>

                    <!-- Series -->
                    <dxc:BarSideBySideSeries2D DisplayName="Standard Deviation"
                                               DataSource="{Binding MainChartData}"
                                               ArgumentDataMember="LineName"
                                               ValueDataMember="StdDev">
                    </dxc:BarSideBySideSeries2D>
                </dxc:XYDiagram2D>
            </dxc:ChartControl.Diagram>
        </dxc:ChartControl>

        <!-- Detail Chart: 모델별 MP1~N 차트 -->
        <dxc:ChartControl Grid.Row="1" x:Name="DetailChart">
            <dxc:ChartControl.Diagram>
                <dxc:XYDiagram2D>
                    <!-- X축 설정 -->
                    <dxc:XYDiagram2D.AxisX>
                        <dxc:AxisX2D>
                            <dxc:AxisX2D.Title>
                                <dxc:AxisTitle Content="Timestamp" Visibility="Visible" Alignment="Center" />
                            </dxc:AxisX2D.Title>
                        </dxc:AxisX2D>
                    </dxc:XYDiagram2D.AxisX>

                    <!-- Y축 설정 -->
                    <dxc:XYDiagram2D.AxisY>
                        <dxc:AxisY2D>
                            <dxc:AxisY2D.Title>
                                <dxc:AxisTitle Content="MP Data" Visibility="Visible" Alignment="Center" />
                            </dxc:AxisY2D.Title>
                        </dxc:AxisY2D>

                    <!-- Series -->
                    <dxc:LineSeries2D DisplayName="MP1" DataSource="{Binding DetailChartData}" ArgumentDataMember="Timestamp" ValueDataMember="MP1">
                        <dxc:LineSeries2D.SegmentColorizer>
                            <dxc:RangeSegmentColorizer RangeMax="Threshold" Color="Red" />
                        </dxc:LineSeries2D.SegmentColorizer>
                    </dxc:LineSeries2D>
                    <dxc:LineSeries2D DisplayName="MP2" DataSource="{Binding DetailChartData}" ArgumentDataMember="Timestamp" ValueDataMember="MP2" />
                    <dxc:LineSeries2D DisplayName="MP3" DataSource="{Binding DetailChartData}" ArgumentDataMember="Timestamp" ValueDataMember="MP3" />
                    <dxc:LineSeries2D DisplayName="MP4" DataSource="{Binding DetailChartData}" ArgumentDataMember="Timestamp" ValueDataMember="MP4" />
                    <dxc:LineSeries2D DisplayName="MP5" DataSource="{Binding DetailChartData}" ArgumentDataMember="Timestamp" ValueDataMember="MP5" />
                </dxc:XYDiagram2D>
            </dxc:ChartControl.Diagram>
        </dxc:ChartControl>
    </Grid>
</Window>
C# (MainWindow.xaml.cs)
csharp
코드 복사
using System;
using System.Collections.ObjectModel;
using System.Data.SqlClient;
using System.Linq;
using System.Windows;
using System.Windows.Input;

namespace RouterAlaskaResultViewer
{
    public partial class MainWindow : Window
    {
        public ObservableCollection<LineData> MainChartData { get; set; } = new ObservableCollection<LineData>();
        public ObservableCollection<DetailData> DetailChartData { get; set; } = new ObservableCollection<DetailData>();

        public double Threshold { get; set; } = 50.0; // 경계 값 설정 (사용자가 변경 가능)

        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
            LoadMainChartData();
        }

        private void LoadMainChartData()
        {
            try
            {
                var connectionString = "YourConnectionString";
                using (var connection = new SqlConnection(connectionString))
                {
                    connection.Open();
                    var query = @"SELECT LineName, MP1DATA, MP2DATA, MP3DATA, MP4DATA, MP5DATA
                                  FROM YourTable WHERE LineName IS NOT NULL";

                    using (var command = new SqlCommand(query, connection))
                    using (var reader = command.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            var lineName = reader.GetString(0);
                            var mpData = new[]
                            {
                                reader.GetDouble(1),
                                reader.GetDouble(2),
                                reader.GetDouble(3),
                                reader.GetDouble(4),
                                reader.GetDouble(5)
                            };

                            var stdDev = CalculateStandardDeviation(mpData);
                            MainChartData.Add(new LineData { LineName = lineName, StdDev = stdDev });
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Error: {ex.Message}");
            }
        }

        private void MainChart_MouseUp(object sender, MouseButtonEventArgs e)
        {
            var hitInfo = MainChart.Diagram.CalcHitInfo(e.GetPosition(MainChart));
            if (hitInfo.SeriesPoint != null)
            {
                var selectedLineName = hitInfo.SeriesPoint.Argument.ToString();
                LoadDetailChartData(selectedLineName);
            }
        }

        private void LoadDetailChartData(string lineName)
        {
            try
            {
                DetailChartData.Clear();
                var connectionString = "YourConnectionString";
                using (var connection = new SqlConnection(connectionString))
                {
                    connection.Open();
                    var query = @"SELECT Timestamp, MP1DATA, MP2DATA, MP3DATA, MP4DATA, MP5DATA
                                  FROM YourTable
                                  WHERE LineName = @lineName
                                  ORDER BY Timestamp DESC";

                    using (var command = new SqlCommand(query, connection))
                    {
                        command.Parameters.AddWithValue("@lineName", lineName);

                        using (var reader = command.ExecuteReader())
                        {
                            while (reader.Read())
                            {
                                DetailChartData.Add(new DetailData
                                {
                                    Timestamp = reader.GetDateTime(0),
                                    MP1 = reader.GetDouble(1),
                                    MP2 = reader.GetDouble(2),
                                    MP3 = reader.GetDouble(3),
                                    MP4 = reader.GetDouble(4),
                                    MP5 = reader.GetDouble(5),
                                });
                            }
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"Error: {ex.Message}");
            }
        }

        private double CalculateStandardDeviation(double[] values)
        {
            if (values.Length == 0) return 0;

            var mean = values.Average();
            var variance = values.Select(v => Math.Pow(v - mean, 2)).Average();
            return Math.Sqrt(variance);
        }
    }

    public class LineData
    {
        public string LineName { get; set; }
        public double StdDev { get; set; }
    }

    public class DetailData
    {
        public DateTime Timestamp { get; set; }
        public double MP1 { get; set; }
        public double MP2 { get; set; }
        public double MP3 { get; set; }
        public double MP4 { get; set; }
        public double MP5 { get; set; }
    }
}
주요 변경 사항
LineSeries2D를 5개 추가하여 MP1~MP5 각각을 선으로 표시.
SegmentColorizer를 사용하여 경계 값을 기준으로 색상을 변경.
MainChart_MouseUp에서 막대를 클릭했을 때 LineName을 가져오도록 수정.