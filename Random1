import os
import re
import time

def search_folders(root_dir, folder_pattern):
    # 시작 시간 측정
    start_time = time.time()

    # 정규 표현식 패턴 컴파일
    pattern = re.compile(folder_pattern, re.IGNORECASE)
    matched_paths = []

    try:
        # os.walk()로 디렉토리 탐색
        for root, dirs, files in os.walk(root_dir):
            # 검색 중인 폴더 경로 출력 (확인용)
            print(f"검색 중: {root}")
            
            for dir_name in dirs:
                full_path = os.path.join(root, dir_name)
                print(f"폴더 확인: {full_path}")  # 확인용으로 모든 폴더 출력

                # 패턴에 맞는 폴더 찾기
                if pattern.search(dir_name):
                    matched_paths.append(full_path)
                    print(f"[발견] {full_path}")  # 찾은 폴더 출력
    except Exception as e:
        print(f"오류 발생: {e}")

    # 종료 시간 측정
    end_time = time.time()
    elapsed_time = end_time - start_time

    # 결과 출력
    print(f"\n검색 완료! ({elapsed_time:.2f} 초 소요)")
    print("검색된 폴더 경로 목록:")
    for path in matched_paths:
        print(path)

    return matched_paths


# 사용 예시
root_directory = r"\\ServerName\SharedFolder"  # 네트워크 공유 폴더 경로 (UNC 형식으로 지정)
folder_name_pattern = r"PGM\s*공용\s*사용"
