using System;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Controls;

namespace YourNamespace
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            // 변수 ab에 텍스트 값을 설정
            string ab = "이미지 위에 표시될 텍스트";

            // 이미지 로드 (솔루션 폴더의 Images/1.jpg 사용)
            ImageSource imageSource = new BitmapImage(new Uri("pack://application:,,,/Images/1.jpg"));

            // DrawingVisual을 사용하여 이미지를 기반으로 텍스트를 그리기
            DrawingVisual visual = new DrawingVisual();
            using (DrawingContext context = visual.RenderOpen())
            {
                // 이미지 배경 그리기
                context.DrawImage(imageSource, new Rect(0, 0, 500, 500)); // 이미지 크기를 적절히 설정

                // 텍스트 그리기
                FormattedText text = new FormattedText(
                    ab,
                    System.Globalization.CultureInfo.InvariantCulture,
                    FlowDirection.LeftToRight,
                    new Typeface("Arial"),
                    40, // 텍스트 크기
                    Brushes.White // 텍스트 색상
                );

                // 텍스트를 이미지 위에 그리기 (이미지 중앙에 텍스트 배치)
                context.DrawText(text, new Point(100, 100)); // 텍스트 위치 조정
            }

            // RenderTargetBitmap으로 DrawingVisual을 렌더링하여 이미지로 변환
            RenderTargetBitmap renderBitmap = new RenderTargetBitmap(500, 500, 96, 96, PixelFormats.Pbgra32);
            renderBitmap.Render(visual);

            // ImageBrush로 변환하여 배경에 설정
            ImageBrush imageBrush = new ImageBrush(renderBitmap);
            this.Background = imageBrush;
        }
    }