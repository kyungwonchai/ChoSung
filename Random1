윈도우에서 가상환경(venv 또는 conda 등)으로 진입해서 jupyter notebook을 실행했는데도, 주피터 노트북 내부에서는 시스템 파이썬(바깥환경)으로 동작하는 경우가 흔히 발생합니다.
이는 **주피터 커널이 “시스템 파이썬”**을 참조하기 때문입니다.
즉, 가상환경에서 실행한 주피터가 꼭 그 가상환경의 커널을 쓰는 것은 아니다 라는 점이 핵심입니다.

아래 순서대로 진행하시면, 주피터 노트북이 확실히 가상환경 파이썬을 사용하게 할 수 있습니다.

1. 가상환경에 jupyter와 ipykernel을 설치
가상환경을 활성화한 동일 CMD(or PowerShell)에서 아래를 실행합니다.

(1) 가상환경 활성화
bash
코드 복사
# 예시: venv 방식이라면
path\to\venv\Scripts\activate

# 혹은 conda 환경이라면
conda activate myenv
(2) jupyter, ipykernel 설치
bash
코드 복사
pip install jupyter ipykernel
jupyter가 가상환경 안에 설치되어 있어야, 가상환경 파이썬으로 jupyter를 실행하게 됩니다.
(3) jupyter 커널 생성
bash
코드 복사
python -m ipykernel install --user --name myenv --display-name "MyEnv (CUDA)"
이렇게 하면 주피터 노트북에서 “MyEnv (CUDA)” 라는 이름의 커널을 선택할 수 있게 됩니다.
2. jupyter notebook 실행 후, 커널 확인
가상환경에서 계속 작업 중인 동일 CMD에서:

bash
코드 복사
jupyter notebook
주피터가 열리면,

오른쪽 상단 또는 메뉴에서 “Kernel” 항목을 클릭 (Jupyter Notebook or JupyterLab 기준)
Change Kernel (또는 Select Kernel) 선택
“MyEnv (CUDA)”(위에서 만든 커널 이름)으로 변경
이제 노트북 셀에서 다음 코드를 실행해보세요:

python
코드 복사
import sys
import torch

print("파이썬 경로:", sys.executable)
print("PyTorch 버전:", torch.__version__)
print("CUDA 버전:", torch.version.cuda)
print("CUDA 사용 가능?:", torch.cuda.is_available())
출력되는 파이썬 경로가 가상환경 폴더(예: C:\...\venv\Scripts\python.exe)를 가리켜야 정상입니다.
torch.version.cuda가 None이 아니라 12.4(혹은 cu124)라면, 가상환경 PyTorch(CUDA 버전)를 쓰는 것입니다.
torch.cuda.is_available()가 True면 GPU 인식 성공입니다.
3. 그래도 안 되면 추가로 확인할 사항
jupyter가 여전히 바깥 파이썬으로 실행되는지

which jupyter (Windows는 where jupyter) 명령어를 쳐서, 경로가 가상환경 내부를 가리키는지 확인.
예: C:\...\venv\Scripts\jupyter.exe 식이어야 합니다.
만약 C:\Users\... \Python\Python39\Scripts\jupyter.exe처럼 나오면, 시스템 파이썬 jupyter를 쓰고 있는 것입니다.
이때는 가상환경 Python으로 jupyter를 실행해야 합니다:
bash
코드 복사
# venv 상황
path\to\venv\Scripts\activate
python -m jupyter notebook
혹은
bash
코드 복사
jupyter notebook  # (단, venv 경로에 jupyter.exe가 잡혀있어야 함)
커널이 잘 안 바뀐다면

노트북 상단에서 Kernel → “MyEnv (CUDA)”로 바꾸고, 꼭 Restart Kernel 해야 반영됩니다.
JupyterLab 기준: 왼쪽 상단에 커널 표시가 있으니, 클릭 후 선택.
CUDA 12.4가 제대로 깔렸는지

터미널에서:
bash
코드 복사
nvcc --version
반드시 release 12.4가 나와야 함.
nvidia-smi는 드라이버 버전만 보여줄 뿐, 실제 툴킷 버전과 다를 수 있음.
PyTorch가 cu124 버전인지

가상환경에서:
bash
코드 복사
pip show torch
torch-2.x.x+cu124 같은 식으로 나오면 CUDA 12.4 지원 버전입니다.
+cpu면 CPU 전용 버전이라 CUDA가 무조건 None이 됩니다.
재부팅

Windows 환경변수나 DLL 캐시 문제로 안 잡힐 때, 한 번 재부팅하면 해결되는 경우도 있습니다.
4. 요약 (한 줄 결론)
“가상환경에서 jupyter notebook 실행해도, 주피터 자체는 다른 파이썬을 쓸 수 있다.”
반드시 가상환경에 jupyter/ipykernel 설치 후, 그 커널을 선택해야 합니다.