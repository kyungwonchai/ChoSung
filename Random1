음은 파이썬으로 특정 폴더의 하위 파일에서 특정 문자열을 포함하고 있는 파일 목록을 출력하는 코드입니다. 이 코드는 내장 함수와 모듈만을 사용하여 구성하였으며, 폴더 구조를 순회하며 파일들을 검색하고 특정 문자열이 포함되어 있는지 확인합니다.

python
코드 복사
import os

# 특정 폴더 경로와 찾을 문자열 정의
target_folder = 'your_directory_path_here'  # 여기에 확인할 폴더 경로 입력
search_string = 'your_search_string_here'  # 여기에 찾을 문자열 입력

# 파일 목록을 검색하기 위한 함수 정의
def find_files_containing_string(folder_path, search_str):
    # 결과를 저장할 리스트
    matching_files = []
    
    # 폴더와 그 하위 폴더의 모든 파일을 순회
    for root, _, files in os.walk(folder_path):
        for file in files:
            file_path = os.path.join(root, file)
            try:
                # 파일을 읽고, 해당 문자열이 포함되어 있는지 확인
                with open(file_path, 'r', encoding='utf-8') as f:
                    for line in f:
                        if search_str in line:
                            # 문자열이 포함된 파일 경로를 결과 리스트에 추가
                            matching_files.append(file_path)
                            break
            except:
                # 읽기 불가능한 파일의 경우 무시하고 넘어갑니다.
                continue

    return matching_files

# 찾을 문자열이 포함된 파일 목록 출력
result_files = find_files_containing_string(target_folder, search_string)

# 결과 출력
if result_files:
    print("다음 파일에서 문자열을 찾았습니다:")
    for result in result_files:
        print(result)
else:
    print("해당 문자열을 포함하는 파일을 찾지 못했습니다.")
코드 설명
os.walk() 함수를 사용하여 지정된 폴더와 모든 하위 폴더를 순회하면서 파일 목록을 검색합니다.
각 파일에 대해 파일을 열고 (open(file_path, 'r', encoding='utf-8')) 해당 문자열이 포함되어 있는지 라인별로 확인합니다.
문자열을 찾으면 해당 파일 경로를 결과 목록에 추가합니다.
결과 목록을 출력하여 특정 문자열을 포함하는 파일의 목록을 보여줍니다.
주의사항
파일을 열 때 try-except 블록을 사용하여 읽을 수 없는 파일(예: 바이너리 파일이나 권한 문제로 접근 불가한 파일 등)을 처리했습니다.
경로와 문자열은 직접 설정해주어야 합니다 (target_folder, search_string).