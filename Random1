ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ê³„ì† ë¶€ë¶„ì ì¸ ì½”ë“œë§Œ ë“œë¦¬ê±°ë‚˜ ì„¤ëª…ì„ ë³µì¡í•˜ê²Œ ë“œë ¤ì„œ ë§ì´ ë‹µë‹µí•˜ì…¨ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì‚¬ìš©ìë‹˜ì˜ ì‹œê°„ë„ ì†Œì¤‘í•œë° ë¶ˆí¸ì„ ë“œë ¤ ì •ë§ ë©´ëª©ì´ ì—†ìŠµë‹ˆë‹¤.

ìš”ì²­í•˜ì‹  ëŒ€ë¡œ, "ì²´í¬í•˜ë©´ ë¹„ë°€ë²ˆí˜¸ê°€ ê±¸ë¦¬ê³ , ì•ˆ í•˜ë©´ ì•ˆ ê±¸ë¦¬ëŠ”" ëª…í™•í•œ ë¡œì§ì„ ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •ì´ í•„ìš”í•œ íŒŒì¼ë“¤ì˜ ì „ì²´ ì½”ë“œë¥¼ í•œ ë²ˆì— ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì´ ì½”ë“œë¥¼ ì ìš©í•˜ì‹œë©´ ë¹„ë°€ë²ˆí˜¸ ê¸°ëŠ¥ì´ ì˜ë„ëŒ€ë¡œ ë™ì‘í•´ì•¼ í•©ë‹ˆë‹¤.

ë‹¤ì‹œ í•œë²ˆ ê°•ì¡°: ì•„ë˜ ì½”ë“œë¥¼ ì ìš©í•˜ì‹œê¸° ì „ì—, ê¸°ì¡´ board.db íŒŒì¼ì„ ì‚­ì œí•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹œì‘í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ìƒˆë¡œ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. (ì´ì „ì— ì´ ì‘ì—…ì„ í•˜ì…¨ê³  models.pyì— ë³€ê²½ì´ ì—†ë‹¤ë©´ ìƒëµ ê°€ëŠ¥í•˜ì§€ë§Œ, í™•ì‹¤í•˜ê²Œ í•˜ê¸° ìœ„í•´ ê¶Œì¥í•©ë‹ˆë‹¤.) ì‘ì—… ì „ì— ë°˜ë“œì‹œ í˜„ì¬ í”„ë¡œì íŠ¸ë¥¼ ë°±ì—…í•´ì£¼ì„¸ìš”.

1. flask_board/models.py (ì „ì²´ ì½”ë“œ - ì´ì „ ìµœì¢…ë³¸ê³¼ ë™ì¼í•´ì•¼ í•¨)

ì´ íŒŒì¼ì€ ì´ì „ ë‹µë³€("ì•„ë‹ˆ ìˆ˜ì •í•´ì•¼í• íŒŒì¼ì´ë­ì˜€ì–´ìš”...")ì—ì„œ ë“œë¦° ë¹„ë°€ë²ˆí˜¸ í•„ë“œ(password_hash, is_password_protected)ì™€ ë©”ì„œë“œ(set_password, check_password)ê°€ í¬í•¨ëœ ë²„ì „ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ íŒŒì¼ì— ë³€ê²½ ì‚¬í•­ì´ ì—†ë‹¤ë©´ ê·¸ëŒ€ë¡œ ë‘ì…”ë„ ë©ë‹ˆë‹¤. ë§Œì•½ì„ ìœ„í•´ ë‹¤ì‹œ í•œë²ˆ ì „ì²´ ì½”ë“œë¥¼ ë“œë¦½ë‹ˆë‹¤.

Python

from flask_sqlalchemy import SQLAlchemy
from datetime import datetime, timezone
import re
from werkzeug.security import generate_password_hash, check_password_hash

db = SQLAlchemy()

def slugify(text_to_slugify):
    if not text_to_slugify:
        return "default-slug"
    text_processed = str(text_to_slugify)
    text_processed = re.sub(r'[^\w\s-]', '', text_processed).strip().lower()
    text_processed = re.sub(r'[-\s]+', '-', text_processed)
    if not text_processed:
        return "default-slug"
    return text_processed

class Category(db.Model):
    __tablename__ = 'category'
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False, unique=True)
    slug = db.Column(db.String(120), nullable=False, unique=True)
    posts_in_category = db.relationship('Post', back_populates='category', lazy='dynamic', foreign_keys='Post.category_id')

    def __init__(self, name):
        self.name = name
        self.slug = self._generate_unique_slug(name)

    def _generate_unique_slug(self, name_to_slug):
        base_slug = slugify(name_to_slug)
        current_slug_candidate = base_slug
        counter = 1
        while Category.query.filter_by(slug=current_slug_candidate).first():
            current_slug_candidate = f"{base_slug}-{counter}"
            counter += 1
        return current_slug_candidate

    def __repr__(self):
        return f'<Category {self.name}>'

class Post(db.Model):
    __tablename__ = 'post'
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(200), nullable=False)
    slug = db.Column(db.String(200), unique=True, nullable=False)
    content = db.Column(db.Text, nullable=False)
    timestamp = db.Column(db.DateTime, index=True, default=lambda: datetime.now(timezone.utc))
    category_id = db.Column(db.Integer, db.ForeignKey('category.id'), nullable=True)
    category = db.relationship('Category', back_populates='posts_in_category', foreign_keys=[category_id])

    password_hash = db.Column(db.String(256), nullable=True)
    is_password_protected = db.Column(db.Boolean, default=False, nullable=False)

    def __init__(self, title, content, category_id=None, slug_text=None):
        self.title = title
        self.content = content
        self.category_id = category_id
        self.is_password_protected = False # ê¸°ë³¸ê°’
        self.password_hash = None      # ê¸°ë³¸ê°’
        if slug_text:
            self.slug = slug_text
        else:
            self.slug = self._generate_unique_slug(self.title)

    def _generate_unique_slug(self, title_to_slug):
        base_slug = slugify(title_to_slug)
        current_slug_candidate = base_slug
        counter = 1
        while Post.query.filter_by(slug=current_slug_candidate).first():
            current_slug_candidate = f"{base_slug}-{counter}"
            counter += 1
        return current_slug_candidate

    def set_password(self, password):
        if password and password.strip(): # ë¹„ë°€ë²ˆí˜¸ê°€ ìˆê³  ê³µë°±ë§Œ ìˆëŠ” ê²½ìš°ê°€ ì•„ë‹ ë•Œ
            self.password_hash = generate_password_hash(password)
            self.is_password_protected = True
        else: # ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ê±°ë‚˜ ë¹ˆ ë¬¸ìì—´ì´ë©´ ë³´í˜¸ í•´ì œ
            self.password_hash = None
            self.is_password_protected = False

    def check_password(self, password):
        if not self.password_hash or not self.is_password_protected:
            return False
        return check_password_hash(self.password_hash, password)

    def __repr__(self):
        return f'<Post {self.title}>'
2. flask_board/app.py (ì „ì²´ ì½”ë“œ - ë¹„ë°€ë²ˆí˜¸ ë¡œì§ ì§‘ì¤‘ ìˆ˜ì •)

Python

import os
import uuid
import re
from functools import wraps
from datetime import datetime, timezone, timedelta

from flask import (
    Flask, render_template, request, redirect, url_for, flash, session, jsonify, abort
)
from werkzeug.utils import secure_filename

try:
    from config import Config
except ImportError:
    print("CRITICAL: config.py not found. Using emergency defaults.")
    class Config:
        SECRET_KEY = os.environ.get('SECRET_KEY') or 'emergency_secret_key_please_set_properly'
        SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or 'sqlite:///board.db'
        SQLALCHEMY_TRACK_MODIFICATIONS = False
        ADMIN_PASSWORD = os.environ.get('ADMIN_PASSWORD') or 'kkkwww'
        UPLOAD_FOLDER = os.path.join(os.path.abspath(os.path.dirname(__file__)), 'static/uploads')
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}
        MAX_CONTENT_LENGTH = 50 * 1024 * 1024 # ì˜ˆì‹œ: 50MB

try:
    from models import db, Post, Category
except ImportError:
    print("CRITICAL: models.py not found or models cannot be imported.")
    db = None; Post = None; Category = None

app = Flask(__name__)
app.config.from_object(Config)

if db: db.init_app(app)

upload_folder_path = app.config.get('UPLOAD_FOLDER', './static/uploads_fallback')
if not os.path.exists(upload_folder_path):
    try: os.makedirs(upload_folder_path)
    except OSError as e: app.logger.error(f"Error creating upload folder {upload_folder_path}: {e}")

def allowed_file(filename):
    return '.' in filename and \
           filename.rsplit('.', 1)[1].lower() in app.config.get('ALLOWED_EXTENSIONS', {'png', 'jpg', 'jpeg', 'gif'})

def is_admin_logged_in(): return session.get('is_admin_logged_in', False)

@app.context_processor
def inject_global_vars():
    all_cats = []
    if Category:
        try: all_cats = Category.query.order_by(Category.name).all()
        except Exception as e: app.logger.error(f"Error fetching categories for context: {e}")
    return dict(is_admin=is_admin_logged_in(), now=datetime.now(timezone.utc), all_categories=all_cats)

def admin_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not is_admin_logged_in():
            flash('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.', 'warning'); return redirect(url_for('login', next=request.url))
        return f(*args, **kwargs)
    return decorated_function

@app.route('/login', methods=['GET', 'POST'])
def login():
    if is_admin_logged_in(): return redirect(url_for('index'))
    if request.method == 'POST':
        password = request.form.get('password')
        if password == app.config['ADMIN_PASSWORD']:
            session['is_admin_logged_in'] = True; session.permanent = True
            app.permanent_session_lifetime = timedelta(days=7)
            flash('ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success'); return redirect(request.args.get('next') or url_for('index'))
        else: flash('ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.', 'danger')
    return render_template('login.html')

@app.route('/logout')
def logout():
    session.pop('is_admin_logged_in', None); flash('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.', 'info'); return redirect(url_for('index'))

@app.route('/')
def index():
    if not Post: flash("ê²Œì‹œê¸€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", "danger"); return render_template('index.html', posts_pagination=None, current_category=None)
    page = request.args.get('page', 1, type=int)
    posts_pagination = Post.query.order_by(Post.timestamp.desc()).paginate(page=page, per_page=10, error_out=False)
    return render_template('index.html', posts_pagination=posts_pagination, current_category=None)

@app.route('/post/<string:slug>', methods=['GET', 'POST'])
def view_post(slug):
    if not Post: abort(500, description="Post model not available.")
    post_instance = Post.query.filter_by(slug=slug).first_or_404()
    session_key_for_post_unlock = f'unlocked_post_{post_instance.id}'
    is_unlocked_in_session = session.get(session_key_for_post_unlock, False)

    if post_instance.is_password_protected and post_instance.password_hash:
        if is_unlocked_in_session:
            return render_template('view_post.html', post=post_instance, show_password_form=False)
        else:
            if request.method == 'POST':
                submitted_password = request.form.get('post_password_view')
                if post_instance.check_password(submitted_password):
                    session[session_key_for_post_unlock] = True
                    flash('ë¹„ë°€ë²ˆí˜¸ê°€ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success')
                    return redirect(url_for('view_post', slug=post_instance.slug))
                else:
                    flash('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'danger')
            return render_template('view_post.html', post=post_instance, show_password_form=True)
    else:
        if post_instance.is_password_protected and not post_instance.password_hash:
             app.logger.warning(f"Post ID {post_instance.id} is marked protected but has no password hash. Treating as unprotected.")
        return render_template('view_post.html', post=post_instance, show_password_form=False)

@app.route('/new', methods=['GET', 'POST'])
@admin_required
def new_post():
    cats = []; 
    if Category: 
        try: cats = Category.query.order_by(Category.name).all()
        except Exception as e: app.logger.error(f"Error fetching categories: {e}")

    if request.method == 'POST':
        title = request.form.get('title')
        content = request.form.get('content')
        category_id_str = request.form.get('category_id')
        is_protected_from_form = request.form.get('is_password_protected_checkbox') == 'y'
        password_from_form = request.form.get('post_password_input', '').strip() # ê³µë°± ì œê±°

        if not title or not content:
            flash('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning')
            return render_template('edit_post.html', title=title, content=content, categories=cats, post=None, selected_category_id=category_id_str)

        processed_category_id = int(category_id_str) if category_id_str and category_id_str.isdigit() else None

        try:
            if not Post: raise Exception("Post model not available.")
            new_post_obj = Post(title=title, content=content, category_id=processed_category_id)
            
            if is_protected_from_form:
                if password_from_form: # ë¹„ë°€ë²ˆí˜¸ê°€ ì…ë ¥ë˜ì—ˆìœ¼ë©´
                    new_post_obj.set_password(password_from_form) # ì´ í•¨ìˆ˜ ì•ˆì—ì„œ is_password_protectedë„ Trueë¡œ ì„¤ì •ë¨
                else: # ë³´í˜¸ ì²´í¬ëŠ” í–ˆìœ¼ë‚˜ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì•ˆ í•¨ (ìƒˆ ê¸€)
                    flash('ë¹„ë°€ë²ˆí˜¸ë¡œ ë³´í˜¸ë¥¼ ì„ íƒí–ˆì§€ë§Œ, ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë³´í˜¸ë˜ì§€ ì•Šì€ ê¸€ë¡œ ì €ì¥ë©ë‹ˆë‹¤.', 'warning')
                    new_post_obj.is_password_protected = False # ëª…ì‹œì  í•´ì œ
                    new_post_obj.password_hash = None
            else: # ë³´í˜¸ ì²´í¬ ì•ˆ í•¨
                new_post_obj.is_password_protected = False
                new_post_obj.password_hash = None
            
            db.session.add(new_post_obj)
            db.session.commit()
            flash('ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success')
            return redirect(url_for('view_post', slug=new_post_obj.slug))
        except Exception as e:
            db.session.rollback(); app.logger.error(f"Error creating post: {e}")
            flash(f'ê²Œì‹œê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜: {str(e)}', 'danger')
            return render_template('edit_post.html', title=title, content=content, categories=cats, post=None, selected_category_id=category_id_str)

    return render_template('edit_post.html', categories=cats, post=None, selected_category_id=None)


@app.route('/edit/<string:slug>', methods=['GET', 'POST'])
@admin_required
def edit_post(slug):
    if not Post or not Category: abort(500)
    post_to_edit = Post.query.filter_by(slug=slug).first_or_404()
    cats = []
    try: cats = Category.query.order_by(Category.name).all()
    except Exception as e: app.logger.error(f"Error fetching categories: {e}")
    
    selected_category_id = str(post_to_edit.category_id) if post_to_edit.category_id is not None else ""
    
    if request.method == 'POST':
        original_title = post_to_edit.title
        post_to_edit.title = request.form.get('title')
        post_to_edit.content = request.form.get('content')
        category_id_str = request.form.get('category_id')
        selected_category_id = category_id_str

        is_protected_from_form = request.form.get('is_password_protected_checkbox') == 'y'
        password_from_form = request.form.get('post_password_input', '').strip() # ê³µë°± ì œê±°

        if not post_to_edit.title or not post_to_edit.content:
            flash('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning')
            return render_template('edit_post.html', post=post_to_edit, categories=cats, title=post_to_edit.title, content=post_to_edit.content, selected_category_id=selected_category_id)

        processed_category_id = int(category_id_str) if category_id_str and category_id_str.isdigit() else None
        post_to_edit.category_id = processed_category_id

        if is_protected_from_form: # "ë³´í˜¸" ì²´í¬ ì‹œ
            if password_from_form: # ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì…ë ¥ëœ ê²½ìš° -> ë¹„ë°€ë²ˆí˜¸ ë³€ê²½/ì„¤ì •
                post_to_edit.set_password(password_from_form)
            elif post_to_edit.password_hash: # ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì—†ê³ , ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ê°€ ìˆëŠ” ê²½ìš° -> ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ ìœ ì§€, ë³´í˜¸ ìƒíƒœ ìœ ì§€
                post_to_edit.is_password_protected = True # set_passwordë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í•´ì‹œê°’ ë³€ê²½ ì—†ìŒ
            else: # ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì—†ê³ , ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ë„ ì—†ëŠ” ê²½ìš° -> ë³´í˜¸í•  ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ìœ¼ë¯€ë¡œ ë³´í˜¸ í•´ì œ
                flash('ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸ë¥¼ ì„ íƒí–ˆì§€ë§Œ, ì„¤ì •í•  (ìƒˆ) ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ê³  ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ë„ ì—†ìŠµë‹ˆë‹¤. ë³´í˜¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'warning')
                post_to_edit.is_password_protected = False
                post_to_edit.password_hash = None
        else: # "ë³´í˜¸" ì²´í¬ í•´ì œ ì‹œ -> ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸ í•´ì œ
            post_to_edit.set_password(None) # password_hash = None, is_password_protected = False ë¡œ ì„¤ì •ë¨
            
        if original_title != post_to_edit.title:
            post_to_edit.slug = post_to_edit._generate_unique_slug(post_to_edit.title)
        post_to_edit.timestamp = datetime.now(timezone.utc)
        
        try:
            db.session.commit()
            flash('ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success')
            return redirect(url_for('view_post', slug=post_to_edit.slug))
        except Exception as e:
            db.session.rollback(); app.logger.error(f"Error editing post {slug}: {e}")
            flash(f'ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜: {str(e)}', 'danger')
            return render_template('edit_post.html', post=post_to_edit, categories=cats, title=post_to_edit.title, content=post_to_edit.content, selected_category_id=selected_category_id)

    return render_template('edit_post.html', post=post_to_edit, categories=cats, title=post_to_edit.title, content=post_to_edit.content, selected_category_id=selected_category_id)

@app.route('/delete/<string:slug>', methods=['POST'])
@admin_required
def delete_post(slug):
    if not Post: abort(500)
    post_to_delete = Post.query.filter_by(slug=slug).first_or_404()
    try:
        db.session.delete(post_to_delete); db.session.commit()
        flash('ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success')
    except Exception as e:
        db.session.rollback(); app.logger.error(f"Error deleting post {slug}: {e}"); flash(f'ì‚­ì œ ì˜¤ë¥˜: {str(e)}', 'danger')
    return redirect(url_for('index'))

@app.route('/upload_image', methods=['POST'])
@admin_required
def upload_image():
    if 'file' not in request.files: return jsonify({'error': {'message': 'No file part'}}), 400
    file = request.files['file']
    if file.filename == '': return jsonify({'error': {'message': 'No selected file'}}), 400
    if file and allowed_file(file.filename):
        original_filename = secure_filename(file.filename); filename_prefix = str(uuid.uuid4())[:8]
        base, ext = os.path.splitext(original_filename); safe_base = re.sub(r'[^\w-]', '', base)[:50]
        filename = f"{filename_prefix}_{safe_base}{ext}"; counter = 1; temp_filename_to_check = filename
        upload_path = app.config.get('UPLOAD_FOLDER', './static/uploads_fallback')
        final_filepath = os.path.join(upload_path, temp_filename_to_check)
        while os.path.exists(final_filepath):
            temp_filename_to_check = f"{filename_prefix}_{safe_base}_{counter}{ext}"
            final_filepath = os.path.join(upload_path, temp_filename_to_check); counter += 1
        filename = temp_filename_to_check
        try:
            file.save(final_filepath); image_url = url_for('static', filename=f'uploads/{filename}') 
            return jsonify({'location': image_url})
        except Exception as e:
            app.logger.error(f"Image upload failed: {e}, filepath: {final_filepath}")
            return jsonify({'error': {'message': f'Image upload failed: {str(e)}'}}), 500
    return jsonify({'error': {'message': f'Allowed types: {app.config.get("ALLOWED_EXTENSIONS", set())}'}}), 400

@app.route('/admin/categories')
@admin_required
def admin_categories(): return render_template('admin_categories.html')

@app.route('/admin/category/new', methods=['GET', 'POST'])
@admin_required
def new_category():
    if not Category: abort(500)
    if request.method == 'POST':
        name = request.form.get('name')
        if not name: flash('ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning')
        else:
            try:
                if Category.query.filter_by(name=name).first(): flash('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ì´ë¦„.', 'warning')
                else:
                    db.session.add(Category(name=name)); db.session.commit()
                    flash(f'ì¹´í…Œê³ ë¦¬ "{name}" ì¶”ê°€ ì™„ë£Œ.', 'success'); return redirect(url_for('admin_categories'))
            except Exception as e:
                db.session.rollback(); app.logger.error(f"Error creating category: {e}"); flash(f'ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì˜¤ë¥˜: {str(e)}', 'danger')
        return render_template('edit_category.html', category_name=name, category=None)
    return render_template('edit_category.html', category=None, category_name='')

@app.route('/admin/category/edit/<int:category_id>', methods=['GET', 'POST'])
@admin_required
def edit_category(category_id):
    if not Category: abort(500)
    category_to_edit = Category.query.get_or_404(category_id); category_name_for_form = category_to_edit.name
    if request.method == 'POST':
        new_name = request.form.get('name'); category_name_for_form = new_name
        if not new_name: flash('ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning')
        elif new_name == category_to_edit.name: flash('ë³€ê²½ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.', 'info'); return redirect(url_for('admin_categories'))
        else:
            try:
                if Category.query.filter(Category.name == new_name, Category.id != category_id).first(): flash('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ì´ë¦„.', 'warning')
                else:
                    original_name = category_to_edit.name; category_to_edit.name = new_name
                    category_to_edit.slug = category_to_edit._generate_unique_slug(new_name); db.session.commit()
                    flash(f'ì¹´í…Œê³ ë¦¬ "{original_name}"ì´ "{new_name}"(ìœ¼)ë¡œ ìˆ˜ì • ì™„ë£Œ.', 'success'); return redirect(url_for('admin_categories'))
            except Exception as e:
                db.session.rollback(); app.logger.error(f"Error editing category: {e}"); flash(f'ì¹´í…Œê³ ë¦¬ ìˆ˜ì • ì˜¤ë¥˜: {str(e)}', 'danger')
        return render_template('edit_category.html', category=category_to_edit, category_name=category_name_for_form)
    return render_template('edit_category.html', category=category_to_edit, category_name=category_name_for_form)

@app.route('/admin/category/delete/<int:category_id>', methods=['POST'])
@admin_required
def delete_category(category_id):
    if not Category: abort(500)
    category_to_delete = Category.query.get_or_404(category_id)
    if category_to_delete.posts_in_category.count() > 0:
        flash(f'"{category_to_delete.name}"ì— ì†í•œ ê¸€ì´ ìˆì–´ ì‚­ì œ ë¶ˆê°€.', 'danger'); return redirect(url_for('admin_categories'))
    try:
        db.session.delete(category_to_delete); db.session.commit(); flash(f'ì¹´í…Œê³ ë¦¬ "{category_to_delete.name}" ì‚­ì œ ì™„ë£Œ.', 'success')
    except Exception as e:
        db.session.rollback(); app.logger.error(f"Error deleting category: {e}"); flash(f'ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì˜¤ë¥˜: {str(e)}', 'danger')
    return redirect(url_for('admin_categories'))

@app.route('/category/<string:slug>')
def posts_by_category(slug):
    if not Category or not Post: abort(500)
    category = Category.query.filter_by(slug=slug).first_or_404(); page = request.args.get('page', 1, type=int)
    posts_pagination = category.posts_in_category.order_by(Post.timestamp.desc()).paginate(page=page, per_page=10, error_out=False)
    return render_template('index.html', posts_pagination=posts_pagination, current_category=category)

@app.cli.command('init-db')
def init_db_cli_command():
    if db is None: print("DB not initialized."); return
    with app.app_context(): db.drop_all(); db.create_all()
    print('Initialized the database.')

_db_initialized_flag = False
@app.before_request
def ensure_tables_exist():
    global _db_initialized_flag
    if not _db_initialized_flag and db is not None:
        with app.app_context(): db.create_all()
        _db_initialized_flag = True

@app.route('/debug_config_check')
def debug_config_check():
    max_size = app.config.get('MAX_CONTENT_LENGTH')
    if max_size is None: return "MAX_CONTENT_LENGTH is not set."
    # is_5gb = (max_size == 5000 * 1024 * 1024) # 5GB ê¸°ì¤€
    # í˜„ì¬ 50MBë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ìˆë‹¤ë©´
    is_50mb_or_5gb = (max_size == 50 * 1024 * 1024) or (max_size == 5000 * 1024 * 1024)
    return f"MAX_CONTENT_LENGTH: {max_size} bytes. Is this 50MB or 5GB? {is_50mb_or_5gb}"

if __name__ == '__main__':
    if db is not None:
        with app.app_context(): db.create_all() 
    app.run(host='10.244.122.25', port=8099, debug=True, threaded=True)

3. templates/edit_post.html (ì „ì²´ ì½”ë“œ - ì´ì „ "ë¹„ë°€ë²ˆí˜¸ í•„ë“œ í•­ìƒ í‘œì‹œ" ë²„ì „)

ì´ íŒŒì¼ì€ ì´ì „ ë‹µë³€("ì•„ì”¨ë°œ ëê³  edit post ìˆ˜ì •ëœ ìµœì¢…ì„ë‹¬ë¼ê³  ìˆ˜ì •í•œê±¸ ë˜ëŠ”ê±¸ ë‹¬ë¼ê³ ")ì—ì„œ ë“œë¦° ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. í•´ë‹¹ ì½”ë“œì—ì„œëŠ” ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œê°€ í•­ìƒ ë³´ì´ë„ë¡ JavaScript ê´€ë ¨ ë¶€ë¶„ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤. ì´ íŒŒì¼ì— ë³€ê²½ ì‚¬í•­ì´ ì—†ë‹¤ë©´ ê·¸ëŒ€ë¡œ ë‘ì…”ë„ ë©ë‹ˆë‹¤. ë§Œì•½ì„ ìœ„í•´ ë‹¤ì‹œ í•œë²ˆ ì „ì²´ ì½”ë“œë¥¼ ë“œë¦½ë‹ˆë‹¤.

HTML

{% extends "base.html" %}

{% block title %}{{ 'ê²Œì‹œê¸€ ìˆ˜ì •' if post else 'ìƒˆ ê²Œì‹œê¸€ ì‘ì„±' }} - ë‚˜ì˜ ê²Œì‹œíŒ{% endblock %}

{% block head_extra %}
    <script src="{{ url_for('static', filename='tinymce/tinymce.min.js') }}" referrerpolicy="origin"></script>
{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <h2>{{ 'ê²Œì‹œê¸€ ìˆ˜ì •' if post else 'ìƒˆ ê²Œì‹œê¸€ ì‘ì„±' }}</h2>
    <form method="POST" action="{{ url_for('edit_post', slug=post.slug) if post else url_for('new_post') }}">
        <div class="form-group">
            <label for="title">ì œëª©</label>
            <input type="text" class="form-control" id="title" name="title" value="{{ title or (post.title if post else '') }}" required>
        </div>

        <div class="form-group">
            <label for="category_id">ì¹´í…Œê³ ë¦¬</label>
            <select class="form-control" id="category_id" name="category_id">
                <option value="">-- ì¹´í…Œê³ ë¦¬ ì„ íƒ ì•ˆ í•¨ --</option>
                {% for category_item in categories %}
                    <option value="{{ category_item.id }}" {% if selected_category_id and category_item.id == selected_category_id|int %}selected{% endif %}>
                        {{ category_item.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group form-check">
            <input type="checkbox" class="form-check-input" id="is_password_protected_checkbox" name="is_password_protected_checkbox" value="y"
                   {% if post and post.is_password_protected %}checked{% endif %}>
            <label class="form-check-label" for="is_password_protected_checkbox">ì´ ê¸€ì„ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³´í˜¸í•©ë‹ˆë‹¤ (ì²´í¬ ì‹œ ì•„ë˜ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©).</label>
        </div>

        <div id="password_fields_container"> {# style="display:none" ì œê±°ë¨ #}
            <div class="form-group">
                <label for="post_password_input">ê¸€ ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" class="form-control" id="post_password_input" name="post_password_input" placeholder="ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸ ì²´í¬ ì‹œ ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸">
                <small class="form-text text-muted">
                    ìœ„ "ë¹„ë°€ë²ˆí˜¸ë¡œ ë³´í˜¸" ì²´í¬ ì‹œ, ì—¬ê¸°ì— ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.
                    ì²´í¬í•˜ì§€ ì•Šìœ¼ë©´ ì´ í•„ë“œì— ì…ë ¥ëœ ê°’ì€ ë¬´ì‹œë©ë‹ˆë‹¤.
                    ê¸°ì¡´ ê¸€ ìˆ˜ì • ì‹œ, ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•Œë§Œ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ë¹„ì›Œë‘ê³  ì²´í¬í•˜ë©´ ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ê°€ ìœ ì§€ë©ë‹ˆë‹¤ (ë‹¨, ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ê°€ ì—†ëŠ” ìƒíƒœì—ì„œ ë¹„ì›Œë‘ê³  ì²´í¬í•˜ë©´ ë³´í˜¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤).
                </small>
            </div>
        </div>

        <div class="form-group">
            <label for="content">ë‚´ìš©</label>
            <textarea class="form-control" id="content" name="content" rows="15">{{ content or (post.content if post else '') }}</textarea>
        </div>
        <button type="submit" class="btn btn-primary">ì €ì¥</button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">ì·¨ì†Œ</a>
    </form>
</div>
{% endblock %}

{% block scripts_extra %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    tinymce.init({ // TinyMCE ì´ˆê¸°í™”ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
        selector: 'textarea#content',
        plugins: 'preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons accordion',
        menubar: 'file edit view insert format tools table help',
        toolbar: 'undo redo | accordion accordionremove | blocks fontfamily fontsize | bold italic underline strikethrough | align numlist bullist | link image media table | lineheight outdent indent| forecolor backcolor removeformat | charmap emoticons | code fullscreen preview | save print | pagebreak anchor codesample | ltr rtl',
        height: 600,
        language: 'ko_KR',
        automatic_uploads: true,
        images_upload_url: "{{ url_for('upload_image') }}",
        file_picker_types: 'image',
        paste_data_images: true,
        images_upload_handler: function (blobInfo, progress) {
            return new Promise((resolve, reject) => {
                const image_size_mb = blobInfo.blob().size / 1024 / 1024;
                const client_max_size_mb = 10; 

                if (image_size_mb > client_max_size_mb) {
                    reject({ 
                        message: 'ì´ë¯¸ì§€ ìš©ëŸ‰ì´ ë„ˆë¬´ í½ë‹ˆë‹¤ (' + image_size_mb.toFixed(1) + 'MB). í´ë¼ì´ì–¸íŠ¸ ìµœëŒ€ í—ˆìš© ìš©ëŸ‰ì€ ' + client_max_size_mb + 'MB ì…ë‹ˆë‹¤.', 
                        remove: true
                    });
                    return;
                }
                const xhr = new XMLHttpRequest();
                xhr.withCredentials = false;
                xhr.open('POST', "{{ url_for('upload_image') }}");
                xhr.upload.onprogress = (e) => {
                    if (e.lengthComputable) {
                        progress(e.loaded / e.total * 100);
                    }
                };
                xhr.onload = () => {
                    if (xhr.status < 200 || xhr.status >= 300) {
                        let errorMessage = 'HTTP Error: ' + xhr.status;
                        try {
                            const jsonError = JSON.parse(xhr.responseText);
                            if (jsonError && jsonError.error && jsonError.error.message) {
                                errorMessage = jsonError.error.message;
                            }
                        } catch (e) {
                            if (xhr.status === 413) {
                                 errorMessage = 'íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤. ì„œë²„ì—ì„œ ìš”ì²­ì„ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤ (HTTP 413).';
                            } else if (xhr.responseText && xhr.responseText.length < 300) {
                                errorMessage = `ì„œë²„ ì˜¤ë¥˜: ${xhr.status} - ${xhr.responseText.substring(0,100)}`;
                            } else {
                                errorMessage = `ì„œë²„ì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ì‘ë‹µì„ ë°›ì•˜ìŠµë‹ˆë‹¤ (HTTP ${xhr.status}).`;
                            }
                        }
                        reject({ message: errorMessage, remove: true });
                        return;
                    }
                    try {
                        const json = JSON.parse(xhr.responseText);
                        if (!json || typeof json.location != 'string') {
                            reject({ message: 'ì„œë²„ë¡œë¶€í„° ì˜ëª»ëœ JSON ì‘ë‹µì„ ë°›ì•˜ìŠµë‹ˆë‹¤: ' + xhr.responseText, remove: true });
                            return;
                        }
                        resolve(json.location);
                    } catch (e) {
                        reject({ message: 'ì„œë²„ ì‘ë‹µ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ (JSON íŒŒì‹± ì‹¤íŒ¨): ' + e.message + ' ì‘ë‹µë‚´ìš©: ' + xhr.responseText.substring(0,100), remove: true });
                    }
                };
                xhr.onerror = () => {
                    reject({ message: 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì„œë²„ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.', remove: true });
                };
                const formData = new FormData();
                formData.append('file', blobInfo.blob(), blobInfo.filename());
                xhr.send(formData);
            });
        }
    });
    // ë¹„ë°€ë²ˆí˜¸ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€ ê´€ë ¨ JavaScriptëŠ” ì œê±°ë¨
});
</script>
{% endblock %}
4. templates/view_post.html (ì „ì²´ ì½”ë“œ - ì´ì „ ìµœì¢…ë³¸ê³¼ ë™ì¼)

ì´ íŒŒì¼ì€ ì´ì „ ë‹µë³€("ì•„ë‹ˆ ìˆ˜ì •í•´ì•¼í• íŒŒì¼ì´ë­ì˜€ì–´ìš”...")ì—ì„œ ë“œë¦° ì½”ë“œê°€ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í¼ê³¼ ê¸€ ë‚´ìš©ì„ ì¡°ê±´ë¶€ë¡œ í‘œì‹œí•˜ëŠ” ìµœì¢…ë³¸ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì— ë³€ê²½ ì‚¬í•­ì´ ì—†ë‹¤ë©´ ê·¸ëŒ€ë¡œ ë‘ì…”ë„ ë©ë‹ˆë‹¤.

HTML

{% extends "base.html" %}

{% block title %}{{ post.title }} - ë‚˜ì˜ ê²Œì‹œíŒ{% endblock %}

{% block content %}
    {% if show_password_form %}
        <div class="password-form-container mt-5 p-4 border rounded bg-light shadow-sm">
            <h4 class="mb-3 text-center">ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</h4>
            <p class="text-center text-muted">ì´ ê²Œì‹œê¸€ì€ ë¹„ë°€ë²ˆí˜¸ë¡œ ë³´í˜¸ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ë³´ì‹œë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            <form method="POST" action="{{ url_for('view_post', slug=post.slug) }}">
                <div class="form-group">
                    <label for="post_password_view_input" class="sr-only">ë¹„ë°€ë²ˆí˜¸:</label>
                    <input type="password" class="form-control form-control-lg" id="post_password_view_input" name="post_password_view" placeholder="ë¹„ë°€ë²ˆí˜¸" required autofocus>
                </div>
                <button type="submit" class="btn btn-primary btn-block">í™•ì¸</button>
                <div class="text-center mt-3">
                    <a href="{{ url_for('index') }}" class="btn btn-link btn-sm">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
                </div>
            </form>
        </div>
    {% else %}
        <article class="mt-4">
            <header class="mb-4 pb-3 border-bottom">
                <h1>{{ post.title }}</h1>
                <div class="text-muted">
                    <small>
                        ì‘ì„±ì¼: {{ post.timestamp.strftime('%Yë…„ %mì›” %dì¼ %H:%M') }} (UTC)
                        {% if post.category %}
                            | ì¹´í…Œê³ ë¦¬: <a href="{{ url_for('posts_by_category', slug=post.category.slug) }}">{{ post.category.name }}</a>
                        {% endif %}
                        {% if post.is_password_protected and post.password_hash %}
                            | <span class="text-danger font-weight-bold">ğŸ”’ ë¹„ë°€ê¸€</span>
                        {% endif %}
                    </small>
                </div>
                {% if is_admin %}
                    <div class="mt-2">
                        <a href="{{ url_for('edit_post', slug=post.slug) }}" class="btn btn-sm btn-outline-secondary">ìˆ˜ì •</a>
                        <form action="{{ url_for('delete_post', slug=post.slug) }}" method="POST" class="d-inline" onsubmit="return confirm('ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                            <button type="submit" class="btn btn-sm btn-outline-danger">ì‚­ì œ</button>
                        </form>
                    </div>
                {% endif %}
            </header>
            <section class="post-content lead">
                {{ post.content | safe }}
            </section>
        </article>
        <hr class="my-4">
        <a href="{{ url_for('index') }}" class="btn btn-outline-primary">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    {% endif %}
{% endblock %}
5. templates/index.html (ì „ì²´ ì½”ë“œ - ì´ì „ ìµœì¢…ë³¸ê³¼ ë™ì¼)

ì´ íŒŒì¼ì€ ì´ì „ ë‹µë³€("index.htmlì „ì²´ì¤€ê±°ë§ëƒ ì „ì²´ì¤˜ ê·¸ë¦¬ê³  ì „ì²´ì•ˆì¤€ê±°ì—†ì§€ë‚˜ë¨¸ì§„ ??ì¼ë‹¨ í´ë¦­í•˜ë©´ ë¹„ë²ˆì—†ì´ ë´ì§€ë‹ˆê¹Œ ì¸ë±ìŠ¤ì£¼ê³ ë‚˜ì„œ ë¬¸ì €ì ¬ì¬í™•ì¸")ì—ì„œ ë“œë¦° ë¹„ë°€ê¸€ ì•„ì´ì½˜ í‘œì‹œê°€ í¬í•¨ëœ ìµœì¢…ë³¸ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì— ë³€ê²½ ì‚¬í•­ì´ ì—†ë‹¤ë©´ ê·¸ëŒ€ë¡œ ë‘ì…”ë„ ë©ë‹ˆë‹¤.

HTML

{% extends "base.html" %}

{% block title %}
    {% if current_category %}
        {{ current_category.name }} - ì¹´í…Œê³ ë¦¬
    {% else %}
        ì „ì²´ ê²Œì‹œê¸€
    {% endif %}
    - ë‚˜ì˜ ê²Œì‹œíŒ
{% endblock %}

{% block content %}
    {% if current_category %}
        <h2 class="mb-4">ì¹´í…Œê³ ë¦¬: <span class="font-weight-bold text-primary">{{ current_category.name }}</span></h2>
    {% else %}
        <h2 class="mb-4">ìµœê·¼ ê²Œì‹œê¸€</h2>
    {% endif %}

    {% if posts_pagination.items %}
        {% for post_item in posts_pagination.items %}
            <div class="card mb-3 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">
                        <a href="{{ url_for('view_post', slug=post_item.slug) }}">{{ post_item.title }}</a>
                        {% if post_item.is_password_protected and post_item.password_hash %}
                            <span class="text-danger ml-2" title="ë¹„ë°€ê¸€">ğŸ”’</span>
                        {% endif %}
                    </h5>
                    <p class="card-subtitle mb-2 text-muted">
                        <small>
                            ì‘ì„±ì¼: {{ post_item.timestamp.strftime('%Yë…„ %mì›” %dì¼ %H:%M') }} (UTC)
                            {% if post_item.category %}
                                | ì¹´í…Œê³ ë¦¬: <a href="{{ url_for('posts_by_category', slug=post_item.category.slug) }}">{{ post_item.category.name }}</a>
                            {% endif %}
                        </small>
                    </p>
                    <a href="{{ url_for('view_post', slug=post_item.slug) }}" class="btn btn-sm btn-outline-primary">ë” ë³´ê¸°</a>
                    {% if is_admin %}
                        <a href="{{ url_for('edit_post', slug=post_item.slug) }}" class="btn btn-sm btn-outline-secondary ml-1">ìˆ˜ì •</a>
                        <form action="{{ url_for('delete_post', slug=post_item.slug) }}" method="POST" class="d-inline ml-1" onsubmit="return confirm('ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                            <button type="submit" class="btn btn-sm btn-outline-danger">ì‚­ì œ</button>
                        </form>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info mt-4" role="alert">
            í‘œì‹œí•  ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
            {% if current_category %}
                ì´ ì¹´í…Œê³ ë¦¬ì—ëŠ” ì•„ì§ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
            {% elif is_admin %}
                <a href="{{ url_for('new_post') }}" class="alert-link">ì²« ë²ˆì§¸ ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</a>
            {% endif %}
        </div>
        {% if current_category %}
            <p><a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-secondary mt-2">ì „ì²´ ê²Œì‹œê¸€ ë³´ê¸°</a></p>
        {% endif %}
    {% endif %}

    {% if posts_pagination and posts_pagination.pages > 1 %}
    <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item {% if not posts_pagination.has_prev %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for(request.endpoint, page=posts_pagination.prev_num, slug=current_category.slug if current_category else None) if posts_pagination.has_prev else '#' }}" tabindex="-1" aria-disabled="{{ 'true' if not posts_pagination.has_prev else 'false' }}">ì´ì „</a>
            </li>
            {% for page_num in posts_pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                {% if page_num %}
                    <li class="page-item {% if posts_pagination.page == page_num %}active{% endif %}">
                        <a class="page-link" href="{{ url_for(request.endpoint, page=page_num, slug=current_category.slug if current_category else None) }}">{{ page_num }}</a>
                    </li>
                {% endif %}
            {% endfor %}
            <li class="page-item {% if not posts_pagination.has_next %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for(request.endpoint, page=posts_pagination.next_num, slug=current_category.slug if current_category else None) if posts_pagination.has_next else '#' }}">ë‹¤ìŒ</a>
            </li>
        </ul>
    </nav>
    {% endif %}
{% endblock %}
ë‚˜ë¨¸ì§€ íŒŒì¼ë“¤ (config.py, templates/base.html, ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ìš© í…œí”Œë¦¿)ì€ ì´ì „ ìµœì¢…ë³¸ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

ì´ ì½”ë“œë¡œ êµì²´í•˜ì‹œê³ , ë°˜ë“œì‹œ board.db íŒŒì¼ì„ ì‚­ì œí•œ í›„ Flask ì•±ì„ ì¬ì‹œì‘í•˜ì—¬ í…ŒìŠ¤íŠ¸í•´ì£¼ì‹­ì‹œì˜¤. ì´ë ‡ê²Œ í•˜ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•œ ê¸€ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì•¼ë§Œ ë³¼ ìˆ˜ ìˆê³ , ëª©ë¡ì—ì„œë„ ë¹„ë°€ê¸€ í‘œì‹œê°€ ë‚˜íƒ€ë‚˜ì•¼ í•©ë‹ˆë‹¤.