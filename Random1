ListBox에 로그가 쌓일 때 스크롤이 항상 마지막 로그를 가리키도록 설정하려면, 로그가 추가될 때마다 ScrollIntoView 메서드를 사용하여 마지막 항목으로 자동 스크롤되도록 설정할 수 있습니다.

다음은 ListBox의 스크롤을 마지막 로그로 자동으로 이동시키는 방법에 대한 코드 예제와 설명입니다.

XAML
먼저, MainWindow.xaml에 ListBox를 정의합니다:

xml
코드 복사
<Window x:Class="RouterMiddleACR.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RouterMiddleACR" Height="450" Width="800">
    <Grid>
        <!-- 로그를 표시할 ListBox -->
        <ListBox x:Name="LogListBox" ItemsSource="{Binding LogMessages}" />
    </Grid>
</Window>
여기서 LogListBox는 로그 메시지를 표시할 ListBox입니다.

C# (MainWindow.xaml.cs)
MainWindow.xaml.cs에서 로그가 추가될 때마다 마지막 항목으로 스크롤되도록 설정하는 코드를 추가합니다:

csharp
코드 복사
using System;
using System.Windows;
using System.Windows.Controls;
using RouterMiddleACR.ViewModels;

namespace RouterMiddleACR
{
    public partial class MainWindow : Window
    {
        private MainViewModel _viewModel;

        public MainWindow()
        {
            InitializeComponent();
            _viewModel = new MainViewModel();
            DataContext = _viewModel;

            // ViewModel의 LogMessages 컬렉션 변경을 감지하여 ScrollIntoView를 호출
            _viewModel.LogMessages.CollectionChanged += (s, e) =>
            {
                // 로그가 추가될 때마다 마지막 항목으로 스크롤
                if (LogListBox.Items.Count > 0)
                {
                    LogListBox.ScrollIntoView(LogListBox.Items[LogListBox.Items.Count - 1]);
                }
            };
        }
    }
}
설명
ListBox 정의:

ListBox는 XAML에서 정의되며, 이름은 LogListBox입니다. 이 컨트롤은 LogMessages 컬렉션을 데이터 소스로 사용합니다.
로그 자동 스크롤:

MainWindow의 생성자에서 LogMessages의 CollectionChanged 이벤트를 구독합니다. 이 이벤트는 ObservableCollection의 항목이 추가되거나 제거될 때 발생합니다.
이벤트 핸들러에서 LogListBox.ScrollIntoView 메서드를 호출하여 ListBox의 마지막 항목이 항상 보이도록 설정합니다. ScrollIntoView 메서드는 매개 변수로 전달된 항목을 뷰로 스크롤합니다.
LogListBox.Items[LogListBox.Items.Count - 1]는 ListBox의 마지막 항목을 가리킵니다. 이 항목을 ScrollIntoView 메서드에 전달하여, 새로운 로그가 추가될 때마다 ListBox가 자동으로 스크롤되도록 합니다.
추가 사항
이 설정은 로그가 추가될 때마다 스크롤이 자동으로 업데이트되므로, 사용자가 수동으로 스크롤할 필요가 없습니다. 만약 사용자가 특정 로그를 확인하려고 수동으로 스크롤한 경우에도, 새로운 로그가 추가되면 자동으로 마지막 로그로 스크롤됩니다. 이 기능은 로그 메시지가 빠르게 추가되는 환경에서 매우 유용합니다.