우분투에서 시간 동기화(NTP)는 주로 systemd-timesyncd 또는 chrony (또는 과거에는 ntpd)를 통해 이루어집니다. 최신 우분투 버전(16.04 LTS 이후)에서는 기본적으로 systemd-timesyncd가 사용되는 경우가 많습니다.

어떤 NTP 서비스가 실행 중인지, 그리고 주기적으로 동기화가 이루어지고 있는지 확인하는 방법은 다음과 같습니다.

1. 현재 사용 중인 NTP 서비스 확인
터미널에서 다음 명령어를 실행하여 어떤 시간 동기화 서비스가 활성화되어 있는지 확인할 수 있습니다.

systemd-timesyncd 상태 확인:

Bash

sudo systemctl status systemd-timesyncd
실행 중이라면 Active: active (running)와 같은 메시지가 표시됩니다.

chrony 상태 확인:

Bash

sudo systemctl status chronyd
또는

Bash

sudo systemctl status chrony
실행 중이라면 Active: active (running)와 같은 메시지가 표시됩니다.

ntpd (구형 NTP 데몬) 상태 확인:

Bash

sudo systemctl status ntp
실행 중이라면 Active: active (running)와 같은 메시지가 표시됩니다.

일반적으로 이 중 하나만 활성화되어 있어야 합니다. 만약 여러 개가 동시에 실행 중이라면 충돌이 발생할 수 있으므로 하나만 사용하도록 설정하는 것이 좋습니다.

2. 시간 동기화 상태 및 주기 확인
어떤 NTP 서비스를 사용하는지에 따라 확인 명령어가 다릅니다.

systemd-timesyncd 사용 시
systemd-timesyncd는 시스템 부팅 시 그리고 네트워크 연결 시 자동으로 시간 동기화를 시도하며, 주기적으로 동기화를 수행합니다.

동기화 상태 및 설정된 서버 확인:

Bash

timedatectl status
출력 결과에서 다음 항목들을 확인하세요.

System clock synchronized: yes (시간 동기화 여부)
NTP service: active (NTP 서비스 활성화 여부)
NTP server: 또는 NTP server name or IP address: (현재 동기화 중인 서버 또는 설정된 서버 목록)
동기화 로그 확인 (최근 로그):

Bash

sudo journalctl -u systemd-timesyncd
이 로그를 통해 언제 동기화가 시도되었고 성공했는지 등의 상세 정보를 확인할 수 있습니다.

동기화 주기 설정:
systemd-timesyncd의 동기화 주기는 /etc/systemd/timesyncd.conf 파일에서 PollIntervalMinSec와 PollIntervalMaxSec 옵션으로 설정할 수 있습니다. (기본값은 보통 몇 시간에서 며칠 사이로 자동 조절됩니다.)

chrony 사용 시
chrony는 ntpd보다 더 빠르고 정확하게 시간을 동기화할 수 있도록 설계되었습니다.

동기화 상태 및 서버 정보 확인:

Bash

chronyc tracking
이 명령어는 현재 시간 오차, 동기화 참조 서버 ID, Stratum 레벨 등 상세한 동기화 상태를 보여줍니다.

연결된 NTP 서버 목록 및 상태 확인:

Bash

chronyc sources
또는 더 자세한 정보를 보려면:

Bash

chronyc sources -v
이 명령어는 현재 chrony가 연결을 시도하거나 연결된 NTP 서버들의 목록과 각 서버와의 동기화 상태를 보여줍니다.

동기화 로그 확인 (시스템 로그):
chrony의 로그는 일반적으로 시스템 로그(syslog 또는 journald)에 기록됩니다.

Bash

sudo journalctl -u chrony
또는

Bash

sudo journalctl -u chronyd
동기화 주기 설정:
chrony의 동기화 주기는 /etc/chrony/chrony.conf (또는 /etc/chrony.conf) 파일의 pool 또는 server 지시어에 있는 iburst 옵션과 minpoll, maxpoll 옵션 등에 의해 제어됩니다. iburst 옵션은 초기 동기화 시 여러 번의 요청을 빠르게 보내는 역할을 합니다. minpoll과 maxpoll은 폴링 간격의 최소 및 최대값을 로그2 초 단위로 설정합니다.

ntpd (구형 NTP 데몬) 사용 시
동기화 상태 및 서버 정보 확인:

Bash

ntpq -p
이 명령어는 ntpd가 연결된 NTP 서버들의 목록과 각 서버와의 동기화 상태를 보여줍니다. * (asterisk) 기호가 표시된 서버가 현재 동기화에 사용되는 서버입니다.

NTP 서비스 상태 요약:

Bash

ntpstat
간단한 동기화 상태를 보여줍니다.

동기화 로그 확인 (시스템 로그):
ntpd의 로그도 일반적으로 시스템 로그에 기록됩니다.

Bash

sudo journalctl -u ntp
또는 /var/log/syslog 나 /var/log/daemon.log 등에서 ntpd 관련 로그를 찾아볼 수 있습니다.

동기화 주기 설정:
ntpd의 동기화 주기는 /etc/ntp.conf 파일의 server 또는 pool 지시어에 있는 minpoll과 maxpoll 옵션으로 제어됩니다.

요약하자면,

sudo systemctl status systemd-timesyncd, sudo systemctl status chrony, sudo systemctl status ntp 중 어떤 서비스가 active (running) 상태인지 확인하여 현재 사용 중인 NTP 서비스를 파악합니다.
해당 서비스에 맞는 명령어 (위에서 설명한 timedatectl status, chronyc tracking, ntpq -p 등)를 사용하여 동기화 상태와 서버 정보를 확인합니다.