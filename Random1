using System;
using System.Diagnostics;

namespace HandleChecker
{
    class Program
    {
        static void Main(string[] args)
        {
            const int handleThreshold = 100000;

            Console.WriteLine("핸들 수가 {0} 이상인 프로세스 목록:", handleThreshold);

            foreach (Process process in Process.GetProcesses())
            {
                try
                {
                    if (process.HandleCount > handleThreshold)
                    {
                        Console.WriteLine("프로세스 이름: {0}\t핸들 수: {1}", process.ProcessName, process.HandleCount);
                    }
                }
                catch (Exception ex)
                {
                    // 권한 문제 등으로 핸들 수를 얻을 수 없는 경우 예외 처리
                    Console.WriteLine("프로세스 {0}에 대한 정보를 읽을 수 없습니다: {1}", process.ProcessName, ex.Message);
                }
            }
        }
    }
}
