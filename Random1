ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ë˜ë‹¤ì‹œ ë²„ì „ ë¬¸ì œë„¤ìš”. ì œê°€ 8.6.0ì´ë¼ëŠ”, ì•„ì§ ê³µì‹ì ìœ¼ë¡œ ë°°í¬ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ë¶ˆì•ˆì •í•œ ë²„ì „ì„ ì‚¬ìš©í•˜ëŠ” ì‹¤ìˆ˜ë¥¼ í–ˆìŠµë‹ˆë‹¤. ì €ì¥ì†Œì— ì—†ëŠ” ë²„ì „ì„ ì§€ì •í–ˆê¸° ë•Œë¬¸ì— ì°¾ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒì…ë‹ˆë‹¤.

ë‘ ë²ˆì´ë‚˜ ë²ˆê±°ë¡­ê²Œ í•´ë“œë ¤ ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” í˜„ì¬ ë„ë¦¬ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì•ˆì •ì ì¸ ìµœì‹  ë²„ì „ ì¡°í•©ìœ¼ë¡œ ë‹¤ì‹œ ë§ì¶˜ ìµœì¢… ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.

## ìµœì¢… ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ (Final Script) ğŸ› ï¸
ì£¼ìš” ë³€ê²½ì :

gradle-wrapper.properties: ê·¸ë˜ë“¤ ë²„ì „ì„ **8.6**ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. (ì‚¬ìš©ìë‹˜ì˜ ìµœì†Œ ìš”êµ¬ì‚¬í•­ 8.5 ì¶©ì¡±)

libs.versions.toml: AGP ë²„ì „ì„ **8.5.1**ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. (ê·¸ë˜ë“¤ 8.6ê³¼ í˜¸í™˜ì„±ì´ ê²€ì¦ëœ ì•ˆì • ë²„ì „)

ì•„ë˜ ì½”ë“œë¡œ íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ì™„ì „íˆ êµì²´í•œ í›„ ë‹¤ì‹œ ì§„í–‰í•´ ì£¼ì„¸ìš”.

Python

import os
import textwrap

# --- í”„ë¡œì íŠ¸ êµ¬ì¡° ë° íŒŒì¼ ë‚´ìš© ì •ì˜ ---
# { "ê²½ë¡œ/íŒŒì¼ëª…": """íŒŒì¼ ë‚´ìš©""" } í˜•ì‹
project_files = {
    "LightMeter/.gitignore": """
        *.iml
        .gradle
        /local.properties
        /.idea
        build
        /captures
        .externalNativeBuild
        .cxx
        local.properties
    """,
    "LightMeter/build.gradle.kts": """
        plugins {
            alias(libs.plugins.android.application) apply false
            alias(libs.plugins.jetbrains.kotlin.android) apply false
        }
    """,
    "LightMeter/gradle.properties": """
        org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
        android.useAndroidX=true
        kotlin.code.style=official
    """,
    # ê·¸ë˜ë“¤ ë²„ì „ -> 8.6 (ì•ˆì • ë²„ì „)
    "LightMeter/gradle/wrapper/gradle-wrapper.properties": """
        distributionBase=GRADLE_USER_HOME
        distributionPath=wrapper/dists
        distributionUrl=https\\://services.gradle.org/distributions/gradle-8.6-bin.zip
        zipStoreBase=GRADLE_USER_HOME
        zipStorePath=wrapper/dists
    """,
    "LightMeter/settings.gradle.kts": """
        pluginManagement {
            repositories {
                google()
                mavenCentral()
                gradlePluginPortal()
            }
        }
        dependencyResolutionManagement {
            repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
            repositories {
                google()
                mavenCentral()
            }
        }

        rootProject.name = "LightMeter"
        include(":app")
    """,
    "LightMeter/app/.gitignore": """
        /build
    """,
    "LightMeter/app/build.gradle.kts": """
        plugins {
            alias(libs.plugins.android.application)
            alias(libs.plugins.jetbrains.kotlin.android)
        }

        android {
            namespace = "com.example.lightmeter"
            compileSdk = 34

            defaultConfig {
                applicationId = "com.example.lightmeter"
                minSdk = 24
                targetSdk = 34
                versionCode = 1
                versionName = "1.0"

                testInstrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"
            }

            buildTypes {
                release {
                    isMinifyEnabled = false
                    proguardFiles(
                        getDefaultProguardFile("proguard-android-optimize.txt"),
                        "proguard-rules.pro"
                    )
                }
            }
            compileOptions {
                sourceCompatibility = JavaVersion.VERSION_1_8
                targetCompatibility = JavaVersion.VERSION_1_8
            }
            kotlinOptions {
                jvmTarget = "1.8"
            }
            buildFeatures {
                viewBinding = true
            }
        }

        dependencies {
            implementation(libs.androidx.core.ktx)
            implementation(libs.androidx.appcompat)
            implementation(libs.material)
            implementation(libs.androidx.constraintlayout)
            testImplementation(libs.junit)
            androidTestImplementation(libs.androidx.junit)
            androidTestImplementation(libs.androidx.espresso.core)
        }
    """,
    "LightMeter/app/proguard-rules.pro": "# Add project specific ProGuard rules here.",
    "LightMeter/app/src/main/AndroidManifest.xml": """
        <?xml version="1.0" encoding="utf-8"?>
        <manifest xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools">

            <application
                android:allowBackup="true"
                android:dataExtractionRules="@xml/data_extraction_rules"
                android:fullBackupContent="@xml/backup_rules"
                android:icon="@mipmap/ic_launcher"
                android:label="@string/app_name"
                android:roundIcon="@mipmap/ic_launcher_round"
                android:supportsRtl="true"
                android:theme="@style/Theme.LightMeter"
                tools:targetApi="31">
                <activity
                    android:name=".MainActivity"
                    android:exported="true">
                    <intent-filter>
                        <action android:name="android.intent.action.MAIN" />
                        <category android:name="android.intent.category.LAUNCHER" />
                    </intent-filter>
                </activity>
            </application>

        </manifest>
    """,
    "LightMeter/app/src/main/java/com/example/lightmeter/MainActivity.kt": """
        package com.example.lightmeter

        import android.content.Context
        import android.hardware.Sensor
        import android.hardware.SensorEvent
        import android.hardware.SensorEventListener
        import android.hardware.SensorManager
        import android.os.Bundle
        import androidx.appcompat.app.AppCompatActivity
        import com.example.lightmeter.databinding.ActivityMainBinding

        class MainActivity : AppCompatActivity(), SensorEventListener {

            private lateinit var binding: ActivityMainBinding
            private lateinit var sensorManager: SensorManager
            private var lightSensor: Sensor? = null

            override fun onCreate(savedInstanceState: Bundle?) {
                super.onCreate(savedInstanceState)
                binding = ActivityMainBinding.inflate(layoutInflater)
                setContentView(binding.root)

                sensorManager = getSystemService(Context.SENSOR_SERVICE) as SensorManager
                lightSensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT)

                if (lightSensor == null) {
                    binding.tvLuxValue.text = "ì¡°ë„ ì„¼ì„œ ì—†ìŒ"
                }
            }

            override fun onResume() {
                super.onResume()
                lightSensor?.let {
                    sensorManager.registerListener(this, it, SensorManager.SENSOR_DELAY_UI)
                }
            }

            override fun onPause() {
                super.onPause()
                sensorManager.unregisterListener(this)
            }

            override fun onSensorChanged(event: SensorEvent?) {
                if (event?.sensor?.type == Sensor.TYPE_LIGHT) {
                    val luxValue = event.values[0]
                    binding.tvLuxValue.text = "%.1f".format(luxValue)
                    binding.tvUnit.text = "lux"
                }
            }

            override fun onAccuracyChanged(sensor: Sensor?, accuracy: Int) {
                // Do nothing
            }
        }
    """,
    "LightMeter/app/src/main/res/layout/activity_main.xml": """
        <?xml version="1.0" encoding="utf-8"?>
        <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res-auto"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            tools:context=".MainActivity">

            <TextView
                android:id="@+id/tv_lux_value"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="-"
                android:textSize="80sp"
                android:textStyle="bold"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintVertical_bias="0.45" />

            <TextView
                android:id="@+id/tv_unit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="8dp"
                android:text="lux"
                android:textSize="24sp"
                app:layout_constraintEnd_toEndOf="@+id/tv_lux_value"
                app:layout_constraintStart_toStartOf="@+id/tv_lux_value"
                app:layout_constraintTop_toBottomOf="@+id/tv_lux_value" />

        </androidx.constraintlayout.widget.ConstraintLayout>
    """,
    "LightMeter/app/src/main/res/values/strings.xml": """
        <resources>
            <string name="app_name">LightMeter</string>
        </resources>
    """,
    "LightMeter/app/src/main/res/values/themes.xml": """
        <resources xmlns:tools="http://schemas.android.com/tools">
            <style name="Base.Theme.LightMeter" parent="Theme.Material3.DayNight.NoActionBar"></style>
            <style name="Theme.LightMeter" parent="Base.Theme.LightMeter" />
        </resources>
    """,
    "LightMeter/app/src/main/res/values/colors.xml": """
        <?xml version="1.0" encoding="utf-8"?>
        <resources>
            <color name="black">#FF000000</color>
            <color name="white">#FFFFFFFF</color>
        </resources>
    """,
    "LightMeter/app/src/main/res/xml/backup_rules.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?><full-backup-content></full-backup-content>",
    "LightMeter/app/src/main/res/xml/data_extraction_rules.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?><data-extraction-rules></data-extraction-rules>",
    # AGP ë²„ì „ -> 8.5.1 (ì•ˆì • ë²„ì „)
    "LightMeter/gradle/libs.versions.toml": """
        [versions]
        agp = "8.5.1"
        kotlin = "1.9.23"
        coreKtx = "1.13.1"
        junit = "4.13.2"
        junitVersion = "1.2.1"
        espressoCore = "3.6.1"
        appcompat = "1.7.0"
        material = "1.12.0"
        constraintlayout = "2.1.4"

        [libraries]
        androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
        junit = { group = "junit", name = "junit", version.ref = "junit" }
        androidx-junit = { group = "androidx.test.ext", name = "junit", version.ref = "junitVersion" }
        androidx-espresso-core = { group = "androidx.test.espresso", name = "espresso-core", version.ref = "espressoCore" }
        androidx-appcompat = { group = "androidx.appcompat", name = "appcompat", version.ref = "appcompat" }
        material = { group = "com.google.android.material", name = "material", version.ref = "material" }
        androidx-constraintlayout = { group = "androidx.constraintlayout", name = "constraintlayout", version.ref = "constraintlayout" }

        [plugins]
        android-application = { id = "com.android.application", version.ref = "agp" }
        jetbrains-kotlin-android = { id = "org.jetbrains.kotlin.android", version.ref = "kotlin" }
    """
}

def create_project():
    base_dir = "LightMeter"
    print(f"'{base_dir}' í”„ë¡œì íŠ¸ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤...")
    if not os.path.exists(base_dir):
        os.makedirs(base_dir)
    for file_path, content in project_files.items():
        directory = os.path.dirname(file_path)
        if not os.path.exists(directory):
            os.makedirs(directory)
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(textwrap.dedent(content).strip())
        print(f"  - ìƒì„± ì™„ë£Œ: {file_path}")
    print("\n'LightMeter' í”„ë¡œì íŠ¸ íŒŒì¼ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")

if __name__ == "__main__":
    create_project()
## ì¬ì‹œë„ ë°©ë²• (ê¼­ ìˆœì„œëŒ€ë¡œ!)
í´ë” ì‚­ì œ (ê°€ì¥ ì¤‘ìš”): ì´ì „ LightMeter í´ë”ë¥¼ ì™„ì „íˆ ì‚­ì œí•´ ì£¼ì„¸ìš”. ê¹¨ë—í•œ ìƒíƒœì—ì„œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.

ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰: ìœ„ì— ìˆëŠ” ìµœì¢… ì½”ë“œë¡œ create_lightmeter_project.py íŒŒì¼ì„ ë®ì–´ì“°ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”.

í”„ë¡œì íŠ¸ ì—´ê¸°: ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ì—ì„œ Openì„ ëˆŒëŸ¬ ìƒˆë¡œ ìƒì„±ëœ LightMeter í´ë”ë¥¼ ì—½ë‹ˆë‹¤.