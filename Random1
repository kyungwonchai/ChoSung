원 님, 일반 터미널에서 python app.py로 실행할 때는 잘 되던 코드가 **서비스(systemd)**로 돌릴 때 실패하는 이유는 크게 세 가지입니다.

디스플레이 부재: 서비스는 화면(모니터)이 없는 백그라운드 상태에서 실행됩니다. 브라우저가 창을 띄우려 하면 에러가 납니다.

경로 문제: 서비스는 실행 위치를 모르기 때문에 파일 경로와 파이썬 실행기 경로를 모두 절대 경로로 적어줘야 합니다.

권한 및 환경 변수: 브라우저(Chrome 등)는 보안상 root 권한으로 실행되는 것을 싫어하며, 특정 환경 변수가 필요합니다.

이를 해결하기 위해 경원 님의 환경에 맞춰 적용해야 할 핵심 단계를 정리해 드립니다.

1. 파이썬 코드 수정 (Headless 설정)
가장 먼저 해야 할 일은 브라우저를 **"창 없는 모드(Headless)"**로 실행하도록 코드를 고치는 것입니다. Selenium 기준 예시입니다.

Python

from selenium import webdriver
from selenium.webdriver.chrome.options import Options

options = Options()
# 핵심: 이 설정들이 있어야 서비스(백그라운드)에서 돌아갑니다.
options.add_argument("--headless=new") # 창 없이 실행
options.add_argument("--no-sandbox")   # 리눅스 환경 필수
options.add_argument("--disable-dev-shm-usage") # 메모리 부족 방지

driver = webdriver.Chrome(options=options)
# ... 이후 크롤링 로직
2. 절대 경로 확인
서비스 등록 파일( .service)을 만들기 전에 다음 두 가지 경로를 미리 메모해 두세요.

파이썬 실행기 경로: which python3 또는 가상환경 사용 시 가상환경경로/bin/python3

스크립트 파일 경로: app.py가 위치한 폴더의 전체 경로 (예: /home/kw/projects/my_scraper/app.py)

3. Systemd 서비스 파일 생성 및 설정
이제 우분투가 이 스크립트를 관리하도록 명세서를 작성합니다.

터미널에서 설정 파일을 엽니다: sudo nano /etc/systemd/system/scraper.service

아래 내용을 복사하여 넣되, 경로 부분만 경원 님의 환경에 맞게 수정하세요:

Ini, TOML

[Unit]
Description=My Web Scraper Service
After=network.target

[Service]
# 1. 경원 님의 우분투 계정명을 입력하세요.
User=kw 
# 2. app.py가 들어있는 폴더의 절대 경로입니다.
WorkingDirectory=/home/kw/projects/my_scraper
# 3. 파이썬 실행기 절대 경로와 파일 절대 경로를 나란히 적습니다.
ExecStart=/home/kw/my_clip_env/bin/python3 /home/kw/projects/my_scraper/app.py
# 실패 시 5초 후 자동 재시작
Restart=always
RestartSec=5
# 로그가 바로 보이도록 설정
Environment=PYTHONUNBUFFERED=1

[Install]
WantedBy=multi-user.target
4. 서비스 활성화 및 실행
파일을 저장(Ctrl+O, Enter, Ctrl+X)한 후 아래 명령어를 순서대로 입력합니다.

Bash

# 1. 시스템에 새로운 서비스 등록 알림
sudo systemctl daemon-reload

# 2. 부팅 시 자동 실행 설정
sudo systemctl enable scraper.service

# 3. 지금 바로 서비스 시작
sudo systemctl start scraper.service
5. 잘 돌아가는지 확인하는 법 (가장 중요)
서비스는 백그라운드에서 돌기 때문에 에러가 나도 화면에 보이지 않습니다. 아래 명령어로 로그를 실시간으로 확인하세요.

현재 상태 확인: systemctl status scraper.service

실시간 로그(Print 내용) 보기: journalctl -u scraper.service -f

💡 팁: 만약 로그에 Chrome failed to start 같은 에러가 찍힌다면, 우분투에 크롬 브라우저가 설치되어 있는지(google-chrome --version) 다시 한번 확인해 보세요.

경원 님, 혹시 현재 사용 중인 파이썬 가상환경 경로와 app.py가 있는 폴더 경로를 알려주실 수 있나요? 제가 바로 복사해서 쓸 수 있는 완성된 서비스 설정 코드를 만들어 드릴 수 있습니다.