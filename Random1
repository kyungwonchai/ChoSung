 CUBRID 데이터베이스에 접근하려고 할 때 "accessor is invalid" 오류가 발생하는 원인은 여러 가지가 있습니다. 아래 주요 원인을 확인하고 해결 방법을 적용해 보세요.

1. CUBRID 환경 변수 확인
CUBRID가 올바르게 설치되어 있는지 확인하고, 환경 변수를 설정하세요.

sh
코드 복사
export CUBRID=/usr/local/cubrid
export CUBRID_DATABASES=$CUBRID/databases
export PATH=$CUBRID/bin:$PATH
export LD_LIBRARY_PATH=$CUBRID/lib:$LD_LIBRARY_PATH
적용 후 cubrid service start를 다시 실행하세요.

2. CUBRID API 초기화 확인
C에서 CUBRID API를 사용할 때 cubrid_connect_with_url() 또는 cubrid_connect()가 정상적으로 호출되었는지 확인하세요.

✅ 잘못된 예시
c
코드 복사
int conn = cubrid_connect("localhost", 33000, "mydb", "user", "password");
if (conn == CCI_ER_INVALID_ACCESSOR)
{
    printf("Accessor is invalid\n");
}
여기서 cubrid_connect()는 더 이상 사용되지 않으며, **cubrid_connect_with_url()**을 사용해야 합니다.

✅ 올바른 예시
c
코드 복사
#include <stdio.h>
#include <stdlib.h>
#include <cubrid/cubrid.h>

int main() {
    int conn;
    T_CCI_ERROR error;
    
    conn = cci_connect_with_url("cci:cubrid:localhost:33000:mydb:::?", "user", "password", &error);
    
    if (conn < 0) {
        printf("Failed to connect: %s\n", error.err_msg);
        return 1;
    }

    printf("Connected successfully!\n");
    
    cci_disconnect(conn);
    return 0;
}
3. 데이터베이스 서비스 확인
cubrid service status를 실행하여 데이터베이스가 실행 중인지 확인하세요.

sh
코드 복사
cubrid service status
만약 실행 중이 아니라면, 아래 명령어로 시작하세요.

sh
코드 복사
cubrid service start
cubrid broker start
4. 접속 정보 확인
포트번호 확인: CUBRID 기본 포트는 33000이지만, 환경에 따라 다를 수 있습니다. cubrid.conf에서 확인하세요.
유효한 데이터베이스 사용 여부: cubrid service status로 mydb 데이터베이스가 존재하는지 확인하세요.
sh
코드 복사
cubrid createdb mydb en_US
cubrid server start mydb
5. Broker 재시작
Broker가 제대로 실행되지 않았다면, 재시작이 필요할 수 있습니다.

sh
코드 복사
cubrid broker stop
cubrid broker start
6. 라이브러리 경로 확인
C 프로그램이 실행될 때 CUBRID 라이브러리를 찾을 수 있도록 LD_LIBRARY_PATH를 설정하세요.

sh
코드 복사
export LD_LIBRARY_PATH=$CUBRID/lib:$LD_LIBRARY_PATH
7. 최신 CUBRID 클라이언트 설치
CUBRID 11.2 이상 버전을 사용하고 있는지 확인하세요. 최신 버전을 설치하려면:

sh
코드 복사
sudo apt update
sudo apt install cubrid
8. 데이터베이스 계정 확인
접속 시 사용하는 ID/PW가 정확한지 확인하세요.

sql
코드 복사
SELECT * FROM db_user;
잘못된 사용자 이름이나 비밀번호를 입력하면 accessor is invalid 오류가 발생할 수 있습니다.

🔥 최종 확인 체크리스트
✅ cubrid service status로 서비스가 실행 중인지 확인
✅ cubrid_connect_with_url()을 사용했는지 확인
✅ cubrid broker start 실행
✅ LD_LIBRARY_PATH가 올바르게 설정되었는지 확인
✅ user/password가 정확한지 확인