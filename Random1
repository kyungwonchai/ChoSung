using System;
using System.Data;
using System.Data.SqlClient;
using System.Text;
using System.Windows.Forms;

public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    private void GenerateXamlButton_Click(object sender, EventArgs e)
    {
        string connStr = "Data Source=YourServer;Initial Catalog=YourDatabase;User ID=YourUsername;Password=YourPassword";
        StringBuilder xamlBuilder = new StringBuilder();

        using (SqlConnection conn = new SqlConnection(connStr))
        {
            conn.Open();
            SqlCommand cmd = new SqlCommand("SELECT colname FROM [Table 권한정의]", conn);
            SqlDataReader reader = cmd.ExecuteReader();

            // XAML 시작
            xamlBuilder.AppendLine("<dxg:GridControl x:Name=\"gridControl\">");
            xamlBuilder.AppendLine("    <dxg:GridControl.View>");
            xamlBuilder.AppendLine("        <dxg:TableView x:Name=\"tableView\" AllowEditing=\"True\" />");
            xamlBuilder.AppendLine("    </dxg:GridControl.View>");
            
            // 컬럼 설정
            while (reader.Read())
            {
                string columnName = reader.GetString(0);
                xamlBuilder.AppendLine($"    <dxg:GridColumn FieldName=\"{columnName}\" Header=\"{columnName}\" />");
            }

            // XAML 종료
            xamlBuilder.AppendLine("</dxg:GridControl>");

            // XAML 코드를 텍스트 박스에 출력
            textBox1.Text = xamlBuilder.ToString();
        }
    }
}
