SSQL 2014에서 요청하신 작업은 TOP(20)의 가장 아래 값(A)을 구한 뒤, 그 값을 기준으로 테이블 b의 aa 컬럼 조건에 넣어 조회하는 쿼리입니다.

다음은 이 작업을 수행하는 SQL 쿼리 예제입니다:

sql
코드 복사
-- Step 1: 가장 아래 값(A)을 가져오기 위한 CTE 또는 서브쿼리
WITH TopValues AS (
    SELECT TOP(20) aa
    FROM TableA
    ORDER BY aa ASC -- 정렬 기준 (필요에 따라 변경 가능)
)
SELECT @A = MAX(aa) -- TOP(20)의 가장 아래 값
FROM TopValues;

-- Step 2: 변수 A를 기준으로 TableB 조회
SELECT *
FROM TableB
WHERE aa > @A;
상세 설명
TOP(20)로 가장 아래 값 구하기:

WITH TopValues는 CTE(Common Table Expression)로, TOP(20) 결과를 임시 테이블로 저장합니다.
ORDER BY를 통해 원하는 정렬 기준을 지정합니다.
MAX(aa)를 사용하여 TOP(20) 결과의 가장 큰 값을 가져옵니다. (작은 값을 가져오려면 MIN(aa)를 사용하세요.)
변수 @A를 기준으로 테이블 조회:

@A 변수에 저장된 값보다 큰 값을 조회합니다.
동적 변수 사용
만약 변수를 동적으로 선언해야 하는 경우, 아래와 같이 작성할 수 있습니다:

sql
코드 복사
-- 변수 선언
DECLARE @A INT;

-- Step 1: 가장 아래 값(A) 구하기
WITH TopValues AS (
    SELECT TOP(20) aa
    FROM TableA
    ORDER BY aa ASC
)
SELECT @A = MAX(aa)
FROM TopValues;

-- Step 2: 테이블 B 조회
SELECT *
FROM TableB
WHERE aa > @A;
추가 사항
정렬 기준: ORDER BY aa ASC 또는 DESC를 필요에 따라 수정하세요.