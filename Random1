 도커(Docker) 완벽 삭제 및 시스템 원상 복구 가이드
아래 과정은 도커 엔진, 설정, GPG 키, 저장소 목록, 데이터 등 모든 것을 제거합니다.

1단계: 실행 중인 도커 서비스 중지
먼저, 백그라운드에서 실행되고 있을 수 있는 모든 도커 관련 서비스를 중지합니다.

Bash

sudo systemctl stop docker.service
sudo systemctl stop docker.socket
2단계: 도커 관련 모든 패키지 '완전' 삭제 (Purge)
단순히 remove가 아니라, 설정 파일까지 모두 지우는 purge 명령어를 사용합니다. 이렇게 해야 찌꺼기 파일이 남지 않습니다.

Bash

# 도커 관련 공식/비공식, 신/구버전 패키지를 모두 대상으로 지정하여 삭제합니다.
sudo apt-get purge -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
sudo apt-get purge -y docker docker-engine docker.io runc
purge란? 패키지를 삭제할 뿐만 아니라, 시스템 전역에 설치된 관련 설정 파일까지 모두 삭제하는 강력한 옵션입니다.

3단계: 도커 데이터 및 디렉터리 수동 삭제
패키지를 지워도 도커 이미지, 컨테이너, 볼륨 등 사용하면서 생성된 데이터는 /var/lib/docker 경로에 그대로 남아있습니다. 이 폴더들을 직접 삭제해야 합니다.

Bash

sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
⚠️ 주의: rm -rf는 강력한 명령어이므로 경로를 정확히 입력했는지 다시 한번 확인하세요.

4단계: apt 저장소 목록 및 GPG 키 삭제
apt update 시 오류를 일으켰던 원인인 도커 전용 저장소 목록과 GPG 인증 키를 삭제합니다.

도커 저장소 목록 파일 삭제:

Bash

sudo rm /etc/apt/sources.list.d/docker.list
도커 GPG 키 파일 삭제 (최신 방식):

Bash

sudo rm /etc/apt/keyrings/docker.gpg
구형(Legacy) 방식 GPG 키 삭제 (만약 등록했다면):
apt-key list로 키 목록을 확인한 뒤, Docker 키가 보이면 해당 키 ID로 삭제합니다. (예: 키 ID가 0EBFCD88인 경우)

Bash

# 먼저 키 목록을 확인
apt-key list

# 목록에서 확인한 Docker 키 ID 마지막 8자리로 삭제
sudo apt-key del 0EBFCD88
(이전 대화에서 이 경고가 떴었으니, 확인 후 삭제하는 것이 좋습니다.)

5단계: 사내망 프록시(Proxy) 설정 원상 복구
이전 단계에서 사내망(bart) 접속을 위해 추가했던 프록시 설정들을 제거합니다. 이 설정들이 남아있으면 다른 인터넷 연결에 문제를 일으킬 수 있습니다.

apt 프록시 설정 파일 삭제:

Bash

sudo rm /etc/apt/apt.conf.d/proxy.conf
도커 데몬 프록시 설정 폴더 삭제:

Bash

sudo rm -rf /etc/systemd/system/docker.service.d
시스템 전역 프록시 환경 변수 설정 파일 삭제:
이 파일이 오직 도커 설치만을 위해 만드셨던 것이 확실하다면 삭제하세요.

Bash

sudo rm /etc/profile.d/proxy.sh
6단계: 최종 마무리 및 확인
모든 정리가 끝났습니다. 마지막으로 시스템을 정리하고 apt가 정상으로 돌아왔는지 확인합니다.

불필요한 의존성 패키지 자동 삭제:
도커가 설치될 때 함께 설치되었지만 이제는 필요 없어진 패키지들을 정리합니다.

Bash

sudo apt-get autoremove -y
apt 패키지 목록 다시 업데이트:
가장 중요한 확인 과정입니다. 이 명령어를 실행했을 때, 더 이상 도커(docker.com) 관련 오류나 GPG 키 경고가 나타나지 않아야 합니다.

Bash

sudo apt-get update
시스템 재부팅 (권장):
모든 변경 사항을 시스템에 완벽하게 적용하기 위해 재부팅을 한번 해주는 것이 가장 좋습니다.

Bash

sudo reboot
✅ 이제 사용자님의 우분투 시스템은 도커를 설치하기 이전의 아주 깨끗한 상태로 완벽하게 돌아왔습니다.

나중에 마음이 바뀌어 다시 도커를 설치하고 싶으시다면, 이 깨끗한 상태에서 이전에 알려드린 프록시 설정 가이드를 처음부터 차근차근 따라 하시면 성공적으로 설치하실 수 있을 겁니다.

