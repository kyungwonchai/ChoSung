하! 목적이 "10분마다 선택된 라인을 다시 선택하게 만들어서 데이터 갱신" 이군요!
즉, st.experimental_rerun()을 쓰면 선택된 값이 초기화되기 때문에 의도한 라인 유지가 안 된다는 거죠?

✅ 해결 전략
선택된 라인을 st.session_state에 저장
자동 새로고침할 때도 해당 값 유지
데이터만 갱신하고, UI 상태(선택된 항목)는 그대로 유지
예시 코드 (Drop-down 선택 라인을 유지하며 새로고침)
python
코드 복사
import streamlit as st
import time

# 페이지 설정
st.set_page_config(page_title="선택 유지 새로고침", layout="wide")

# 초기 선택 옵션
options = ["라인A", "라인B", "라인C"]

# 세션 상태에 선택 값 저장
if "selected_line" not in st.session_state:
    st.session_state.selected_line = options[0]

# 새로 선택 시 업데이트
selected = st.selectbox("라인을 선택하세요", options, index=options.index(st.session_state.selected_line))
st.session_state.selected_line = selected

# 선택된 값 표시
st.write(f"선택된 라인: {st.session_state.selected_line}")

# 마지막 새로고침 시간 저장
if "last_refresh_time" not in st.session_state:
    st.session_state.last_refresh_time = time.time()

# 새로고침 버튼
if st.button("수동 새로고침"):
    st.session_state.last_refresh_time = time.time()

# 자동 새로고침 조건 (10분 = 600초)
if time.time() - st.session_state.last_refresh_time > 600:
    st.session_state.last_refresh_time = time.time()
    # 여기에 실제 데이터 갱신 함수 호출
    st.experimental_rerun()

# 예시 데이터 출력 (여기서 DB나 파일 불러오기 등 가능)
st.write("데이터 갱신 시 출력될 내용입니다.")
핵심 포인트
selected_line 값을 세션 상태로 유지함
selectbox는 항상 st.session_state.selected_line에서 값을 읽고 씀
rerun()을 해도 선택된 값은 변하지 않음