import pandas as pd
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.metrics.pairwise import cosine_similarity
from Levenshtein import distance
import joblib

def preprocess_data(data):
    # 데이터 전처리 작업 수행
    preprocessed_data = ...

    return preprocessed_data

# 데이터베이스에서 데이터 추출
# 예시 데이터를 데이터프레임으로 가정하고 부품코드 컬럼이 있다고 가정합니다.
data = pd.read_sql_query("SELECT 부품코드 FROM 테이블명", connection)

# 데이터 전처리
preprocessed_data = preprocess_data(data['부품코드'])

# 벡터 변환
vectorizer = CountVectorizer()
parts_vector = vectorizer.fit_transform(preprocessed_data)

# 유사도 계산
similarity_matrix = cosine_similarity(parts_vector)

# 모델 저장
joblib.dump(vectorizer, 'vectorizer.pkl')
joblib.dump(similarity_matrix, 'similarity_matrix.pkl')
