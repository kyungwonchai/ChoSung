클릭 이벤트

새로고침 버튼을 클릭하면 d:\111 폴더 안의 폴더 목록을 listControl1에 표시합니다.

csharp

private void btnRefresh_Click(object sender, EventArgs e)
{
    string folderPath = @"d:\111";
    listControl1.Items.Clear();

    if (Directory.Exists(folderPath))
    {
        string[] directories = Directory.GetDirectories(folderPath);
        foreach (string directory in directories)
        {
            DirectoryInfo info = new DirectoryInfo(directory);
            string folderName = info.Name;

            if (DateTime.TryParseExact(folderName, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out _))
            {
                listControl1.Items.Add(folderName);
            }
        }
    }
}

2. listControl1 클릭 이벤트

listControl1을 클릭하면 선택된 폴더 안의 .mp4 파일 목록을 listControl2에 표시합니다.

csharp

private void listControl1_SelectedIndexChanged(object sender, EventArgs e)
{
    string folderPath = @"d:\111\" + listControl1.SelectedItem.ToString();
    listControl2.Items.Clear();

    if (Directory.Exists(folderPath))
    {
        string[] files = Directory.GetFiles(folderPath, "*.mp4");
        foreach (string file in files)
        {
            FileInfo info = new FileInfo(file);
            listControl2.Items.Add(info.Name);
        }
    }
}

이렇게 하면, "새로고침" 버튼을 클릭할 때 지정된 폴더의 폴더 목록이 listControl1에, listControl1에서 폴더를 선택하면 해당 폴더의 .mp4 파일 목록이 listControl2에 표시됩니다.

