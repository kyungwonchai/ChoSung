import bpy

# Lamp 설정: 'point.001' 객체를 선택
lamp = bpy.data.objects.get("point.001")
if lamp is None:
    raise ValueError("Lamp object 'point.001' not found.")

# 타임라인을 0~120 프레임으로 설정 (각 변을 따라 이동하는데 30프레임씩 할당)
bpy.context.scene.frame_start = 0
bpy.context.scene.frame_end = 120

# (1) 시작 위치에서 x 방향으로 이동
lamp.location.x = -2
lamp.location.y = 0.6
lamp.keyframe_insert(data_path="location", frame=0)

# (2) x=30으로 이동 (y 고정)
lamp.location.x = 30
lamp.keyframe_insert(data_path="location", frame=30)

# (3) y=-7로 내려감 (x 고정)
lamp.location.y = -7
lamp.keyframe_insert(data_path="location", frame=60)

# (4) x=-2로 좌측으로 이동 (y 고정)
lamp.location.x = -2
lamp.keyframe_insert(data_path="location", frame=90)

# (5) y=0.6로 올라감 (x 고정)
lamp.location.y = 0.6
lamp.keyframe_insert(data_path="location", frame=120)

# 투명 배경 설정
bpy.context.scene.render.image_settings.file_format = 'PNG'
bpy.context.scene.render.image_settings.color_mode = 'RGBA'
bpy.context.scene.render.film_transparent = True

# 출력 경로 설정 (예: "C:/temp/frames/")
bpy.context.scene.render.filepath = "C:/temp/frames/frame_"

# 애니메이션 렌더링
bpy.ops.render.render(animation=True)

# ImageMagick을 사용해 PNG 시퀀스를 GIF로 변환
# ImageMagick 설치 후 터미널에서:
# convert -delay 5 -loop 0 C:/temp/frames/*.png C:/temp/animation.gif
