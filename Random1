조건에 맞는 행을 선택하는 쿼리를 작성하고, 해당 행을 삭제하는 쿼리를 작성한 후, 이를 이벤트로 등록하는 과정을 설명하겠습니다.

조건에 맞는 행을 선택하는 쿼리
먼저, 조건에 맞는 행을 선택하는 쿼리는 다음과 같습니다:

sql
코드 복사
SELECT *
FROM smd.ft_2d_archive
WHERE machine = 1
  AND ftsite = '0,0'
  AND barcode = 'machine2';
해당 행을 삭제하는 쿼리
선택된 행을 삭제하는 쿼리는 다음과 같습니다:

sql
코드 복사
DELETE FROM smd.ft_2d_archive
WHERE machine = 1
  AND ftsite = '0,0'
  AND barcode = 'machine2';
이벤트 등록
MySQL 이벤트 스케줄러를 사용하여 위의 삭제 쿼리를 주기적으로 실행하도록 이벤트를 등록할 수 있습니다. 이벤트를 등록하기 전에 이벤트 스케줄러가 활성화되어 있는지 확인해야 합니다:

sql
코드 복사
-- 이벤트 스케줄러 활성화
SET GLOBAL event_scheduler = ON;
다음은 이벤트를 등록하는 쿼리입니다:

sql
코드 복사
CREATE EVENT delete_specific_rows
ON SCHEDULE EVERY 1 DAY -- 하루에 한 번 실행
DO
BEGIN
    DELETE FROM smd.ft_2d_archive
    WHERE machine = 1
      AND ftsite = '0,0'
      AND barcode = 'machine2';
END;
이 쿼리는 delete_specific_rows라는 이벤트를 생성하여 매일 한 번씩 지정된 조건에 맞는 행을 삭제하도록 합니다.

전체 스크립트
위의 모든 단계를 하나의 스크립트로 정리하면 다음과 같습니다:

sql
코드 복사
-- 이벤트 스케줄러 활성화
SET GLOBAL event_scheduler = ON;

-- 조건에 맞는 행을 선택하는 쿼리
SELECT *
FROM smd.ft_2d_archive
WHERE machine = 1
  AND ftsite = '0,0'
  AND barcode = 'machine2';

-- 조건에 맞는 행을 삭제하는 이벤트 등록
CREATE EVENT delete_specific_rows
ON SCHEDULE EVERY 1 DAY -- 하루에 한 번 실행
DO
BEGIN
    DELETE FROM smd.ft_2d_archive
    WHERE machine = 1
      AND ftsite = '0,0'
      AND barcode = 'machine2';
END;
이 스크립트를 실행하면 MySQL에서 주기적으로 조건에 맞는 행