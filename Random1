<!DOCTYPE html>
<html>
<head>
    <title>Part Similarity Search</title>
    <style>
        /* 표의 테두리 스타일 설정 */
        table {
            border-collapse: collapse;
            width: 100%;
        }

        /* 셀의 테두리 스타일 설정 */
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        /* 표 헤더의 배경색 설정 */
        th {
            background-color: #add8e6;
        }

        /* 유사도가 90% 이상인 행의 배경색 설정 */
        .high-similarity {
            background-color: #b9e6c2;
        }
    </style>
    <script>
        // 페이지 로드가 완료되면 실행
        window.onload = function() {
            // 부품 코드와 테이블의 업체PN 간에 공통 문자를 찾고 빨간색으로 표시
            var part_code = "{{ part_code }}";
            var cells = document.querySelectorAll('td:nth-child(1)');  // 첫 번째 열 (업체PN) 선택
            for (var i = 0; i < cells.length; i++) {
                var cell_text = cells[i].textContent;
                var new_text = '';
                for (var j = 0; j < cell_text.length; j++) {
                    if (part_code.includes(cell_text[j])) {
                        new_text += '<span style="color:red;">' + cell_text[j] + '</span>';
                    } else {
                        new_text += cell_text[j];
                    }
                }
                cells[i].innerHTML = new_text;
            }

            // 유사도가 90% 이상인 행의 배경색 설정
            var rows = document.querySelectorAll('tr');
            for (var i = 1; i < rows.length; i++) {
                var similarity = parseFloat("{{ similarities[i-1] }}");
                if (similarity >= 0.9) {
                    rows[i].classList.add("high-similarity");
                }
            }
        }
    </script>
</head>
<body>
    <h1>Part Similarity Search</h1>

    <!-- 검색 양식 -->
    <form method="POST">
        <label for="part_code">Part Code:</label><br>
        <input type="text" id="part_code" name="part_code" required style="width: 100%"><br>
        <input type="submit" value="검색">
    </form>

    <!-- 검색 결과 -->
    {% if part_code %}
        <h2>Similar parts for: {{ part_code }}</h2>
        <table>
            <tr>
                <th>업체PN</th>
                <th>부품코드</th>
                <th>업체명</th>
                <th>유사도</th>
            </tr>
            {% for row, similarity in zip(similar_parts, similarities) %}
                <tr>
                    <td>{{ row
