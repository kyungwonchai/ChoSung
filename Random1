ows XP 에서 Ubuntu의 Samba 공유 폴더에 접근할 수 있도록 설정하고 싶으신 거죠?

✅ 문제의 원인:
Windows XP는 기본적으로 SMB1 프로토콜만 지원합니다.

Ubuntu는 보안 문제 때문에 SMB1을 사용하지 않도록 설정되어 있습니다.

Windows XP의 인증 방식 (LAN Manager 인증 수준) 문제일 수 있습니다.

✅ 1. Ubuntu Samba 설정 변경하기 (SMB1 활성화하기)
🔥 1.1 설정 파일 열기 (/etc/samba/smb.conf)
bash
코드 복사
sudo nano /etc/samba/smb.conf
🔥 1.2 설정 수정하기 (SMB1 활성화)
ini
코드 복사
[global]
   workgroup = WORKGROUP
   server string = Samba Server %v
   netbios name = ubuntu
   security = user
   map to guest = never
   smb ports = 445 139
   client min protocol = NT1      # SMB1 활성화 (Windows XP 접근 허용)
   server min protocol = NT1      # SMB1 활성화 (Windows XP 접근 허용)
   ntlm auth = yes                # NTLM 인증 허용 (Windows XP 호환)
   lanman auth = yes              # LANMAN 인증 허용 (Windows XP 호환)
   raw NTLMv2 auth = yes          # NTLMv2 인증 허용
🔥 1.3 공유 폴더 설정 추가하기 (예시)
ini
코드 복사
[shared]
   path = /home/kw/shared
   browseable = yes
   read only = no
   writable = yes
   valid users = kw kwkw
   guest ok = no
   force user = kw
🔥 1.4 설정 테스트 및 적용하기
bash
코드 복사
testparm
오류가 없어야 합니다.

bash
코드 복사
sudo systemctl restart smbd
sudo systemctl restart nmbd
✅ 2. Windows XP 설정 변경하기 (LAN Manager 인증 수준 변경)
2.1 Windows XP의 보안 정책 설정 변경하기
Win + R 키 입력 > secpol.msc 실행 (또는 gpedit.msc 실행).

로컬 정책 > 보안 옵션 > 네트워크 보안: LAN 관리자 인증 수준 설정 (Network security: LAN Manager Authentication Level)

값을 다음으로 변경: LM 및 NTLM 보내기 - NTLMv2 세션 보안 사용하지 않음 (Send LM & NTLM - use NTLMv2 session security if negotiated)

2.2 Windows XP의 레지스트리 수정하기 (필수)
만약 secpol.msc 가 없으면 레지스트리를 수정합니다.

cmd
코드 복사
regedit
경로:

sql
코드 복사
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa
새로운 값 추가:

이름: LmCompatibilityLevel

유형: REG_DWORD

값: 1 (0x1)

✅ 3. Windows XP 접근 방법 (확인)
3.1 파일 탐색기에서 접근하기
php-template
코드 복사
\\<Ubuntu_IP>\shared
예시:

vbnet
코드 복사
\\192.168.0.10\shared
3.2 CMD에서 접근하기 (확인용)
cmd
코드 복사
net use \\192.168.0.10\shared /user:kw yourpassword
✅ 4. 문제 발생 시 확인하기
🔥 Ubuntu에서 Samba 설정 확인 (테스트 완료 확인)
bash
코드 복사
testparm
🔥 Ubuntu에서 Samba 로그 확인하기
bash
코드 복사
sudo tail -f /var/log/samba/log.smbd
✅ 5. 보안 주의사항 (중요)
Windows XP는 오래된 운영체제로 보안 취약점이 많습니다.
SMB1은 보안상 매우 취약하므로 사용하지 않는 것이 좋습니다.
하지만 Windows XP를 사용해야 한다면 이 방법이 필요합니다.

🔥 정리:
Ubuntu Samba 설정에서 SMB1 (NT1) 프로토콜 활성화 (client min protocol = NT1, server min protocol = NT1).

Windows XP의 보안 정책에서 LAN Manager 인증 수준을 낮춤 (LmCompatibilityLevel 설정).

공유 폴더 권한과 설정을 정확히 확인 (testparm, smbpasswd -a kw).
