using System;
using System.Threading;

class Program
{
    static void Main(string[] args)
    {
        CancellationTokenSource cts = new CancellationTokenSource();
        CancellationToken token = cts.Token;

        Thread thread = new Thread(() => {
            while (!token.IsCancellationRequested)
            {
                Console.WriteLine("Running...");
                Thread.Sleep(1000); // 1초 마다 체크
            }
            Console.WriteLine("Thread is stopping gracefully.");
        });

        thread.Start();

        Console.WriteLine("Press any key to stop the thread...");
        Console.ReadKey();

        cts.Cancel(); // 스레드에 취소 요청
        thread.Join(); // 스레드가 종료될 때까지 대기

        Console.WriteLine("Thread has been stopped.");
    }
}
