, 우분투에서 특정 포트만 열고 방화벽을 설정하는 방법과 현재 사용 중인 포트를 확인하는 방법을 알려드릴게요.

가장 간단하고 많이 사용하는 방법은 ufw와 netstat 또는 ss 명령어를 이용하는 것입니다.

현재 사용 중인 네트워크 포트 확인하기
터미널에서 다음 명령어 중 하나를 입력하면 현재 시스템에서 사용 중인 포트 목록을 확인할 수 있습니다.

ss 명령어 사용 (더 빠르고 최신 방법)

Bash

sudo ss -tuln
netstat 명령어 사용 (전통적인 방법)

Bash

sudo netstat -tuln
각 옵션의 의미는 다음과 같습니다:

-t: TCP 포트 표시

-u: UDP 포트 표시

-l: 연결 대기(LISTEN) 상태인 포트만 표시

-n: 호스트 이름이나 서비스 이름 대신 숫자(포트 번호)로 표시

-p: 해당 포트를 사용하는 프로세스(프로그램) 이름 표시 (필요시 추가)

위 명령어를 실행하면 Local Address:Port 부분에서 현재 어떤 포트들이 열려 있는지 확인할 수 있습니다.

ufw 방화벽으로 특정 포트만 개방하기
ufw (Uncomplicated Firewall)는 우분투의 기본 방화벽 관리 도구로, 사용법이 매우 간단합니다.

1. ufw 설치 확인 및 비활성화 상태 확인

대부분의 우분투에 기본 설치되어 있습니다. 아래 명령어로 상태를 확인합니다.

Bash

sudo ufw status
아마 "Status: inactive" (비활성) 상태일 것입니다.

2. 기본 정책 설정 (가장 중요!)

외부에서 들어오는 모든 연결은 기본적으로 차단하고, 허용한 포트만 열리도록 설정합니다.

Bash

sudo ufw default deny incoming
sudo ufw default allow outgoing
deny incoming: 외부에서 서버로 들어오는 모든 접속을 기본적으로 차단합니다.

allow outgoing: 서버 내부에서 외부로 나가는 모든 접속은 허용합니다.

3. 특정 포트 허용

이제 개방하고 싶은 특정 포트를 허용 규칙에 추가합니다. 예를 들어, SSH (22번), HTTP (80번), HTTPS (443번) 포트를 열어보겠습니다.

Bash

# SSH 포트 허용 (원격 접속을 위해 필수)
sudo ufw allow 22/tcp

# HTTP 웹 서버 포트 허용
sudo ufw allow 80/tcp

# HTTPS 웹 서버 포트 허용
sudo ufw allow 443/tcp

# 특정 IP 주소에서의 모든 접속을 허용할 경우
# sudo ufw allow from [IP_주소]
4. 방화벽 활성화

설정이 완료되면 방화벽을 활성화합니다. 활성화 시점에 기존 SSH 연결이 끊어질 수 있다는 경고가 나타나지만, 22번 포트를 미리 열어두었기 때문에 괜찮습니다.

Bash

sudo ufw enable
"Firewall is active and enabled on system startup" 메시지가 나타나면 성공입니다.

5. 최종 설정 확인

마지막으로 방화벽 상태와 적용된 규칙을 다시 확인합니다.

Bash

sudo ufw status verbose
Status: active 와 함께 허용한 포트 목록(ALLOW IN)이 표시되면 정상적으로 설정된 것입니다.

