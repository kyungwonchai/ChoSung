using System;
using System.IO;
using System.Net.Http;
using System.Net.Http.Headers;

// ...

string apiUrl = "https://example.com/api/endpoint"; // API 엔드포인트 URL
string[] filePaths = new string[] { "file1.txt", "file2.jpg", "file3.pdf" }; // 첨부할 파일 경로 배열

HttpClient client = new HttpClient();
MultipartFormDataContent content = new MultipartFormDataContent();

foreach (string filePath in filePaths)
{
    var fileContent = new ByteArrayContent(File.ReadAllBytes(filePath));
    fileContent.Headers.ContentType = MediaTypeHeaderValue.Parse("application/octet-stream");
    content.Add(fileContent, "attachments", Path.GetFileName(filePath));
}

HttpResponseMessage response = client.PostAsync(apiUrl, content).Result;

if (response.IsSuccessStatusCode)
{
    Console.WriteLine("파일 첨부 성공");
}
else
{
    Console.WriteLine("파일 첨부 실패");
}
