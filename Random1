알겠습니다. no valid OpenPGP data found 오류는 curl 명령이 Docker의 GPG 키 파일을 제대로 다운로드하지 못했거나, 다운로드한 파일의 내용이 비어있거나 깨져서 gpg가 유효한 키로 인식하지 못할 때 발생합니다. 🔑

네트워크 문제나 일시적인 서버 오류일 가능성이 높습니다. 아래의 해결 방법들을 순서대로 시도해 보세요.

해결 방법 1: curl 명령어에 -v 옵션 추가하여 상세 정보 확인
가장 먼저, 명령어 실행 시 어떤 과정에서 문제가 발생하는지 상세하게 확인해 보는 것이 좋습니다.

Bash

curl -vfsSL https://download.docker.com/linux/ubuntu/gpg
이 명령어를 실행했을 때, Trying [IP 주소]..., Connected to download.docker.com..., SSL certificate verify ok. 와 같은 메시지들이 정상적으로 출력되는지 확인해 보세요. 만약 연결 자체에 실패하거나 SSL/TLS 핸드셰이크 과정에서 오류가 발생한다면, 방화벽이나 네트워크 설정 문제일 수 있습니다.

해결 방법 2: GPG 키를 파일로 먼저 다운로드 후 추가 (가장 확실한 방법)
네트워크가 불안정할 경우, 파이프(|)로 직접 넘기는 대신 파일을 먼저 다운로드하고, 그 파일이 정상적인지 확인한 후 시스템에 추가하는 것이 더 안정적입니다.

1. GPG 키를 docker.gpg 파일로 다운로드합니다.

Bash

curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o docker.gpg
2. 다운로드된 파일의 내용을 확인합니다.
파일이 비어있지 않은지, 깨진 문자가 없는지 확인합니다. 아래 명령어로 파일 내용을 볼 수 있습니다.

Bash

cat docker.gpg
📝 내용이 깨져 보이거나 아무것도 출력되지 않는다면, 1번 과정을 다시 시도하거나 네트워크 환경을 점검해야 합니다.

3. 다운로드한 키 파일을 키링 위치로 복사합니다.
gpg --dearmor를 사용하는 대신, 파일을 직접 올바른 위치로 옮깁니다.

Bash

sudo install -o root -g root -m 644 docker.gpg /etc/apt/keyrings/
4. Docker 저장소를 새로 설정합니다.
이번에는 키 파일의 위치를 /etc/apt/keyrings/docker.gpg로 명확하게 지정해 줍니다.

Bash

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
참고: $(lsb_release -cs) 대신 $(. /etc/os-release && echo "$VERSION_CODENAME")을 사용하여 우분투 버전 코드를 가져오는 더 안정적인 방법입니다.

최종 확인
위 과정을 마친 후, 다시 패키지 목록을 업데이트하여 문제가 해결되었는지 확인합니다.

Bash

sudo apt update
이제 오류 없이 정상적으로 apt update가 실행될 것입니다. 만약 그래도 문제가 발생한다면, 회사나 학교 네트워크 등에서 특정 외부 접속을 차단하는 방화벽이 있는지 확인해 보시는 것이 좋습니다.