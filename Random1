using System;
using System.IO;

namespace BackupApplication
{
    public class CleanupManager
    {
        public void CleanupBackupFolder(string folderPath)
        {
            // 폴더가 존재하는지 확인
            if (!Directory.Exists(folderPath))
            {
                Console.WriteLine($"폴더 '{folderPath}'가 존재하지 않습니다.");
                return;
            }

            // 폴더 내의 파일 목록 가져오기
            string[] files = Directory.GetFiles(folderPath);

            foreach (string file in files)
            {
                FileInfo fileInfo = new FileInfo(file);

                // 파일이 생성된 후 3일이 지났으면 삭제
                if (DateTime.Now - fileInfo.CreationTime > TimeSpan.FromDays(3))
                {
                    File.Delete(file);
                    Console.WriteLine($"파일 '{file}'이(가) 삭제되었습니다.");
                }
            }

            // 폴더가 비어있으면 폴더 삭제
            if (Directory.GetFiles(folderPath).Length == 0 && Directory.GetDirectories(folderPath).Length == 0)
            {
                Directory.Delete(folderPath);
                Console.WriteLine($"폴더 '{folderPath}'가 삭제되었습니다.");
            }
        }
    }
}
