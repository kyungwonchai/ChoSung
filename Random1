장 앞에 - 문자가 있는 값을 조회하려면 문자열의 첫 번째 문자가 -인지 확인하는 조건을 추가해야 합니다. 이를 위해 LIKE 연산자를 사용할 수 있습니다.

업데이트 쿼리는 다음과 같습니다:

업데이트 쿼리:

sql
코드 복사
UPDATE smd.tbl_history
SET gatherok = 1
WHERE flow)mch LIKE '-%'
  AND CAST(NULLIF(SUBSTRING_INDEX(flow)mch, ':', 1), '') AS UNSIGNED) >= 5;
이 작업을 10분마다 실행하기 위해 MySQL 이벤트 스케줄러를 사용할 수 있습니다:

먼저 MySQL 이벤트 스케줄러를 활성화합니다:

sql
코드 복사
SET GLOBAL event_scheduler = ON;
그런 다음, 이벤트를 생성합니다:

sql
코드 복사
CREATE EVENT update_gatherok_event
ON SCHEDULE EVERY 10 MINUTE
DO
  UPDATE smd.tbl_history
  SET gatherok = 1
  WHERE flow)mch LIKE '-%'
    AND CAST(NULLIF(SUBSTRING_INDEX(flow)mch, ':', 1), '') AS UNSIGNED) >= 5;
이 쿼리는 flow)mch 열의 값이 - 문자로 시작하는 경우에만 조건을 검사하여 해당 레코드의 gatherok 값을 1로 업데이트합니다. LIKE '-%' 조건이 가장 앞에 - 문자가 있는 값을 필터링하는 데 사용됩