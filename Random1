import bpy

# 모든 기존 객체 삭제
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete(use_global=False)

# 정사각형 박스 생성
bpy.ops.mesh.primitive_cube_add(size=2)
box = bpy.context.object
box.name = "MGSPBox"

# MGSP 텍스트 생성
bpy.ops.object.text_add(enter_editmode=False, align='WORLD', location=(0, 0, 1.1))
text_obj = bpy.context.object
text_obj.name = "MGSPText"
text_obj.data.body = "MGSP"

# 텍스트를 박스에 각인시키기 위해 텍스트 깊이를 설정하고 위치 조정
text_obj.data.extrude = 0.1
text_obj.location = (-0.8, -0.6, 1.1)
text_obj.rotation_euler = (0, 0, 0)

# 텍스트를 박스의 조각처럼 변환
bpy.context.view_layer.objects.active = box
bpy.ops.object.modifier_add(type='BOOLEAN')
box.modifiers["Boolean"].operation = 'DIFFERENCE'
box.modifiers["Boolean"].object = text_obj

# 텍스트 각인 적용 후 텍스트 객체 삭제
bpy.ops.object.modifier_apply(modifier="Boolean")
bpy.data.objects.remove(text_obj, do_unlink=True)

# 재질 추가 및 설정
material = bpy.data.materials.new(name="BlueGemMaterial")
material.use_nodes = True
nodes = material.node_tree.nodes
nodes["Principled BSDF"].inputs['Base Color'].default_value = (0.0, 0.1, 1.0, 1.0)  # 푸른 보석 색상
nodes["Principled BSDF"].inputs['Roughness'].default_value = 0.2
nodes["Principled BSDF"].inputs['Metallic'].default_value = 0.8
box.data.materials.append(material)

# 카메라 생성 및 설정
bpy.ops.object.camera_add(location=(0, -5, 1), rotation=(1.57, 0, 0))
camera = bpy.context.object
camera.data.lens = 35
camera.data.clip_end = 1000

# 카메라가 박스를 90% 가량 채우도록 맞춤
bpy.context.scene.camera = camera

# 배경 투명 설정
bpy.context.scene.render.film_transparent = True

# 렌더링 설정
bpy.context.scene.render.image_settings.file_format = 'PNG'
bpy.context.scene.render.filepath = "//MGSP_Engraved_Box.png"

# 렌더링 실행
bpy.ops.render.render(write_still=True)
