<dx:ThemedWindow
    x:Class="LockerManagementApp.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
    xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
    xmlns:local="clr-namespace:LockerManagementApp.Views"
    xmlns:viewmodels="clr-namespace:LockerManagementApp.ViewModels"
    xmlns:models="clr-namespace:LockerManagementApp.Models"
    Title="ì‚¬ë¬¼í•¨ ê´€ë¦¬ í”„ë¡œê·¸ëž¨ (DevExpress MVVM - .NET 8)" Height="700" Width="1200"
    >
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <RowDefinition Height="*"/>    <RowDefinition Height="Auto"/> </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="LightGray" Padding="5"> <StackPanel Orientation="Horizontal">
                <Button Content="ðŸ”„ ë¡œë“œ/ìƒˆë¡œê³ ì¹¨" Margin="3" Command="{Binding LoadDataCommand}" ToolTip="ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìµœì‹  ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤."/>
                <Button Content="ðŸ’¾ ë³€ê²½ ì‚¬í•­ ì €ìž¥" Margin="3" Command="{Binding SaveChangesCommand}" ToolTip="ê·¸ë¦¬ë“œì—ì„œ ë³€ê²½ëœ ë‚´ìš©ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥í•©ë‹ˆë‹¤."/>
                <Button Content="âž• ìƒˆ ì‚¬ë¬¼í•¨ ì¶”ê°€" Margin="3" Command="{Binding AddNewCommand}" ToolTip="ìƒˆë¡œìš´ ì‚¬ë¬¼í•¨ ì •ë³´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤ (ìƒˆ í–‰ì´ ì¶”ê°€ë˜ë©° ì§ì ‘ íŽ¸ì§‘)."/>
                <Button Content="âŒ ì„ íƒ í•­ëª© ì‚­ì œ" Margin="3" Command="{Binding DeleteCommand}" ToolTip="ì„ íƒëœ ì‚¬ë¬¼í•¨ ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚­ì œí•©ë‹ˆë‹¤."/>
                <Button Content="ðŸ§¹ ë°°ì • í•´ì œ" Margin="3,3,15,3" Command="{Binding ClearAssignmentCommand}" ToolTip="ì„ íƒëœ ì‚¬ë¬¼í•¨ì˜ ì‚¬ìš©ìž ë°°ì • ì •ë³´(ì´ë¦„, ID ë“±)ë¥¼ ì œê±°í•©ë‹ˆë‹¤."/>
            </StackPanel>
        </Border>

        <dxg:GridControl Grid.Row="1"
                         ItemsSource="{Binding LockerAssignments}"
                         SelectedItem="{Binding SelectedAssignment, Mode=TwoWay}"
                         AutoGenerateColumns="None"
                         EnableSmartColumnsGeneration="False"
                         SelectionMode="Row"
                         >
            <dxg:GridControl.View>
                <dxg:TableView AllowPerPixelScrolling="True"
                               ShowTotalSummary="False"
                               ShowGroupPanel="True"
                               AllowEditing="True"
                               NavigationStyle="Cell"
                               ShowAutoFilterRow="True"
                               NewItemRowPosition="None"
                               ShowIndicator="True"
                               ShowSearchPanelMode="Always"
                               ShowSearchPanelFindButton="True"
                               ShowSearchPanelCloseButton="True"
                               SearchPanelHighlightResults="True"
                               >
                     <dxg:TableView.RowCellMenuCustomizations>
                         <dxb:BarButtonItem Content="ì„ íƒ í•­ëª© ë°°ì • í•´ì œ"
                                            Command="{Binding View.DataContext.ClearAssignmentCommand}"
                                            Glyph="{dx:DXImage Svg/Actions/DeleteList.svg}"/>
                         <dxb:BarItemSeparator/>
                         <dxb:BarButtonItem Content="ì„ íƒ í–‰ ì‚­ì œ"
                                            Command="{Binding View.DataContext.DeleteCommand}"
                                            Glyph="{dx:DXImage Svg/Actions/Delete.svg}"/>
                     </dxg:TableView.RowCellMenuCustomizations>
                </dxg:TableView>
            </dxg:GridControl.View>

            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="LockerType" Header="ì¢…ë¥˜" Width="100" Fixed="Left">
                    <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.LockerTypes, RelativeSource={RelativeSource AncestorType={dx:ThemedWindow}}}"
                                                  IsTextEditable="False"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                 <dxg:GridColumn FieldName="Floor" Header="ì¸µ" Width="60">
                     <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.Floors, RelativeSource={RelativeSource AncestorType={dx:ThemedWindow}}}"
                                                  IsTextEditable="False"/>
                    </dxg:GridColumn.EditSettings>
                 </dxg:GridColumn>
                <dxg:GridColumn FieldName="Zone" Header="êµ¬ì—­" Width="80">
                     <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.Zones, RelativeSource={RelativeSource AncestorType={dx:ThemedWindow}}}"
                                                  IsTextEditable="True"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="SpecificLocation" Header="ì„¸ë¶€ ìœ„ì¹˜" Width="120"/>
                <dxg:GridColumn FieldName="UserName" Header="ì„±ëª…" Width="100"/>
                <dxg:GridColumn FieldName="KnoxId" Header="Knox ID" Width="100"/>
                <dxg:GridColumn FieldName="SubPart" Header="ì†ŒíŒŒíŠ¸" Width="120">
                     <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.SubParts, RelativeSource={RelativeSource AncestorType={dx:ThemedWindow}}}"
                                                  IsTextEditable="True"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                 <dxg:GridColumn FieldName="Administrator" Header="ê´€ë¦¬ ë‹´ë‹¹ìž" Width="120">
                      <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.Administrators, RelativeSource={RelativeSource AncestorType={dx:ThemedWindow}}}"
                                                  IsTextEditable="True"/>
                    </dxg:GridColumn.EditSettings>
                 </dxg:GridColumn>
                <dxg:GridColumn FieldName="LastUpdated" Header="ìµœì¢… ìˆ˜ì •ì¼ì‹œ" Width="150" AllowEditing="False" ReadOnly="True">
                     <dxg:GridColumn.EditSettings>
                        <dxe:DateEditSettings MaskType="DateTime" Mask="yyyy-MM-dd HH:mm:ss" MaskUseAsDisplayFormat="True"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="Id" Header="ID" Visible="False" ReadOnly="True"/>
            </dxg:GridControl.Columns>

        </dxg:GridControl>

        <StatusBar Grid.Row="2" Background="LightGray"> <StatusBarItem>
                <TextBlock Text="{Binding StatusBarText}" Margin="5,0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
