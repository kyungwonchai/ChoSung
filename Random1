from flask import Flask, render_template
import pymssql

app = Flask(__name__)

@app.route('/')
def index():
    # MSSQL 연결 설정
    conn = pymssql.connect(server='server_name',
                           user='username',
                           password='password',
                           database='database_name')

    try:
        # 데이터베이스에서 이미지 가져오기
        cursor = conn.cursor()
        query = "SELECT image1 FROM table1 ORDER BY d"
        cursor.execute(query)
        results = cursor.fetchall()

        # 이미지 데이터를 Flask 템플릿에 전달하여 렌더링
        return render_template('index.html', images=results)

    finally:
        # 연결 종료
        conn.close()

if __name__ == '__main__':
    app.run(port=5000)
