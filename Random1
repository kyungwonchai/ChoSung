PFì—ì„œ íŠ¹ì • TextEdit ì»¨íŠ¸ë¡¤ì´ í¬ì»¤ìŠ¤ë¥¼ ì ˆëŒ€ ìƒì§€ ì•Šë„ë¡ ë§Œë“¤ë ¤ë©´ ë‹¤ìŒ ë°©ë²•ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì–´ë–¤ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë‚˜ ìœˆë„ìš°ê°€ ë– ë„ ê°•ì œë¡œ TextEditì— í¬ì»¤ìŠ¤ë¥¼ ìœ ì§€í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.

1. í¬ì»¤ìŠ¤ ê°•ì œ ìœ ì§€
í¬ì»¤ìŠ¤ë¥¼ ì ˆëŒ€ ë‹¤ë¥¸ ê³³ì— ë¹¼ì•—ê¸°ì§€ ì•Šê²Œ í•˜ë ¤ë©´ LostFocus ì´ë²¤íŠ¸ì—ì„œ ë‹¤ì‹œ Focus()ë¥¼ ì£¼ë©´ ë©ë‹ˆë‹¤.

csharp
ì½”ë“œ ë³µì‚¬
private void MyTextEdit_LostFocus(object sender, RoutedEventArgs e)
{
    Dispatcher.BeginInvoke((Action)(() =>
    {
        MyTextEdit.Focus();
        Keyboard.Focus(MyTextEdit); // í‚¤ë³´ë“œ ì…ë ¥ë„ ìœ ì§€
    }), System.Windows.Threading.DispatcherPriority.Render);
}
Dispatcher.BeginInvokeë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ì„œ ê°•ì œë¡œ ë‹¤ì‹œ í¬ì»¤ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

2. ë‹¤ë¥¸ ì°½ì´ ë– ë„ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°
ì•Œë¦¼ ì°½ì´ë‚˜ íŒì—…ì´ ë– ë„ í¬ì»¤ìŠ¤ë¥¼ ë¹¼ì•—ê¸°ì§€ ì•Šìœ¼ë ¤ë©´, Window.Activated ì´ë²¤íŠ¸ì—ì„œ Focus()ë¥¼ ì¬ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

csharp
ì½”ë“œ ë³µì‚¬
private void Window_Activated(object sender, EventArgs e)
{
    Dispatcher.BeginInvoke((Action)(() =>
    {
        MyTextEdit.Focus();
        Keyboard.Focus(MyTextEdit);
    }), System.Windows.Threading.DispatcherPriority.Render);
}
ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ë¥¸ ì°½ì´ ë–´ë‹¤ê°€ ë‹¤ì‹œ ëŒì•„ì™€ë„ í•­ìƒ TextEditê°€ í™œì„±í™”ë©ë‹ˆë‹¤.

3. ì „ì—­ì ìœ¼ë¡œ í¬ì»¤ìŠ¤ ë°©ì§€
ì‚¬ìš©ìê°€ ì¼ë¶€ëŸ¬ í´ë¦­í•˜ì§€ ì•ŠëŠ” ì´ìƒ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ì„œë„ í¬ì»¤ìŠ¤ë¥¼ ëºê¸°ì§€ ì•Šê²Œ í•˜ë ¤ë©´, ìœˆë„ìš° ë©”ì‹œì§€ë¥¼ ê°€ë¡œì±„ëŠ” Low-Level Hookì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

csharp
ì½”ë“œ ë³µì‚¬
[DllImport("user32.dll")]
private static extern IntPtr SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hMod, uint dwThreadId);
[DllImport("user32.dll")]
private static extern bool UnhookWindowsHookEx(IntPtr hhk);
[DllImport("user32.dll")]
private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode, IntPtr wParam, IntPtr lParam);
[DllImport("kernel32.dll")]
private static extern IntPtr GetModuleHandle(string lpModuleName);

private const int WH_CBT = 5;
private const int HCBT_ACTIVATE = 5;
private static IntPtr _hookID = IntPtr.Zero;
private delegate IntPtr HookProc(int nCode, IntPtr wParam, IntPtr lParam);

private static IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
{
    if (nCode == HCBT_ACTIVATE)
    {
        // ë‹¤ë¥¸ ì°½ì´ í™œì„±í™”ë˜ëŠ” ê²ƒì„ ë§‰ìŒ
        return (IntPtr)1;
    }
    return CallNextHookEx(_hookID, nCode, wParam, lParam);
}

private static void SetHook()
{
    _hookID = SetWindowsHookEx(WH_CBT, HookCallback, GetModuleHandle(null), 0);
}

private static void RemoveHook()
{
    UnhookWindowsHookEx(_hookID);
}
ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì–´ë–¤ í”„ë¡œê·¸ë¨ë„ ë‚´ ìœˆë„ìš°ì˜ í¬ì»¤ìŠ¤ë¥¼ ëºì§€ ëª»í•˜ê²Œ ì°¨ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

âœ… ì ìš© ë°©ë²•

SetHook(); ì‹¤í–‰ â†’ í¬ì»¤ìŠ¤ë¥¼ ë¹¼ì•—ê¸°ì§€ ì•ŠìŒ.
RemoveHook(); ì‹¤í–‰ â†’ ì •ìƒì ìœ¼ë¡œ ë‹¤ë¥¸ ì°½ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.
4. ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì „í™˜ ìì²´ë¥¼ ë§‰ê¸°
í•œ ë²ˆ TextEditì— í¬ì»¤ìŠ¤ê°€ ê°€ë©´, Alt+Tabì´ë‚˜ ë‹¤ë¥¸ ì°½ í´ë¦­ìœ¼ë¡œ ì „í™˜ë˜ì§€ ì•Šê²Œ ë§‰ìœ¼ë ¤ë©´ ì•„ë˜ ì½”ë“œ ì¶”ê°€:

csharp
ì½”ë“œ ë³µì‚¬
protected override void OnActivated(EventArgs e)
{
    base.OnActivated(e);
    this.Topmost = true; // í•­ìƒ ìµœìƒìœ„ë¡œ ìœ ì§€
    MyTextEdit.Focus();
}
ì´ë ‡ê²Œ í•˜ë©´ í¬ì»¤ìŠ¤ë¥¼ ëºê¸°ì§€ ì•Šê³  í•­ìƒ ìœ ì§€ë©ë‹ˆë‹¤.

ğŸ“Œ ìµœì¢… ì •ë¦¬
1ï¸âƒ£ LostFocusì—ì„œ Focus()ë¥¼ ë‹¤ì‹œ í˜¸ì¶œ â†’ âœ… ìë™ í¬ì»¤ìŠ¤ ìœ ì§€
2ï¸âƒ£ Window.Activatedì—ì„œ TextEdit.Focus() ì‹¤í–‰ â†’ âœ… ì°½ì„ ë‹¤ì‹œ ì„ íƒí•´ë„ ìœ ì§€
3ï¸âƒ£ ìœˆë„ìš° ë©”ì‹œì§€ Hook (SetHook()) â†’ âœ… ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë„ í¬ì»¤ìŠ¤ë¥¼ ëª» ëºìŒ
4ï¸âƒ£ Topmost = true; ì„¤ì • â†’ âœ… Alt+Tab ì „í™˜ë„ ë§‰ìŒ