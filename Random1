using System;
using System.Data;

public void AddRowToDataTable()
{
    DataTable dt = new DataTable();
    dt.Columns.Add("Key", typeof(string));
    dt.Columns.Add("Value", typeof(string));

    // UniqueConstraint 추가
    UniqueConstraint uniqueConstraint = new UniqueConstraint("UniqueKey", dt.Columns["Key"]);
    dt.Constraints.Add(uniqueConstraint);

    // 행 추가
    try
    {
        DataRow row1 = dt.NewRow();
        row1["Key"] = "A";
        row1["Value"] = "Value1";
        dt.Rows.Add(row1);

        DataRow row2 = dt.NewRow();
        row2["Key"] = "A"; // 중복 키
        row2["Value"] = "Value2";
        dt.Rows.Add(row2); // 여기서 예외 발생
    }
    catch (ConstraintException ex)
    {
        Console.WriteLine("중복된 키로 인해 행을 추가할 수 없습니다: " + ex.Message);
    }
}
