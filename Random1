WinSCP에서 Ubuntu 원격지 파일을 수정할 때 한글이 깨져서 저장되는 문제는 대부분 인코딩 설정 불일치 때문에 발생합니다. 다음 몇 가지 해결 방법을 시도해 보세요.

1. WinSCP 편집기 인코딩 설정 변경 (가장 일반적인 해결책)

WinSCP는 파일을 편집할 때 내장 편집기를 사용하거나 외부 편집기를 사용하도록 설정할 수 있습니다.

WinSCP 내장 편집기 사용 시:

WinSCP를 실행하고 상단 메뉴에서 **옵션(Options) > 환경 설정(Preferences...)**으로 이동합니다.
왼쪽 패널에서 **편집기(Editor)**를 선택합니다.
오른쪽 설정에서 **기본 인코딩(Default encoding):**을 UTF-8로 변경합니다.
만약 "BOM 추가(Add BOM)" 옵션이 있다면, 필요에 따라 설정하거나 해제합니다. (보통 리눅스 환경에서는 BOM 없이 UTF-8을 선호합니다.)
**확인(OK)**을 눌러 저장합니다.
외부 편집기 (예: Notepad++, VS Code 등) 사용 시:

WinSCP 환경 설정의 **편집기(Editor)**에서 **외부 편집기 추가(Add...)**를 통해 사용하시는 편집기를 등록합니다.
해당 외부 편집기 자체의 기본 인코딩 설정을 UTF-8로 변경해야 합니다.
Notepad++: 상단 메뉴 > 설정 > 환경 설정 > 새 문서 > 인코딩 섹션에서 'UTF-8' 선택.
VS Code: 파일 > 기본 설정 > 설정 > 검색창에 'files.encoding' 검색 후 'utf8'로 설정.
2. WinSCP 세션 인코딩 설정 확인

WinSCP 세션 자체의 인코딩 설정도 중요합니다.

WinSCP 실행 후, 저장된 세션 목록에서 해당 Ubuntu 서버 세션을 선택하고 편집(Edit) 버튼을 누릅니다.
고급(Advanced...) 버튼을 클릭합니다.
왼쪽 트리에서 **환경(Environment)**을 선택합니다.
파일 이름 UTF-8 인코딩(UTF-8 encoding for filenames) 옵션을 켜짐(On) 또는 **자동(Auto)**으로 설정합니다. (주로 파일 이름 표시에 영향을 주지만, 간접적으로 연관될 수 있습니다.)
(선택 사항) 왼쪽 트리에서 연결(Connection) 아래에 터미널 또는 쉘 관련 인코딩 설정이 있다면 UTF-8로 설정합니다. 또는 환경(Environment) > SCP/Shell 항목에서 LANG 환경 변수를 설정하는 스크립트를 추가할 수도 있습니다 (예: export LANG=ko_KR.UTF-8). 하지만 보통 WinSCP의 UTF-8 설정으로 충분합니다.
**확인(OK)**을 누르고 세션을 저장합니다.
3. Ubuntu 서버 로케일(Locale) 설정 확인

서버 자체의 로케일 설정이 UTF-8로 되어 있는지 확인하는 것이 좋습니다.

WinSCP의 터미널 기능(Ctrl+T 또는 상단 아이콘)이나 PuTTY 등으로 Ubuntu 서버에 접속합니다.
다음 명령어를 입력하여 현재 로케일 설정을 확인합니다:
Bash

locale
출력 결과에서 LANG이나 LC_ALL, LC_CTYPE 등이 ko_KR.UTF-8 또는 en_US.UTF-8과 같이 .UTF-8로 끝나야 합니다.
만약 UTF-8로 되어있지 않다면, 다음과 같이 변경할 수 있습니다 (관리자 권한 필요):
Bash

sudo apt-get install language-pack-ko # 한국어 언어팩 설치 (필요시)
sudo locale-gen ko_KR.UTF-8
sudo dpkg-reconfigure locales
dpkg-reconfigure locales 실행 시 목록에서 ko_KR.UTF-8 UTF-8을 선택하고, 기본 로케일로도 ko_KR.UTF-8을 선택합니다. 변경 후에는 재부팅하거나 다시 로그인해야 적용될 수 있습니다. 또는 현재 세션에만 적용하려면 다음과 같이 할 수 있습니다:
Bash

export LANG=ko_KR.UTF-8
export LC_ALL=ko_KR.UTF-8
이 변경 사항을 영구적으로 적용하려면 ~/.bashrc 또는 /etc/environment 파일에 위 export 구문을 추가합니다.
4. 파일 자체의 기존 인코딩 확인

수정하려는 파일이 원래 어떤 인코딩으로 저장되어 있었는지 확인하는 것도 중요합니다. 만약 파일이 이미 EUC-KR과 같은 다른 인코딩으로 깨져있다면, UTF-8로 열고 저장해도 문제가 해결되지 않을 수 있습니다. 이 경우 파일 자체를 UTF-8로 변환하는 작업이 먼저 필요할 수 있습니다. (Ubuntu 서버에서 iconv 명령어 사용 등)

가장 먼저 1번 방법(WinSCP 편집기 인코딩 UTF-8 설정)을 시도해 보시고, 그래도 문제가 지속되면 2번, 3번 방법을 순서대로 확인해 보세요.