using System;
using System.Windows.Forms;

namespace DailyJobTrayApp
{
    public partial class MainForm : Form
    {
        private NotifyIcon notifyIcon;

        public MainForm()
        {
            InitializeComponent();
            InitializeTrayIcon();
        }

        private void InitializeTrayIcon()
        {
            // NotifyIcon 컨트롤을 생성합니다.
            notifyIcon = new NotifyIcon();
            notifyIcon.Icon = this.Icon;
            notifyIcon.Text = "DailyJobTrayApp";
            notifyIcon.Visible = true;

            // NotifyIcon 더블 클릭 이벤트를 등록하여 폼을 보이게 합니다.
            notifyIcon.DoubleClick += NotifyIcon_DoubleClick;
        }

        private void NotifyIcon_DoubleClick(object sender, EventArgs e)
        {
            // NotifyIcon 더블 클릭 시 폼을 보이게 합니다.
            this.Show();
            this.WindowState = FormWindowState.Normal;
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            // 폼 로드 시 트레이로 보냅니다.
            HideToTray();
        }

        private void HideToTray()
        {
            // 폼을 숨기고 작업 표시줄에 표시하지 않습니다.
            this.Hide();
        }

        private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
        {
            // 폼이 닫힐 때에도 작업 표시줄에 남지 않도록 합니다.
            e.Cancel = true;
            HideToTray();
        }
    }
}
