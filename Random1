using System;
using System.IO;

namespace DirectoryMonitor
{
    class Program
    {
        static void Main(string[] args)
        {
            string pathToMonitor = @"C:\path\to\monitor"; // 모니터링할 경로 설정

            FileSystemWatcher watcher = new FileSystemWatcher();
            watcher.Path = pathToMonitor;

            // 파일 이벤트에 대한 이벤트 핸들러 등록
            watcher.Created += OnChanged;
            watcher.Deleted += OnChanged;
            watcher.Changed += OnChanged;
            watcher.Renamed += OnRenamed;

            watcher.EnableRaisingEvents = true; // 이벤트 활성화

            Console.WriteLine("Press 'q' to quit the sample.");
            while (Console.Read() != 'q') ;
        }

        // 파일 변경, 생성, 삭제 이벤트 발생 시 호출될 메소드
        private static void OnChanged(object source, FileSystemEventArgs e)
        {
            Console.WriteLine($"File: {e.FullPath} {e.ChangeType}");
        }

        // 파일 이름 변경 이벤트 발생 시 호출될 메소드
        private static void OnRenamed(object source, RenamedEventArgs e)
        {
            Console.WriteLine($"File: {e.OldFullPath} renamed to {e.FullPath}");
        }
    }
}
