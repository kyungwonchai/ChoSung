using Microsoft.AspNetCore.SignalR.Client;
using System.Windows;

namespace WpfSignalRClient
{
    public partial class MainWindow : Window
    {
        HubConnection hubConnection;

        public MainWindow()
        {
            InitializeComponent();
            hubConnection = new HubConnectionBuilder()
                .WithUrl("http://yourServerAddress/edithub1")
                .Build();

            hubConnection.On<string, string, string>("ReceiveEditStatus1", (key1, username, column) =>
            {
                // 디버깅을 위한 코드
                MessageBox.Show($"Key1: {key1}, Username: {username}, Column: {column}");
                StatusLabel.Content = $"Received: {key1}";
            });
        }

        private async void Connect_Click(object sender, RoutedEventArgs e)
        {
            if (hubConnection.State == HubConnectionState.Disconnected)
            {
                await hubConnection.StartAsync();
                StatusLabel.Content = "Connected";
            }
            else
            {
                await hubConnection.StopAsync();
                StatusLabel.Content = "Disconnected";
            }
        }
    }
}
