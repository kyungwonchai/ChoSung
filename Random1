L에서 UserControl을 만들어 차트를 구성하고 이를 코드에서 동적으로 사용하는 방법은 유연성과 재사용성을 제공합니다. UserControl을 사용하면 XAML에서 차트의 레이아웃과 스타일을 미리 정의할 수 있으며, 코드에서는 이러한 UserControl을 인스턴스화하여 사용할 수 있습니다.

1. UserControl 정의하기
XAML에서 UserControl을 정의합니다. 이 UserControl은 DevExpress 차트를 포함합니다.

ChartUserControl.xaml

xml
Copy code
<UserControl x:Class="YourNamespace.ChartUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts">
    <Grid>
        <dxc:ChartControl x:Name="chartControl">
            <!-- 차트 관련 설정 및 스타일링 -->
        </dxc:ChartControl>
    </Grid>
</UserControl>
YourNamespace는 해당 UserControl이 위치한 네임스페이스입니다.

2. UserControl 코드 뒷면에 로직 추가하기
UserControl의 코드 뒷면에 차트를 구성하고 데이터를 설정하는 메서드를 추가합니다.

ChartUserControl.xaml.cs

csharp
Copy code
public partial class ChartUserControl : UserControl
{
    public ChartUserControl()
    {
        InitializeComponent();
    }

    public void SetupChart(ObservableCollection<ChartData> data, string line, string[] types)
    {
        foreach (var type in types)
        {
            var seriesData = data.Where(d => d.Line == line && d.Type == type).ToList();
            if (seriesData.Count == 0) continue;

            var series = new LineSeries2D
            {
                DisplayName = type,
                ArgumentScaleType = ScaleType.DateTime,
                ArgumentDataMember = "FileTime",
                ValueDataMember = "CTValue",
                DataSource = seriesData,
                // 다른 설정들...
            };

            chartControl.Diagram.Series.Add(series);
        }

        // 다른 차트 설정들...
    }
}
3. 메인 창에서 UserControl 사용하기
메인 창의 XAML에서 StackPanel 또는 다른 패널 안에 동적으로 UserControl 인스턴스를 추가합니다.

MainWindow.xaml.cs

csharp
Copy code
void CreateCharts()
{
    var data = FetchDataFromDatabase();
    var lines = data.Select(d => d.Line).Distinct().OrderBy(line => line);

    foreach (var line in lines)
    {
        var chartUserControl = new ChartUserControl();
        chartUserControl.SetupChart(data, line, new[] { "T", "B" });
        MainStackPanel.Children.Add(chartUserControl);
    }
}
이렇게 하면, XAML에서 UserControl을 통해 차트의 레이아웃과 스타일을 미리 정의하고, 코드에서는 해당 UserControl을 인스턴스화하여 동적으로 여러 차트를 생성할 수 있습니다. UserControl 내에서 차트의 상세 설정을 변경하고 싶은 경