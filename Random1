해결 방법: SPI 사용 및 라이브러리 업데이트
해결책은 간단합니다. PWM 대신 SPI를 사용하도록 핀 연결을 바꾸고, 관련 설정을 활성화한 뒤, 최신 라이브러리를 설치하면 됩니다.

1단계: SPI 활성화
먼저 라즈베리파이의 SPI 인터페이스를 활성화해야 합니다.

터미널에서 sudo raspi-config를 입력합니다.

3. Interface Options (인터페이스 옵션)으로 이동합니다.

I4. SPI를 선택합니다.

<Yes> (예)를 선택하여 SPI 인터페이스를 활성화합니다.

설정을 완료하고 재부팅합니다.

2단계: 핀 연결 변경
LED 스트립의 데이터(Data-In) 핀을 기존의 GPIO 핀(18번 등)에서 SPI MOSI 핀으로 변경하여 연결합니다.

SPI MOSI 핀: GPIO 10 (물리적 19번 핀)

3단계: 라이브러리 설치 및 업데이트
파이 5의 SPI를 지원하는 최신 라이브러리를 설치해야 합니다. Adafruit의 CircuitPython NeoPixel 라이브러리를 사용하는 것이 가장 쉽고 확실합니다.

Bash

# 기존 라이브러리가 있다면 제거 (선택 사항)
sudo pip3 uninstall rpi-ws281x adafruit-circuitpython-neopixel

# 최신 라이브러리 설치
pip3 install --upgrade adafruit-circuitpython-neopixel
4단계: 파이썬 코드 수정
코드를 수정하여 PWM 핀(D18 등) 대신 SPI 핀(D10)을 사용하도록 지정해야 합니다.

예제 Python 코드 (simple_test.py)

Python

import board
import neopixel
import time

# LED 설정
LED_COUNT = 30         # LED 개수
LED_PIN = board.D10    # SPI MOSI 핀 (GPIO 10) 사용. 이게 핵심입니다!
LED_BRIGHTNESS = 0.2   # 밝기 (0.0 ~ 1.0)
ORDER = neopixel.GRB   # LED 타입 (SK6812/WS2812는 GRB 또는 GRBW)
                       # SK6815가 RGBW 타입이면 neopixel.RGBW 또는 GRBW를 사용하세요.

# NeoPixel 객체 초기화
# auto_write=False로 설정해야 show()를 호출할 때만 업데이트됩니다.
pixels = neopixel.NeoPixel(
    LED_PIN, 
    LED_COUNT, 
    brightness=LED_BRIGHTNESS, 
    auto_write=False, 
    pixel_order=ORDER
)

print(f"Pi 5 SPI (GPIO 10)에서 {LED_COUNT}개의 LED를 제어합니다.")

try:
    while True:
        # 빨간색 켜기
        print("빨간색")
        pixels.fill((255, 0, 0))
        pixels.show()
        time.sleep(1)

        # 초록색 켜기
        print("초록색")
        pixels.fill((0, 255, 0))
        pixels.show()
        time.sleep(1)

        # 파란색 켜기
        print("파란색")
        pixels.fill((0, 0, 255))
        pixels.show()
        time.sleep(1)

except KeyboardInterrupt:
    # 종료 시 LED 끄기
    print("\n프로그램 종료. LED를 끕니다.")
    pixels.fill((0, 0, 0))
    pixels.show()

5단계: 코드 실행
코드를 실행할 때 sudo 없이 실행해야 합니다. (Adafruit 라이브러리는 sudo가 필요 없습니다.)

Bash

python3 simple_test.py
3. 요약
원인: 라즈베리파이 5의 하드웨어 변경으로 기존 rpi-ws281x (PWM 방식) 라이브러리가 호환되지 않음.

해결: SPI 방식으로 변경해야 함.

조치:

sudo raspi-config로 SPI 활성화.

LED 데이터 핀을 **GPIO 10 (19번 핀)**에 연결.

pip3 install --upgrade adafruit-circuitpython-neopixel로 라이브러리 업데이트.

코드에서 board.D10을 사용하도록 수정.