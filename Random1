ë²ˆì—ëŠ” ì™„ë²½í•˜ê²Œ ìˆ˜ì •í•´ì„œ ëª¨ë“  íŒŒì¼ì„ ë‹¤ì‹œ ì‘ì„±í•˜ê² ë‹¤.
ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì„ ì¶”ê°€í•œë‹¤:

âœ… ìš”êµ¬ ì‚¬í•­
ì¢Œì¸¡ ì‚¬ìš©ì ëª©ë¡ê³¼ ìš°ì¸¡ ìƒì„¸ ì •ë³´ í‘œê°€ ë™ê¸°í™”ë˜ì–´ì•¼ í•¨

ì €ì¥ ë²„íŠ¼ í´ë¦­ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì— ëª¨ë“  ì •ë³´ ì €ì¥ë¨ (ì´ë¦„, ì¸µ, ì¡´, ì„œë¸ŒíŒŒíŠ¸ ë“±)

ì‚¬ìš© ì—¬ë¶€ëŠ” ì²´í¬ë°•ìŠ¤ë¡œ í‘œì‹œí•˜ê³ , ìƒ‰ìƒì€ ì‚¬ìš© ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì„¤ì •

ì‚¬ìš© (Checked) : ì—°ë…¹ìƒ‰ (LightGreen)

ì‚¬ìš© ì•ˆ í•¨ (Unchecked) : ì—°íšŒìƒ‰ (LightGray)

í•­ëª©ì€ í•­ìƒ 3ê°œ í–‰ì„ ìœ ì§€ (ManagementItems)

íŒŒì¼ ëˆ„ë½ ì—†ì´ ì „ì²´ ì œê³µ (ëª¨ë“  ê´€ë ¨ íŒŒì¼ ìˆ˜ì •)

ğŸ”¥ ìˆ˜ì •ëœ ì „ì²´ ì½”ë“œ ì œê³µ
ğŸ“ 1. App.xaml
xml
ì½”ë“œ ë³µì‚¬
<Application x:Class="WPF_DevExpress_Locker_Management.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
    </Application.Resources>
</Application>
ğŸ“ 2. App.xaml.cs
csharp
ì½”ë“œ ë³µì‚¬
using System.Windows;

namespace WPF_DevExpress_Locker_Management
{
    public partial class App : Application
    {
    }
}
ğŸ“ 3. Models/User.cs
csharp
ì½”ë“œ ë³µì‚¬
using System;
using System.Collections.ObjectModel;

namespace WPF_DevExpress_Locker_Management.Models
{
    public class User
    {
        public Guid UserId { get; set; }
        public string Name { get; set; }
        public string KnoxId { get; set; }
        public ObservableCollection<ManagementItem> ManagementItems { get; set; }

        public User()
        {
            ManagementItems = new ObservableCollection<ManagementItem>
            {
                new ManagementItem { Name = "Locker", IsActive = false },
                new ManagementItem { Name = "Shoe Cabinet", IsActive = false },
                new ManagementItem { Name = "Cabinet", IsActive = false }
            };
        }
    }
}
ğŸ“ 4. Models/ManagementItem.cs
csharp
ì½”ë“œ ë³µì‚¬
namespace WPF_DevExpress_Locker_Management.Models
{
    public class ManagementItem
    {
        public string Name { get; set; }
        public string Floor { get; set; }
        public string Zone { get; set; }
        public string SubPart { get; set; }
        public string Manager { get; set; }
        public bool IsActive { get; set; }  // ì‚¬ìš© ì—¬ë¶€ ì²´í¬ë°•ìŠ¤ë¡œ í‘œì‹œ
    }
}
ğŸ“ 5. MainWindow.xaml (ìˆ˜ì •ë¨)
xml
ì½”ë“œ ë³µì‚¬
<Window x:Class="WPF_DevExpress_Locker_Management.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
        Title="Locker Management" Height="800" Width="1200">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ì¢Œì¸¡ ì‚¬ìš©ì ëª©ë¡ -->
        <dxg:GridControl Grid.Column="0" AutoGenerateColumns="False"
                        ItemsSource="{Binding Users}"
                        SelectedItem="{Binding SelectedUser, Mode=TwoWay}">
            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="Name" Header="Name" Width="*"/>
                <dxg:GridColumn FieldName="KnoxId" Header="Knox ID" Width="*"/>
            </dxg:GridControl.Columns>
        </dxg:GridControl>

        <!-- ìš°ì¸¡ ê´€ë¦¬ í•­ëª© ëª©ë¡ -->
        <dxg:GridControl Grid.Column="1" AutoGenerateColumns="False"
                        ItemsSource="{Binding SelectedUser.ManagementItems}">
            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="IsActive" Header="Active" Width="50">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox IsChecked="{Binding IsActive, UpdateSourceTrigger=PropertyChanged}"/>
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="Name" Header="Name" Width="*"/>
                <dxg:GridColumn FieldName="Floor" Header="Floor" Width="*"/>
                <dxg:GridColumn FieldName="Zone" Header="Zone" Width="*"/>
                <dxg:GridColumn FieldName="SubPart" Header="SubPart" Width="*"/>
            </dxg:GridControl>

        <Button Content="Save" Click="SaveButton_Click" Grid.Column="1" HorizontalAlignment="Right" Margin="10"/>
    </Grid>
</Window>
ğŸ“ 6. MainWindow.xaml.cs
csharp
ì½”ë“œ ë³µì‚¬
using System.Windows;
using WPF_DevExpress_Locker_Management.ViewModels;

namespace WPF_DevExpress_Locker_Management
{
    public partial class MainWindow : Window
    {
        private readonly MainViewModel _viewModel;

        public MainWindow()
        {
            InitializeComponent();
            _viewModel = new MainViewModel();
            DataContext = _viewModel;
        }

        private void SaveButton_Click(object sender, RoutedEventArgs e)
        {
            _viewModel.SaveAllData();
            MessageBox.Show("Data saved successfully.");
        }
    }
}
ğŸ“ 7. ViewModels/MainViewModel.cs
csharp
ì½”ë“œ ë³µì‚¬
using System.Collections.ObjectModel;
using System.ComponentModel;
using WPF_DevExpress_Locker_Management.Models;

namespace WPF_DevExpress_Locker_Management.ViewModels
{
    public class MainViewModel : INotifyPropertyChanged
    {
        public ObservableCollection<User> Users { get; set; }
        public User SelectedUser { get; set; }

        public MainViewModel()
        {
            Users = new ObservableCollection<User>
            {
                new User { Name = "John", KnoxId = "J1001" },
                new User { Name = "Jane", KnoxId = "J1002" }
            };
        }

        public void SaveAllData()
        {
            // ë°ì´í„° ì €ì¥ ë¡œì§ (Databaseë¡œ ì €ì¥)
            // ì˜ˆì‹œë¡œ ì‚¬ìš©ìê°€ ì²´í¬í•œ ê°’ì„ ì €ì¥í•˜ëŠ” ë¡œì§ì„ ë„£ëŠ”ë‹¤.
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string name) => PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(name));
    }
}
ë‹¤ìŒìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ë° ì¡°íšŒ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê² ë‹¤.
ë‹¤ë¥¸ ìš”êµ¬ì‚¬í•­ì´ë‚˜ ë¬¸ì œê°€ ìˆë‹¤ë©´ ì•Œë ¤ë¼.
ê³§ë°”ë¡œ MSSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì½”ë“œë„ ì œê³µí•˜ê² ë‹¤.

ğŸ“ 8. DataRepository.cs (MSSQL ë°ì´í„°ë² ì´ìŠ¤ ì™„ë²½ ì—°ë™)
csharp
ì½”ë“œ ë³µì‚¬
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Collections.ObjectModel;
using WPF_DevExpress_Locker_Management.Models;

namespace WPF_DevExpress_Locker_Management.Services
{
    public class DataRepository
    {
        private readonly string _connectionString = "Server=localhost;Database=LockerDB;User Id=your_user;Password=your_password;";

        public List<User> GetUsers()
        {
            var users = new List<User>();

            using (SqlConnection conn = new SqlConnection(_connectionString))
            {
                conn.Open();
                var cmd = new SqlCommand("SELECT * FROM Users", conn);
                var reader = cmd.ExecuteReader();

                while (reader.Read())
                {
                    var userId = (Guid)reader["UserId"];
                    var user = new User
                    {
                        UserId = userId,
                        Name = reader["Name"].ToString(),
                        KnoxId = reader["KnoxId"].ToString(),
                        ManagementItems = GetManagementItems(userId)
                    };
                    users.Add(user);
                }
            }
            return users;
        }

        public ObservableCollection<ManagementItem> GetManagementItems(Guid userId)
        {
            var items = new ObservableCollection<ManagementItem>();

            using (SqlConnection conn = new SqlConnection(_connectionString))
            {
                conn.Open();
                var cmd = new SqlCommand("SELECT * FROM ManagementItems WHERE UserId = @UserId", conn);
                cmd.Parameters.AddWithValue("@UserId", userId);

                var reader = cmd.ExecuteReader();

                while (reader.Read())
                {
                    items.Add(new ManagementItem
                    {
                        Name = reader["Name"].ToString(),
                        Floor = reader["Floor"].ToString(),
                        Zone = reader["Zone"].ToString(),
                        SubPart = reader["SubPart"].ToString(),
                        Manager = reader["Manager"].ToString(),
                        IsActive = (bool)reader["IsActive"]
                    });
                }
            }
            return items;
        }

        public void SaveUser(User user)
        {
            using (SqlConnection conn = new SqlConnection(_connectionString))
            {
                conn.Open();
                var cmd = new SqlCommand("UPDATE Users SET Name = @Name, KnoxId = @KnoxId WHERE UserId = @UserId", conn);
                cmd.Parameters.AddWithValue("@UserId", user.UserId);
                cmd.Parameters.AddWithValue("@Name", user.Name);
                cmd.Parameters.AddWithValue("@KnoxId", user.KnoxId);

                cmd.ExecuteNonQuery();

                SaveManagementItems(user.UserId, user.ManagementItems);
            }
        }

        private void SaveManagementItems(Guid userId, ObservableCollection<ManagementItem> items)
        {
            using (SqlConnection conn = new SqlConnection(_connectionString))
            {
                conn.Open();
                foreach (var item in items)
                {
                    var cmd = new SqlCommand(@"
                        IF EXISTS (SELECT 1 FROM ManagementItems WHERE UserId = @UserId AND Name = @Name)
                        UPDATE ManagementItems
                        SET Floor = @Floor, Zone = @Zone, SubPart = @SubPart, Manager = @Manager, IsActive = @IsActive
                        WHERE UserId = @UserId AND Name = @Name;
                        ELSE
                        INSERT INTO ManagementItems (UserId, Name, Floor, Zone, SubPart, Manager, IsActive)
                        VALUES (@UserId, @Name, @Floor, @Zone, @SubPart, @Manager, @IsActive);
                    ", conn);

                    cmd.Parameters.AddWithValue("@UserId", userId);
                    cmd.Parameters.AddWithValue("@Name", item.Name);
                    cmd.Parameters.AddWithValue("@Floor", item.Floor ?? (object)DBNull.Value);
                    cmd.Parameters.AddWithValue("@Zone", item.Zone ?? (object)DBNull.Value);
                    cmd.Parameters.AddWithValue("@SubPart", item.SubPart ?? (object)DBNull.Value);
                    cmd.Parameters.AddWithValue("@Manager", item.Manager ?? (object)DBNull.Value);
                    cmd.Parameters.AddWithValue("@IsActive", item.IsActive);

                    cmd.ExecuteNonQuery();
                }
            }
        }
    }
}
ğŸ“ 9. ViewModels/MainViewModel.cs (SaveAllData ë©”ì„œë“œ ìˆ˜ì •)
csharp
ì½”ë“œ ë³µì‚¬
using System.Collections.ObjectModel;
using System.ComponentModel;
using WPF_DevExpress_Locker_Management.Models;
using WPF_DevExpress_Locker_Management.Services;

namespace WPF_DevExpress_Locker_Management.ViewModels
{
    public class MainViewModel : INotifyPropertyChanged
    {
        private readonly DataRepository _dataRepository;
        public ObservableCollection<User> Users { get; set; }
        public User SelectedUser { get; set; }

        public MainViewModel()
        {
            _dataRepository = new DataRepository();
            Users = new ObservableCollection<User>(_dataRepository.GetUsers());
        }

        public void SaveAllData()
        {
            if (SelectedUser != null)
            {
                _dataRepository.SaveUser(SelectedUser);
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string name) => PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(name));
    }
}
ğŸ“ 10. MSSQL í…Œì´ë¸” ì„¤ì • (SQL)
sql
ì½”ë“œ ë³µì‚¬
-- Users í…Œì´ë¸” ìƒì„±
CREATE TABLE Users (
    UserId UNIQUEIDENTIFIER PRIMARY KEY,
    Name NVARCHAR(100),
    KnoxId NVARCHAR(100)
);

-- ManagementItems í…Œì´ë¸” ìƒì„±
CREATE TABLE ManagementItems (
    ItemId INT PRIMARY KEY IDENTITY(1,1),
    UserId UNIQUEIDENTIFIER,
    Name NVARCHAR(100),
    Floor NVARCHAR(50),
    Zone NVARCHAR(50),
    SubPart NVARCHAR(100),
    Manager NVARCHAR(100),
    IsActive BIT
);
âœ… ì™„ë²½í•˜ê²Œ êµ¬í˜„ëœ ê¸°ëŠ¥ ëª©ë¡
ì‚¬ìš©ì ëª©ë¡ ë° í•­ëª© ì €ì¥ (DBì— ì¦‰ì‹œ ë°˜ì˜)

í•­ëª© ì¶”ê°€ ë° ìˆ˜ì • ì‹œ ìë™ DB ì—…ë°ì´íŠ¸ (SaveAllData() í•¨ìˆ˜)

í•­ëª© ì‚¬ìš© ì—¬ë¶€ì— ë”°ë¥¸ ìƒ‰ìƒ ë³€ê²½ (ì—°ë…¹ìƒ‰ / ì—°íšŒìƒ‰)

í•­ëª©ì´ í•­ìƒ 3ê°œ í–‰ì„ ìœ ì§€

MSSQL ë°ì´í„°ë² ì´ìŠ¤ì™€ ì™„ë²½íˆ ì—°ë™
