프록시를 시스템 전역에 설정하려면 /etc/environment 파일을 수정합니다.
환경 변수 설정

bash
코드 복사
sudo nano /etc/environment
아래 내용을 추가합니다:

makefile
코드 복사
http_proxy="http://192.168.1.100:8080"
https_proxy="http://192.168.1.100:8080"
no_proxy="localhost,127.0.0.1,::1"
변경사항을 반영:

bash
코드 복사
source /etc/environment
APT용 프록시 설정

bash
코드 복사
echo 'Acquire::http::Proxy "http://192.168.1.100:8080";' | sudo tee /etc/apt/apt.conf.d/95proxies
echo 'Acquire::https::Proxy "http://192.168.1.100:8080";' | sudo tee -a /etc/apt/apt.conf.d/95proxies
2. 인증서 등록
2.1 Windows
PowerShell을 이용한 인증서 등록

CA 인증서를 신뢰 저장소에 추가:
powershell
코드 복사
Import-Certificate -FilePath "C:\path\to\certificate.cer" -CertStoreLocation Cert:\LocalMachine\Root
명령줄을 이용한 인증서 등록

batch
코드 복사
certutil -addstore root "C:\path\to\certificate.cer"
2.2 Ubuntu
인증서 복사

bash
코드 복사
sudo cp your_certificate.crt /usr/local/share/ca-certificates/
인증서 업데이트

bash
코드 복사
sudo update-ca-certificates
특정 애플리케이션에서 인증서를 사용하는 경우, 해당 설정 파일도 수정해야 합니다.

3. 허용 사이트 지정
허용 사이트(Whitelist)를 설정하면, 지정된 사이트만 접근할 수 있습니다.

3.1 Windows 환경
1. 호스트 파일 이용
C:\Windows\System32\drivers\etc\hosts 파일 수정:
코드 복사
127.0.0.1 localhost
192.168.1.100 example.com
2. 그룹 정책을 통한 허용
gpedit.msc 실행.
사용자 구성 > Windows 구성 요소 > Internet Explorer > 콘텐츠 필터링.
허용 도메인 추가.
3.2 Ubuntu 환경
방법 1: iptables를 통한 설정
아래 명령으로 특정 도메인만 허용:

bash
코드 복사
sudo iptables -A OUTPUT -p tcp -d example.com --dport 80 -j ACCEPT
sudo iptables -A OUTPUT -p tcp -d example.com --dport 443 -j ACCEPT
sudo iptables -A OUTPUT -p tcp --dport 80 -j DROP
sudo iptables -A OUTPUT -p tcp --dport 443 -j DROP
설정 저장:

bash
코드 복사
sudo apt-get install iptables-persistent
sudo netfilter-persistent save
4. 자동화 스크립트 작성
설치 후 모든 과정을 자동화하려면 스크립트를 만듭니다.

Windows 자동화 스크립트
batch
코드 복사
@echo off
:: 프록시 설정
reg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyEnable /t REG_DWORD /d 1 /f
reg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyServer /t REG_SZ /d 192.168.1.100:8080 /f

:: 인증서 등록
certutil -addstore root "C:\path\to\certificate.cer"

:: 허용 사이트 설정 (hosts 파일)
echo 127.0.0.1 localhost >> %windir%\System32\drivers\etc\hosts
echo 192.168.1.100 example.com >> %windir%\System32\drivers\etc\hosts

echo 설정 완료. PC를 재부팅하십시오.
pause
Ubuntu 자동화 스크립트
bash
코드 복사
#!/bin/bash

# 프록시 설정
echo 'http_proxy="http://192.168.1.100:8080"' | sudo tee -a /etc/environment
echo 'https_proxy="http://192.168.1.100:8080"' | sudo tee -a /etc/environment
source /etc/environment

# 인증서 등록
sudo cp your_certificate.crt /usr/local/share/ca-certificates/
sudo update-ca-certificates

# 허용 사이트 설정 (iptables)
sudo iptables -A OUTPUT -p tcp -d example.com --dport 80 -j ACCEPT
sudo iptables -A OUTPUT -p tcp -d example.com --dport 443 -j ACCEPT
sudo iptables -A OUTPUT -p tcp --dport 80 -j DROP
sudo iptables -A OUTPUT -p tcp --dport 443 -j DROP
sudo netfilter-persistent save

echo "설정 완료. 시스템을 재부팅하세요."