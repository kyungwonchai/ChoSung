Windows Server 2012에서 'Everyone' 권한 공유 폴더 목록 확인 방법
Windows Server 2012에서 'Everyone' 권한이 포함된 공유 폴더 목록을 확인하는 가장 효율적인 방법은 PowerShell을 사용하는 것입니다. 명령 프롬프트(CMD)를 이용하는 방법도 있지만, 권한을 필터링하기에는 PowerShell이 훨씬 강력하고 편리합니다.

PowerShell을 이용한 확인 방법
가장 간단하고 확실한 방법입니다. 아래 명령어를 PowerShell에서 실행하면 'Everyone'에게 권한이 부여된 공유 폴더의 경로와 이름을 바로 확인할 수 있습니다.

PowerShell

Get-SmbShare | ForEach-Object { 
    $share = $_
    $acl = Get-SmbShareAccess -Name $share.Name
    if ($acl.AccountName -contains "Everyone") {
        $share
    }
} | Select-Object Name, Path
명령어 설명:

Get-SmbShare: 서버에 있는 모든 공유 폴더 목록을 가져옵니다.

ForEach-Object: 각 공유 폴더에 대해 반복적으로 다음 작업을 수행합니다.

Get-SmbShareAccess: 해당 공유 폴더의 접근 권한 목록(ACL)을 가져옵니다.

if ($acl.AccountName -contains "Everyone"): 권한 목록에 'Everyone'이 포함되어 있는지 확인합니다.

$share: 'Everyone' 권한이 있다면 해당 공유 폴더 정보를 출력합니다.

Select-Object Name, Path: 출력 결과에서 공유 폴더의 **이름(Name)**과 실제 **경로(Path)**만 깔끔하게 보여줍니다.

실행 결과 예시:

Name   Path
----   ----
Share1 C:\Shared\Share1
Public D:\Public
명령 프롬프트(CMD)를 이용한 확인 방법
PowerShell 사용이 어려운 경우, CMD를 통해서도 확인할 수 있습니다. 하지만 권한 필터링 기능이 없어 수동으로 확인해야 하는 번거로움이 있습니다.

공유 폴더 목록 확인

DOS

net share
이 명령은 서버의 모든 공유 폴더 목록을 보여줍니다.

개별 폴더 권한 확인

목록에서 확인하고 싶은 각 공유 폴더의 이름을 다음 명령어에 넣어 실행합니다.

DOS

icacls "폴더 경로"
예를 들어 net share 목록에 나온 'Public' 폴더의 실제 경로가 D:\Public이라면 아래와 같이 입력합니다.

DOS

icacls "D:\Public"
실행 결과에서 Everyone:(F), Everyone:(M) 등과 같이 'Everyone'에게 권한이 부여되었는지 직접 눈으로 확인해야 합니다. 모든 공유 폴더에 대해 이 작업을 반복해야 하므로 폴더가 많을 경우 매우 비효율적입니다.