, 알겠습니다. 파일 목록에서 남은 마지막 파일인 MasterDataWindow.xaml.cs의 전체 코드를 여기에 바로 작성해 드리겠습니다.

22. Views/MasterDataWindow.xaml.cs

마스터 데이터 관리 창(MasterDataWindow.xaml)의 코드 비하인드 파일입니다. "닫기" 버튼 클릭 이벤트와 창이 닫힐 때 ViewModel의 리소스를 정리하는 로직을 포함합니다.

C#

using DevExpress.Xpf.Core; // ThemedWindow 사용
using LockerManagementApp.ViewModels; // MasterDataViewModel 참조
using System;
using System.ComponentModel; // CancelEventArgs 사용
using System.Windows;

namespace LockerManagementApp.Views
{
    /// <summary>
    /// MasterDataWindow.xaml에 대한 상호 작용 논리
    /// </summary>
    public partial class MasterDataWindow : ThemedWindow
    {
        /// <summary>
        /// MasterDataWindow 생성자
        /// </summary>
        public MasterDataWindow()
        {
            InitializeComponent(); // XAML UI 요소 초기화

            // 필요 시 테마 설정 또는 추가 초기화 로직
            // ApplicationThemeHelper.ApplicationThemeName = Theme.Office2019ColorfulName;
        }

        // DataContext를 MasterDataViewModel 타입으로 안전하게 캐스팅하는 편의 속성
        private MasterDataViewModel ViewModel => DataContext as MasterDataViewModel;

        /// <summary>
        /// XAML에 정의된 "닫기" 버튼의 클릭 이벤트 핸들러
        /// </summary>
        private void CloseButton_Click(object sender, RoutedEventArgs e)
        {
            // 현재 창(MasterDataWindow)을 닫습니다.
            this.Close();
        }

        /// <summary>
        /// 창이 닫히기 직전에 호출되는 이벤트 핸들러
        /// </summary>
        private void MasterDataWindow_Closing(object sender, CancelEventArgs e)
        {
            // DataContext로 설정된 ViewModel (MasterDataViewModel)이
            // IDisposable 인터페이스를 구현하고 있는지 확인합니다.
            if (ViewModel is IDisposable disposableViewModel)
            {
                try
                {
                    // ViewModel의 Dispose 메서드를 호출하여 사용된 리소스(특히 DbContext)를 정리합니다.
                    disposableViewModel.Dispose();
                    System.Diagnostics.Debug.WriteLine("MasterDataViewModel 리소스가 정리되었습니다.");
                }
                catch (Exception ex)
                {
                    // Dispose 중 오류 발생 시 로그 기록 (선택 사항)
                    System.Diagnostics.Debug.WriteLine($"*** MasterDataViewModel Dispose 중 오류 발생: {ex.Message}");
                    // 사용자에게 알릴 필요는 없을 수 있음
                }
            }
        }
    }