PF를 사용하여 MEWTOCOL 프로토콜을 통해 PLC 데이터를 읽고 쓰며, 그 결과를 ListBox에 실시간으로 표시하는 예제 코드를 제공하겠습니다. 이 예제에서는 Mewtocol.NET 패키지를 활용하여 통신을 처리합니다.

1. MainWindow.xaml (UI 구성)
xml
코드 복사
<Window x:Class="PlcApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PLC Communication" Height="300" Width="400">
    <Grid>
        <StackPanel>
            <Button Content="Read Data" Click="ReadData_Click" Margin="10"/>
            <Button Content="Write Data" Click="WriteData_Click" Margin="10"/>
            <ListBox x:Name="ListBoxLog" Height="200" Margin="10"/>
        </StackPanel>
    </Grid>
</Window>
2. MainWindow.xaml.cs (C# 코드)
csharp
코드 복사
using System;
using System.Windows;
using Mewtocol;

namespace PlcApp
{
    public partial class MainWindow : Window
    {
        private MewtocolClient client;

        public MainWindow()
        {
            InitializeComponent();
            client = new MewtocolClient("COM3", 9600); // COM 포트와 보드 레이트 설정
        }

        private void ReadData_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                string address = "D1000"; // 읽을 데이터의 주소
                var data = client.Read(address);
                ListBoxLog.Items.Add("Read from " + address + ": " + data);
            }
            catch (Exception ex)
            {
                ListBoxLog.Items.Add("Error: " + ex.Message);
            }
        }

        private void WriteData_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                string address = "D1000"; // 쓸 데이터의 주소
                int value = 1234; // 쓸 값
                client.Write(address, value);
                ListBoxLog.Items.Add("Written " + value + " to " + address);
            }
            catch (Exception ex)
            {
                ListBoxLog.Items.Add("Error: " + ex.Message);
            }
        }
    }
}
이 예제에서는 WPF의 Button과 ListBox를 사용하여 데이터를 읽고 쓰는 기능을 제공합니다. 각 버튼 클릭 이벤트는 PLC에서 데이터를 읽거나 쓰는 작업을 수행하고, 그 결과를 ListBox에 로그로 출력합니다. 데이터를 성공적으로 읽거나 쓸 때마다 ListBox에 상태 메시지가 추가되고, 오류가 발생할 경우 오류 메시지가 추가됩니다.

프로젝트에서 Mewtocol.NET 패키지를 