using System;
using System.Diagnostics;
using System.Windows;
using System.Windows.Interop;
using DevExpress.Xpf.Core;

namespace YourNamespace
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void ShowSplashAndCustomWindow_Click(object sender, RoutedEventArgs e)
        {
            SplashScreenManager.CreateThemed(new DXSplashScreenViewModel()).Show();

            // 잠시 대기해서 스플래시 창이 완전히 로드되게 한다.
            System.Threading.Thread.Sleep(1000);

            // 커스텀 창 인스턴스 생성
            var customWindow = new CustomWindow();

            foreach (Process proc in Process.GetProcessesByName("YourSplashScreenProcessName"))
            {
                IntPtr hwnd = proc.MainWindowHandle;

                if (hwnd != IntPtr.Zero)
                {
                    RECT rect;
                    if (GetWindowRect(hwnd, out rect))
                    {
                        // 커스텀 창 위치 설정
                        customWindow.Left = rect.Left;
                        customWindow.Top = rect.Top + (rect.Bottom - rect.Top);
                        break;
                    }
                }
            }

            customWindow.Show();
        }

        [System.Runtime.InteropServices.DllImport("user32.dll")]
        [return: System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.Bool)]
        public static extern bool GetWindowRect(IntPtr hWnd, out RECT lpRect);

        [System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Sequential)]
        public struct RECT
        {
            public int Left;
            public int Top;
            public int Right;
            public int Bottom;
        }
    }
}
