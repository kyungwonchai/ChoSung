C#ì—ì„œ asyncì™€ Taskë¥¼ ì‚¬ìš©í•˜ì—¬ 10ë¶„ë§ˆë‹¤ ì‹¤í–‰ë˜ì§€ë§Œ, ì´ì „ ì‹¤í–‰ì´ ëë‚˜ì§€ ì•Šì•˜ìœ¼ë©´ ê¸°ë‹¤ë¦¬ëŠ” íƒ€ì´ë¨¸ë¥¼ êµ¬í˜„í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

âœ… í•µì‹¬ ë¡œì§
10ë¶„ë§ˆë‹¤ (600000ms) Timerê°€ ì‹¤í–‰ë˜ì§€ë§Œ,
ì´ì „ ì‹¤í–‰ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ëŒ€ê¸°,
ì´ì „ ì‹¤í–‰ì´ ëë‚œ í›„ì— ë‹¤ì‹œ ì‹¤í–‰.
âœ… C# ë¹„ë™ê¸° íƒ€ì´ë¨¸ ì˜ˆì œ
csharp
ì½”ë“œ ë³µì‚¬
using System;
using System.Threading;
using System.Threading.Tasks;

class Program
{
    private static Timer? _timer;
    private static bool _isRunning = false; // í•¨ìˆ˜ ì‹¤í–‰ ì—¬ë¶€ ì²´í¬
    private static readonly object _lock = new object(); // ë™ì‹œ ì‹¤í–‰ ë°©ì§€

    static async Task Main()
    {
        Console.WriteLine("Timer ì‹œì‘...");
        StartTimer();

        // í”„ë¡œê·¸ë¨ ìœ ì§€ (Ctrl + Cë¡œ ì¢…ë£Œ)
        await Task.Delay(Timeout.Infinite);
    }

    private static void StartTimer()
    {
        // 10ë¶„(600000ms)ë§ˆë‹¤ `RunTaskAsync` ì‹¤í–‰
        _timer = new Timer(async _ => await CheckAndRunTask(), null, 0, 600000);
    }

    private static async Task CheckAndRunTask()
    {
        lock (_lock) // ë‹¤ì¤‘ ì‹¤í–‰ ë°©ì§€
        {
            if (_isRunning)
            {
                Console.WriteLine($"{DateTime.Now:HH:mm:ss} - ì´ì „ ì‹¤í–‰ì´ ëë‚˜ì§€ ì•ŠìŒ, ëŒ€ê¸°...");
                return;
            }
            _isRunning = true;
        }

        try
        {
            Console.WriteLine($"{DateTime.Now:HH:mm:ss} - ì‘ì—… ì‹œì‘");
            await RunTaskAsync();
            Console.WriteLine($"{DateTime.Now:HH:mm:ss} - ì‘ì—… ì™„ë£Œ");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"ì˜¤ë¥˜ ë°œìƒ: {ex.Message}");
        }
        finally
        {
            _isRunning = false; // ì‹¤í–‰ ì™„ë£Œ í›„ ìƒíƒœ ë³€ê²½
        }
    }

    private static async Task RunTaskAsync()
    {
        // ì‘ì—… ìˆ˜í–‰ (ì—¬ê¸°ì„œ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ ê°€ì •)
        await Task.Delay(20000); // 20ì´ˆ ë™ì•ˆ ì‹¤í–‰ë˜ëŠ” ì‘ì—… (í…ŒìŠ¤íŠ¸ìš©)
    }
}
âœ… ì„¤ëª…
_timer ì„¤ì •

10ë¶„(600,000ms)ë§ˆë‹¤ CheckAndRunTask() ì‹¤í–‰.
CheckAndRunTask() í•¨ìˆ˜

_isRunningì´ trueë©´ ì•„ì§ ì‹¤í–‰ ì¤‘ì´ë¯€ë¡œ ëŒ€ê¸°.
ì•„ë‹ˆë©´ _isRunning = trueë¡œ ë³€ê²½ í›„ ì‘ì—… ì‹¤í–‰.
RunTaskAsync() í•¨ìˆ˜

ì‹¤ì œ ì‘ì—…ì„ ì‹¤í–‰ (await Task.Delay(20000); â†’ 20ì´ˆ ì‹¤í–‰ ì˜ˆì œ).
âœ… ì‹¤í–‰ ì˜ˆì œ
makefile
ì½”ë“œ ë³µì‚¬
10:00:00 - ì‘ì—… ì‹œì‘
10:00:20 - ì‘ì—… ì™„ë£Œ
10:10:00 - ì‘ì—… ì‹œì‘
10:10:20 - ì‘ì—… ì™„ë£Œ
10:20:00 - ì´ì „ ì‹¤í–‰ì´ ëë‚˜ì§€ ì•ŠìŒ, ëŒ€ê¸°...
ğŸ‘‰ 10ë¶„ë§ˆë‹¤ ì‹¤í–‰ë˜ì§€ë§Œ, ì´ì „ ì‹¤í–‰ì´ ëë‚˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ì‹¤í–‰ì„ ê±´ë„ˆëœ€.

âœ… íŠ¹ì§•
âœ” ì´ì „ ì‹¤í–‰ì´ ëë‚  ë•Œê¹Œì§€ ë‹¤ìŒ ì‹¤í–‰ì„ ê±´ë„ˆëœ€
âœ” ë¹„ë™ê¸° ì‘ì—…ì„ ì§€ì› (async & await)
âœ” lock ì‚¬ìš©ìœ¼ë¡œ ë™ì‹œ ì‹¤í–‰ ë°©ì§€