qlCommand를 사용하여 연속된 3개의 SELECT 쿼리가 있는 저장 프로시저의 결과를 순서대로 읽고 문자열로 저장하려면 SqlDataReader를 사용하여 각 결과 집합을 순서대로 읽을 수 있습니다.

예시: C#에서 연속된 3개의 SELECT 쿼리를 포함하는 저장 프로시저 호출
SQL Server에서 저장 프로시저 작성

sql
Copy code
CREATE PROCEDURE GetMultipleSelectResults
AS
BEGIN
    SELECT 'First Result' AS FirstResult;
    SELECT 'Second Result' AS SecondResult;
    SELECT 'Third Result' AS ThirdResult;
END
C#에서 프로시저 호출 및 각 결과 집합 읽기

csharp
Copy code
using System;
using System.Data;
using System.Data.SqlClient;

class Program
{
    static void Main()
    {
        // Database connection string
        string connectionString = "Server=your_server;Database=your_database;User Id=your_user;Password=your_password;";

        // Stored procedure name
        string storedProcedureName = "GetMultipleSelectResults";

        // Declare variables to store the results
        string result1 = string.Empty;
        string result2 = string.Empty;
        string result3 = string.Empty;

        // Establish SQL connection and command
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            using (SqlCommand command = new SqlCommand(storedProcedureName, connection))
            {
                command.CommandType = CommandType.StoredProcedure;

                // Execute the command and read the results sequentially
                using (SqlDataReader reader = command.ExecuteReader())
                {
                    // First result set
                    if (reader.Read())
                    {
                        result1 = reader["FirstResult"].ToString();
                    }

                    // Move to the second result set
                    reader.NextResult();

                    // Second result set
                    if (reader.Read())
                    {
                        result2 = reader["SecondResult"].ToString();
                    }

                    // Move to the third result set
                    reader.NextResult();

                    // Third result set
                    if (reader.Read())
                    {
                        result3 = reader["ThirdResult"].ToString();
                    }
                }
            }
        }

        // Print the results
        Console.WriteLine($"Result 1: {result1}");
        Console.WriteLine($"Result 2: {result2}");
        Console.WriteLine($"Result 3: {result3}");
    }
}
주요 포인트:
저장 프로시저 작성: 3개의 SELECT 쿼리를 포함하는 SQL 저장 프로시저를 작성합니다.
SqlCommand 설정: SqlCommand 객체를 사용하여 저장 프로시저를 호출합니다.
SqlDataReader로 여러 결과 집합 처리: NextResult를 사용하여 다음 결과 집합으로 이동합니다.
변수에 결과 저장: 각 결과 집합을 변수에 저장하고 순서대로 출력합니다.
위 예시에서는 세 개의 문자열 결과를 각각 result1, result2, result3 변수에 저장하고 있습니다. 필요에 따라 저장 프로시저를 수정하고 여러 유형의 결과를 저장할 수 있습니