def cartesian_product(lists):
    result = []
    stack = [([], 0)]

    while stack:
        current, index = stack.pop()

        if index == len(lists):
            result.append(current)
            continue
        
        for item in lists[index]:
            stack.append((current + [item], index + 1))
    
    return result

lists = [[1, 2], ['a', 'b'], [True, False]]
product = cartesian_product(lists)
for p in product:
    print(p)
