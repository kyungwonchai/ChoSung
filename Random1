#에서 MSSQL 데이터베이스의 특정 테이블(IPTable)에 IP 주소가 존재하는지 확인하고, 그 결과에 따라 특정 코드를 실행하는 예제를 작성하겠습니다. 이 코드는 IP 주소가 테이블에 존재하는지 확인한 후, 존재하면 실행하고, 존재하지 않으면 실행하지 않는 구조로 작성되었습니다.

코드 예제
csharp
코드 복사
using System;
using System.Data.SqlClient;

class Program
{
    static void Main(string[] args)
    {
        string connectionString = "Server=your_server_address;Database=your_database_name;User Id=your_username;Password=your_password;";
        string ipToCheck = "192.168.1.1"; // 이 값은 변수 A의 값으로 대체하세요.

        if (IsIpInTable(connectionString, ipToCheck))
        {
            Console.WriteLine("IP exists in the table. Executing code...");
            // 여기에 실행할 코드를 작성하세요.
        }
        else
        {
            Console.WriteLine("IP does not exist in the table. Code execution stopped.");
        }
    }

    static bool IsIpInTable(string connectionString, string ipToCheck)
    {
        bool ipExists = false;

        string query = "SELECT COUNT(*) FROM IPTable WHERE ipvalue = @ipValue";

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            using (SqlCommand command = new SqlCommand(query, connection))
            {
                command.Parameters.AddWithValue("@ipValue", ipToCheck);

                connection.Open();
                int count = (int)command.ExecuteScalar();
                ipExists = count > 0;
            }
        }

        return ipExists;
    }
}
코드 설명
Main 메서드:

먼저 데이터베이스 연결 문자열(connectionString)과 확인할 IP 주소(ipToCheck)를 정의합니다. ipToCheck는 변수 A의 값으로 대체될 수 있습니다.
IsIpInTable 메서드를 호출하여 IP 주소가 테이블에 존재하는지 확인하고, 존재하면 특정 코드를 실행합니다.
IsIpInTable 메서드:

MSSQL 데이터베이스에 연결하여 지정된 IP 주소가 IPTable의 ipvalue 컬럼에 존재하는지 확인합니다.
존재하면 true를 반환하고, 그렇지 않으면 false를 반환합니다.
쿼리 실행:

SELECT COUNT(*) FROM IPTable WHERE ipvalue = @ipValue 쿼리를 사용하여 IP 주소가 존재하는지 확인합니다.
@ipValue는 SQL 인젝션을 방지하기 위해 매개변수화된 쿼리를 사용하여 안전하게 처리됩니다.
실행 조건:

IP 주소가 테이블에 존재할 때에만 특정 코드를 실행합니다.
적용 방법
이 코드를 C# 프로젝트에 추가하고, connectionString 및 ipToCheck 값을 실제 환경에 맞게 수정하여 사용하세요. IP가 테이블에 존재하는지 확인한 후, 그 결과에 따라 원하는 로직을 실행할 수 있습니다.

이 방법이 도움이 되기를 바랍니다. 추가적인 도움이 필요하면 언제든지 말씀해