도커 데몬 프록시 설정 파일 삭제
방금 만들었던, 또는 만들 예정이었던 도커 서비스 전용 프록시 설정 파일을 삭제합니다.

Bash

sudo rm /etc/systemd/system/docker.service.d/http-proxy.conf
2. 변경된 설정 시스템에 적용
설정 파일이 삭제된 것을 시스템이 인지하도록 리로드(reload) 명령을 실행합니다.

Bash

sudo systemctl daemon-reload
3. 도커 서비스 재시작
최종적으로 변경 사항을 적용하기 위해 도커를 재시작합니다.

Bash

sudo systemctl restart docker
결과
이제 도커 설치는 완료되었지만, docker pull을 시도하면 인터넷에 접속하지 못해 실패하게 됩니다. 이로써 외부에서 의도치 않게 이미지를 받아오는 것을 막을 수 있습니다.

중요한 점:

데이터 유출 걱정 없음: docker pull은 외부에서 이미지를 다운로드하는 명령어입니다. 사용자의 코드나 데이터를 외부로 업로드하는 명령어는 docker push이며, 이 명령어는 직접 실행하지 않는 한 절대 데이터가 나가지 않습니다.

build는 정상 작동: 이 조치는 pull만 막을 뿐, 서버에 이미 있는 소스코드와 Dockerfile을 이용해 docker build 명령어로 이미지를 만드는 작업은 아무 문제 없이 정상적으로 작동합니다