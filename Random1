네, 라즈베리파이 3에는 하드웨어 워치독 타이머(Watchdog Timer)가 내장되어 있습니다. 칩셋(BCM2837) 자체에 포함된 기능으로, 시스템이 멈추거나 응답하지 않을 때 자동으로 재부팅하여 안정성을 높여주는 역할을 합니다.

하지만 하드웨어 워치독을 사용하기 위해서는 운영체제(OS) 수준에서 이를 활성화하고 제어하는 소프트웨어 설정이 필요합니다. 아래에서 확인 방법과 오프라인 설치 방법을 자세히 안내해 드리겠습니다.

1. 라즈베리파이 워치독 활성화 및 실행 상태 확인법
터미널을 열고 다음 명령어를 순서대로 입력하여 워치독의 상태를 확인할 수 있습니다.

가. 하드웨어 워치독 모듈 로드 확인
먼저, 워치독 하드웨어를 제어하는 커널 모듈(bcm2835_wdt)이 메모리에 로드되었는지 확인합니다.

Bash

lsmod | grep wdt
실행 결과 O (정상): 아래와 같이 bcm2835_wdt가 목록에 보이면 하드웨어 모듈이 정상적으로 로드된 것입니다.

bcm2835_wdt             4233  1
실행 결과 X (비활성): 아무것도 출력되지 않으면 모듈이 로드되지 않은 상태입니다.

나. 워치독 데몬(소프트웨어) 설치 및 실행 확인
하드웨어 워치독을 주기적으로 "리셋"하여 시스템이 정상 동작 중임을 알려주는 역할을 하는 워치독 데몬(daemon) 소프트웨어의 상태를 확인합니다.

Bash

sudo systemctl status watchdog
실행 결과 O (정상): Active: active (running) 메시지가 녹색으로 표시되면 워치독 데몬이 정상적으로 실행 중인 것입니다.

● watchdog.service - watchdog daemon
   Loaded: loaded (/lib/systemd/system/watchdog.service; enabled; vendor preset: enabled)
   Active: active (running) since Mon 2025-08-11 09:30:00 KST; 1min ago
 Main PID: 456 (watchdog)
    Tasks: 1 (limit: 4915)
   CGroup: /system.slice/watchdog.service
           └─456 /usr/sbin/watchdog
실행 결과 X (미설치 또는 비활성): Unit watchdog.service could not be found. 메시지가 나오면 설치되지 않은 것이고, Active: inactive (dead)로 나오면 설치는 되어 있으나 실행 중이 아닌 것입니다.

2. 오프라인 환경에서 워치독 설치 방법
인터넷이 연결되지 않은 오프라인 라즈베리파이에 워치독을 설치하려면, 인터넷이 되는 다른 PC에서 필요한 파일을 다운로드하여 USB 메모리 등으로 옮겨야 합니다.

가. [온라인 PC] 필요 패키지 파일 다운로드
패키지 검색: 먼저 설치할 워치독 패키지의 정확한 파일명을 알아야 합니다. 라즈베리파이 OS(Raspbian/Raspberry Pi OS)는 데비안(Debian) 기반이므로, 데비안 패키지 저장소에서 파일을 찾습니다.

워치독 패키지: watchdog

다운로드 사이트 접속: 아래 링크와 같은 데비안 패키지 공식 사이트에 접속합니다.

https://packages.debian.org/

패키지 검색 및 다운로드:

사이트 검색창에 watchdog를 검색합니다.

자신의 라즈베리파이 OS 버전에 맞는 배포판(예: buster, bullseye, bookworm)을 선택합니다.

armhf 또는 arm64 아키텍처를 선택합니다. 라즈베리파이 3는 armhf를 사용하면 대부분 호환됩니다.

.deb 확장자를 가진 파일(예: watchdog_5.16-1_armhf.deb)을 다운로드합니다. 의존성(dependency)이 있는 다른 패키지가 필요할 수도 있으니, 패키지 정보 페이지에서 Dependencies 항목을 확인하고 필요한 파일들을 함께 받아야 합니다.

USB에 저장: 다운로드한 .deb 파일들을 USB 메모리에 복사합니다.

나. [오프라인 라지베리파이 3] 패키지 설치
USB 마운트: 라즈베리파이에 USB 메모리를 꽂습니다. 대부분 자동으로 /media/pi/USB드라이브이름과 같은 경로에 마운트됩니다. ls /media/pi 명령어로 마운트된 폴더를 확인하세요.

파일 복사: USB에 있는 .deb 파일들을 라즈베리파이의 홈 디렉토리(예: /home/pi/watchdog_files)로 복사합니다.

Bash

# 파일을 저장할 폴더 생성
mkdir ~/watchdog_files

# USB의 파일들을 생성한 폴더로 복사 (USB 경로 예시: /media/pi/MY_USB)
cp /media/pi/MY_USB/*.deb ~/watchdog_files/
패키지 설치: 복사한 폴더로 이동하여 dpkg 명령어로 패키지를 설치합니다. dpkg는 .deb 파일을 직접 설치하는 도구입니다.

Bash

cd ~/watchdog_files
sudo dpkg -i watchdog_*.deb
만약 의존성 오류가 발생하면, 함께 다운로드한 다른 .deb 파일들도 같은 방식으로 모두 설치해줍니다.

다. 워치독 활성화 및 설정
모듈 활성화: 워치독 모듈(bcm2835_wdt)이 부팅 시 자동으로 로드되도록 설정합니다.

Bash

# /etc/modules 파일에 모듈 이름 추가
echo "bcm2835_wdt" | sudo tee -a /etc/modules
워치독 설정 파일 수정: 워치독의 동작을 상세히 설정합니다.

Bash

sudo nano /etc/watchdog.conf
파일 내용 중 아래 두 라인의 주석 #을 제거하여 활성화합니다.

#watchdog-device = /dev/watchdog -> watchdog-device = /dev/watchdog

#max-load-1 = 24 -> max-load-1 = 24 (이 값은 시스템 부하가 이 이상 높아지면 재부팅하라는 의미이며, 필요에 따라 조절 가능)

워치독 데몬 자동 실행 설정 및 시작:

Bash

# 시스템 부팅 시 워치독 데몬이 자동으로 시작되도록 활성화
sudo systemctl enable watchdog

# 지금 바로 워치독 데몬 시작
sudo systemctl start watchdog
최종 상태 확인: 마지막으로 맨 처음 사용했던 확인 명령어를 다시 실행하여 워치독이 정상적으로 동작하는지 확인합니다.

Bash
