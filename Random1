 및 ADO.NET을 사용하여 이미지를 MSSQL 데이터베이스에 업로드하는 방법을 보여줍니다.

csharp

private void UploadImageToDatabase(byte[] imageData)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        // SQL 쿼리 작성
        string query = "INSERT INTO tbl2 (ImageColumn) VALUES (@imageData)";
        SqlCommand command = new SqlCommand(query, connection);

        // SQL 파라미터 설정
        SqlParameter parameter = new SqlParameter("@imageData", SqlDbType.VarBinary, -1);
        parameter.Value = imageData;
        command.Parameters.Add(parameter);

        // 쿼리 실행
        command.ExecuteNonQuery();
    }
}

private byte[] ImageToByteArray(Image image)
{
    using (MemoryStream stream = new MemoryStream())
    {
        image.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        return stream.ToArray();
    }
}

위의 코드에서 UploadImageToDatabase 메서드는 byte[] 형식의 이미지 데이터를 MSSQL 데이터베이스에 업로드합니다. ImageToByteArray 메서드는 Image 객체를 byte[] 배열로 변환하는 데 사용됩니다.

이제 이미지를 업로드하려면 다음과 같이 코드를 사용할 수 있습니다:

csharp

// 이미지를 로드하거나 생성하는 작업 수행
Image image = Image.FromFile("image.jpg");
// 또는
Image image = new Bitmap(width, height);
using (Graphics g = Graphics.FromImage(image))
{
    // 이미지를 그리는 작업 수행
    // ...
}

// 이미지를 `byte[]` 배열로 변환
byte[] imageData = ImageToByteArray(image);

// 이미지를 MSSQL 데이터베이스에 업로드
UploadImageToDatabase(imageData);

위의 코드에서 UploadImageToDatabase 메서드를 호출하여 byte[] 배열로 변환된 이미지 데이터를 MSSQL 데이터베이스에 업로드합니다. 필요에 따라 코드를 수정하여 사용하