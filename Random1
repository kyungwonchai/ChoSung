using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace YourNamespace
{
    public partial class MainForm : Form
    {
        private const string connectionString = "Your_Connection_String"; // MSSQL 서버 연결 문자열

        public MainForm()
        {
            InitializeComponent();
        }

        private void MainForm_Load(object sender, EventArgs e)
        {
            CheckServerTimeDifference();
        }

        private void CheckServerTimeDifference()
        {
            try
            {
                using (SqlConnection connection = new SqlConnection(connectionString))
                {
                    connection.Open();
                    
                    string query = "SELECT GETDATE()"; // 서버 시간을 가져오는 쿼리
                    using (SqlCommand command = new SqlCommand(query, connection))
                    {
                        // 서버 시간 가져오기
                        DateTime serverTime = (DateTime)command.ExecuteScalar();
                        
                        // 현재 PC의 시간과 서버 시간 비교
                        TimeSpan timeDifference = DateTime.Now - serverTime;
                        
                        // 1시간 이상 차이가 나는 경우 함수 A 실행
                        if (timeDifference.TotalHours >= 1)
                        {
                            FunctionA();
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                // 오류 처리
                MessageBox.Show("Error: " + ex.Message);
            }
        }

        private void FunctionA()
        {
            // 함수 A 실행 코드 작성
            // 1시간 이상 차이가 나는 경우 실행될 코드
        }
    }
}
