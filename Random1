using DevExpress.Xpf.Grid;
using System;
using System.Data.SqlClient;
using System.Windows;

namespace YourNamespace
{
    public partial class YourWindow : Window
    {
        public YourWindow()
        {
            InitializeComponent();
        }

        private void ButtonA_Click(object sender, RoutedEventArgs e)
        {
            // 선택된 행의 인덱스를 가져옴
            int rowIndex = gridControl.GetFocusedRowIndex();
            if (rowIndex >= 0)
            {
                // 사용자에게 행을 추가할 것인지 확인
                MessageBoxResult result = MessageBox.Show("행을 추가하시겠습니까?", "행 추가", MessageBoxButton.YesNo);
                if (result == MessageBoxResult.Yes)
                {
                    // 선택된 행의 데이터를 읽어옴
                    GridRowData rowData = gridControl.GetRowData(rowIndex);
                    string columnAValue = (string)rowData["ColumnA"];
                    DateTime 확정일 = (DateTime)rowData["확정일"];
                    string 구분 = (string)rowData["구분"];
                    string 라인 = (string)rowData["라인"];

                    // 새로운 행의 값 설정
                    string newColumnAValue = (Convert.ToInt32(columnAValue) + 1).ToString();

                    // DB에 새 행 추가
                    using (SqlConnection connection = new SqlConnection("YourConnectionString"))
                    {
                        connection.Open();
                        string insertQuery = "INSERT INTO YourTable (ColumnA, 확정일, 구분, 라인) VALUES (@ColumnA, @확정일, @구분, @라인)";
                        using (SqlCommand command = new SqlCommand(insertQuery, connection))
                        {
                            command.Parameters.AddWithValue("@ColumnA", newColumnAValue);
                            command.Parameters.AddWithValue("@확정일", 확정일);
                            command.Parameters.AddWithValue("@구분", 구분);
                            command.Parameters.AddWithValue("@라인", 라인);

                            command.ExecuteNonQuery();
                        }
                    }

                    // 이 부분에서 그리드 데이터를 다시 로드하거나 갱신할 수 있습니다.
                }
            }
        }
    }
}
