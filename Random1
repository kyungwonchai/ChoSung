. 이 코드는 c:\abcd 하위 폴더의 모든 .txt 파일을 순회하면서 각 파일의 한 줄씩을 읽고, 원하는 형식으로 파일을 c:\bbbb 폴더에 생성해 줍니다.

python
코드 복사
import os
import re
from datetime import datetime

# 원본 폴더와 저장할 폴더 경로
source_folder = r"c:\abcd"
destination_folder = r"c:\bbbb"

# 저장할 폴더가 없으면 생성
if not os.path.exists(destination_folder):
    os.makedirs(destination_folder)

# 정규식을 이용해 필요한 정보를 추출할 준비
pattern = r"\[(.*?)\]\s+\[(.*?)\]\s+Barcode\s*:\s*(\w+)\s+Measure:\s*(-?\d+\.\d+)"

# 파일 순회
for filename in os.listdir(source_folder):
    if filename.endswith(".txt"):
        # 파일 열기
        with open(os.path.join(source_folder, filename), 'r', encoding='utf-8') as file:
            for line in file:
                # 정규식 매칭
                match = re.search(pattern, line)
                if match:
                    # 필요한 정보를 추출
                    time_str1, time_str2, BB, CC = match.groups()

                    # AA 생성 (첫 번째 시간 값 사용)
                    AA = datetime.strptime(time_str1, "%y-%m-%d %H:%M:%S").strftime("%Y%m%d%H%M%S")

                    # 파일 이름 및 내용 생성
                    file_name = f"{AA}_{BB}_{CC}.txt"
                    file_content = f"{AA}_{BB}_{CC}"

                    # 새로운 파일 작성
                    with open(os.path.join(destination_folder, file_name), 'w', encoding='utf-8') as new_file:
                        new_file.write(file_content)
코드 설명
폴더 생성: c:\bbbb 폴더가 없으면 os.makedirs(destination_folder)를 통해 생성합니다.
정규식 패턴: pattern 변수에 정규식을 정의하여 AA, BB, CC 값을 추출합니다.
파일 순회: source_folder의 .txt 파일을 하나씩 순회하며, 파일 내 각 줄을 읽어 필요한 정보를 추출합니다.
정보 추출 및 파일 작성: 정규식으로 추출한 값 중 AA는 시간 문자열을 yyyyMMddHHmmss 형식으로 변환하여 사용하며, 파일 이름과 내용은 AA_BB_CC 형식으로 저장합니다.
파일 생성: 새로운 파일을 c:\bbbb 폴더에 AA_BB_CC.txt 이름으로 생성하고, 내용은 파일 이름과 동일하게 작성합니다.
주의사항