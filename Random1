래는 최소화 시 창이 트레이로 가는 기능이 적용된 XAML 설정과 관련된 핸들러 함수만 따로 정리한 내용입니다.

XAML 수정
xml
코드 복사
<Window x:Class="CrbFileMonitor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="CRB File Monitor" Height="400" Width="600"
        Closing="Window_Closing"
        StateChanged="Window_StateChanged"> <!-- 상태 변경 이벤트 추가 -->
    <Grid>
        <Button Content="종료" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10" Click="ExitButton_Click" />
        <ListBox x:Name="LogListBox" Margin="10,50,10,10" />
    </Grid>
</Window>
트레이 관련 함수
Window_StateChanged 함수
창 상태가 최소화될 때 트레이로 이동하는 로직입니다.

csharp
코드 복사
/// <summary>
/// 창 상태 변경 시 호출 (최소화 시 트레이로 이동)
/// </summary>
private void Window_StateChanged(object sender, EventArgs e)
{
    if (WindowState == WindowState.Minimized)
    {
        Hide(); // 창 숨김
        AddLog("창이 최소화되어 트레이로 이동했습니다.");
    }
}
트레이 복원 함수
트레이에서 더블 클릭 시 창을 복원하는 함수입니다.

csharp
코드 복사
/// <summary>
/// 트레이에서 창 복원
/// </summary>
private void RestoreWindow()
{
    Show(); // 창 표시
    WindowState = WindowState.Normal; // 창 상태를 일반으로 변경
    Activate(); // 창 활성화
}
NotifyIcon 초기화 함수
NotifyIcon에 더블 클릭 이벤트를 설정해 창을 복원할 수 있도록 구성합니다.

csharp
코드 복사
private void InitializeTrayIcon()
{
    _notifyIcon = new NotifyIcon
    {
        Icon = System.Drawing.SystemIcons.Application, // 트레이 아이콘 설정
        Visible = true,
        Text = "CRB File Monitor"
    };

    // 트레이 메뉴 설정
    var contextMenu = new ContextMenuStrip();
    var exitMenuItem = new ToolStripMenuItem("종료", null, (s, e) => CloseApplication());
    contextMenu.Items.Add(exitMenuItem);

    _notifyIcon.ContextMenuStrip = contextMenu;
    _notifyIcon.DoubleClick += (s, e) => RestoreWindow(); // 더블 클릭 시 창 복원
}
최소화 적용 요약
XAML에 StateChanged="Window_StateChanged" 속성을 추가.
Window_StateChanged 함수에서 최소화 시 창을 숨기고 트레이로 이동.
InitializeTrayIcon 함수에서 트레이 아이콘 설정 및 복원 로직 추가.