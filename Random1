public partial class MainForm : Form
{
    private List<string> playbackFiles = new List<string>();

    public MainForm()
    {
        InitializeComponent();

        LoadVideoFiles();
    }

    private void LoadVideoFiles()
    {
        string[] files = Directory.GetFiles(@"D:\11", "recording*.mp4", SearchOption.AllDirectories);

        foreach (var file in files)
        {
            playbackFiles.Add(file);
            listBox1.Items.Add(Path.GetFileName(file));
        }
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        int index = listBox1.SelectedIndex;
        if (index >= 0 && index < playbackFiles.Count)
        {
            string filePath = playbackFiles[index];
            videoView1.SourceProvider.MediaPlayer.Play(new Uri(filePath));
        }
    }

    private void trackBar1_Scroll(object sender, EventArgs e)
    {
        double position = trackBar1.Value / (double)trackBar1.Maximum;
        videoView1.SourceProvider.MediaPlayer.Position = position;

        // 시간 표시
        TimeSpan time = TimeSpan.FromSeconds(videoView1.SourceProvider.MediaPlayer.Length * position);
        lblTime.Text = time.ToString(@"hh\:mm\:ss");
    }
}
