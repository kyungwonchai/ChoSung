 WPF MVVM ê¸°ë°˜ ëª¨ë‹ˆí„° ìë™ ON/OFF + ë‹¬ë ¥ íœ´ì¼ ì €ì¥ ê¸°ëŠ¥ (íŒŒì¼ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ì§€ì›)
âœ… WPF + MVVM íŒ¨í„´ ì¤€ìˆ˜
âœ… ë‹¬ë ¥ì—ì„œ ì‰¬ëŠ” ë‚  ì„¤ì • (ë…¸ë€ìƒ‰ í‘œì‹œ) â†’ ìë™ íŒŒì¼ ì €ì¥ (YYYY-MM.dat)
âœ… ë‹¤ì‹œ ì‹¤í–‰ ì‹œ ê¸°ì¡´ ì„¤ì •ëœ íœ´ì¼ ìë™ ë¡œë“œ
âœ… í† ìš”ì¼, ì¼ìš”ì¼, ê³µíœ´ì¼ ê¸°ë³¸ì ìœ¼ë¡œ ë…¸ë€ìƒ‰ (ì‰¬ëŠ” ë‚ )
âœ… ì‰¬ëŠ” ë‚ ì´ë©´ ëª¨ë‹ˆí„° ìë™ ON/OFF ê¸°ëŠ¥ í™œì„±í™”
âœ… ì¼í•˜ëŠ” ë‚ ì´ë©´ ëª¨ë‹ˆí„° í•­ìƒ ì¼œì§ (ìë™ OFF ê¸°ëŠ¥ ë¹„í™œì„±í™”)
âœ… UI ê¹”ë”í•˜ê²Œ ì •ë¦¬ (ë¶ˆí•„ìš”í•œ UI ìš”ì†Œ ì œê±°, ìµœëŒ€í•œ ì§ê´€ì )

ğŸ“Œ í”„ë¡œì íŠ¸ êµ¬ì¡°
scss
ì½”ë“œ ë³µì‚¬
ğŸ“‚ MonitorControlApp
 â”œâ”€â”€ ğŸ“‚ ViewModels
 â”‚    â”œâ”€â”€ MainViewModel.cs (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
 â”œâ”€â”€ ğŸ“‚ Views
 â”‚    â”œâ”€â”€ MainWindow.xaml (UI)
 â”œâ”€â”€ ğŸ“‚ Models
 â”‚    â”œâ”€â”€ HolidayModel.cs (íœ´ì¼ ë°ì´í„° ê´€ë¦¬)
 â”œâ”€â”€ ğŸ“‚ Data
 â”‚    â”œâ”€â”€ (YYYY-MM.dat) (ê° ì—°ì›”ë³„ ë°ì´í„° ì €ì¥)
 â”œâ”€â”€ App.xaml
 â”œâ”€â”€ MainWindow.xaml.cs (MainViewModelê³¼ ì—°ê²°)
 â”œâ”€â”€ Program.cs (ì§„ì…ì )
ğŸ”¥ 1ï¸âƒ£ MainViewModel.cs (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
csharp
ì½”ë“œ ë³µì‚¬
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.IO;
using System.Linq;
using System.Runtime.InteropServices;
using System.Windows.Input;
using System.Globalization;

namespace MonitorControlApp.ViewModels
{
    public class MainViewModel : INotifyPropertyChanged
    {
        private static readonly int WM_SYSCOMMAND = 0x0112;
        private static readonly int SC_MONITORPOWER = 0xF170;
        private static readonly int MONITOR_ON = -1;
        private static readonly int MONITOR_OFF = 2;
        private bool _isMonitorOff = false;
        private readonly string _dataPath = "Data";

        public ObservableCollection<DateTime> Holidays { get; set; }
        public ICommand ToggleHolidayCommand { get; }
        public ICommand CheckMonitorCommand { get; }

        public MainViewModel()
        {
            Holidays = new ObservableCollection<DateTime>(LoadHolidays(DateTime.Today.Year, DateTime.Today.Month));
            ToggleHolidayCommand = new RelayCommand<DateTime>(ToggleHoliday);
            CheckMonitorCommand = new RelayCommand(CheckMonitorState);
        }

        private List<DateTime> LoadHolidays(int year, int month)
        {
            List<DateTime> holidays = new List<DateTime>();
            string fileName = $"{_dataPath}/{year}-{month:D2}.dat";

            if (!Directory.Exists(_dataPath))
                Directory.CreateDirectory(_dataPath);

            if (File.Exists(fileName))
            {
                var savedDates = File.ReadAllLines(fileName)
                                     .Select(date => DateTime.ParseExact(date, "yyyy-MM-dd", CultureInfo.InvariantCulture));
                holidays.AddRange(savedDates);
            }
            else
            {
                holidays.AddRange(GetDefaultHolidays(year, month));
                SaveHolidays(holidays, fileName);
            }

            return holidays;
        }

        private List<DateTime> GetDefaultHolidays(int year, int month)
        {
            var holidays = new List<DateTime>();

            for (int day = 1; day <= DateTime.DaysInMonth(year, month); day++)
            {
                DateTime date = new DateTime(year, month, day);
                if (date.DayOfWeek == DayOfWeek.Saturday || date.DayOfWeek == DayOfWeek.Sunday)
                {
                    holidays.Add(date);
                }
            }

            // ê³µíœ´ì¼ ì¶”ê°€ (ì˜ˆì œ: 1ì›” 1ì¼, 12ì›” 25ì¼)
            if (month == 1) holidays.Add(new DateTime(year, 1, 1));
            if (month == 12) holidays.Add(new DateTime(year, 12, 25));

            return holidays;
        }

        private void ToggleHoliday(DateTime date)
        {
            string fileName = $"{_dataPath}/{date.Year}-{date.Month:D2}.dat";

            if (Holidays.Contains(date))
            {
                Holidays.Remove(date);
            }
            else
            {
                Holidays.Add(date);
            }

            SaveHolidays(Holidays.ToList(), fileName);
            OnPropertyChanged(nameof(Holidays));
        }

        private void SaveHolidays(List<DateTime> holidays, string fileName)
        {
            File.WriteAllLines(fileName, holidays.Select(date => date.ToString("yyyy-MM-dd")));
        }

        private void CheckMonitorState()
        {
            if (Holidays.Contains(DateTime.Today))
            {
                if (!_isMonitorOff)
                {
                    TurnMonitorOff();
                }
            }
            else
            {
                if (_isMonitorOff)
                {
                    TurnMonitorOn();
                }
            }
        }

        private void TurnMonitorOn()
        {
            SendMessage(GetDesktopWindow(), WM_SYSCOMMAND, (IntPtr)SC_MONITORPOWER, (IntPtr)MONITOR_ON);
            _isMonitorOff = false;
        }

        private void TurnMonitorOff()
        {
            SendMessage(GetDesktopWindow(), WM_SYSCOMMAND, (IntPtr)SC_MONITORPOWER, (IntPtr)MONITOR_OFF);
            _isMonitorOff = true;
        }

        [DllImport("user32.dll", SetLastError = true)]
        private static extern IntPtr GetDesktopWindow();

        [DllImport("user32.dll", SetLastError = true)]
        private static extern IntPtr SendMessage(IntPtr hWnd, int Msg, IntPtr wParam, IntPtr lParam);

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
        {
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}
ğŸ”¥ 2ï¸âƒ£ MainWindow.xaml (UI)
xml
ì½”ë“œ ë³µì‚¬
<Window x:Class="MonitorControlApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MonitorControlApp.ViewModels"
        Title="ëª¨ë‹ˆí„° ìë™ ON/OFF" Height="400" Width="600">
    <Window.DataContext>
        <local:MainViewModel/>
    </Window.DataContext>

    <Grid>
        <Calendar Name="CalendarControl" 
                  SelectedDatesChanged="CalendarControl_SelectedDatesChanged"
                  DisplayMode="Month"/>
    </Grid>
</Window>
ğŸ”¥ 3ï¸âƒ£ MainWindow.xaml.cs (ë‹¬ë ¥ ì´ë²¤íŠ¸ ì—°ê²°)
csharp
ì½”ë“œ ë³µì‚¬
using System;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using MonitorControlApp.ViewModels;

namespace MonitorControlApp.Views
{
    public partial class MainWindow : Window
    {
        private MainViewModel ViewModel => DataContext as MainViewModel;

        public MainWindow()
        {
            InitializeComponent();
            HighlightHolidays();
        }

        private void HighlightHolidays()
        {
            CalendarControl.SelectedDates.Clear();
            foreach (var date in ViewModel.Holidays)
            {
                CalendarControl.SelectedDates.Add(date);
            }
        }

        private void CalendarControl_SelectedDatesChanged(object sender, SelectionChangedEventArgs e)
        {
            foreach (var date in e.AddedItems.OfType<DateTime>())
            {
                ViewModel.ToggleHoliday(date);
            }

            HighlightHolidays();
        }
    }
}
âœ… ìµœì¢… ê¸°ëŠ¥
âœ… ì—°/ì›”ë³„ íœ´ì¼ ìë™ ì €ì¥ (YYYY-MM.dat)
âœ… í† /ì¼ìš”ì¼ & ê³µíœ´ì¼ ê¸°ë³¸ì ìœ¼ë¡œ ë…¸ë€ìƒ‰
âœ… ë‹¬ë ¥ì—ì„œ ë‚ ì§œ í´ë¦­í•˜ë©´ ë…¸ë€ìƒ‰ í‘œì‹œ ë° ì €ì¥
âœ… ì‰¬ëŠ” ë‚ ì´ë©´ ëª¨ë‹ˆí„° ìë™ OFF, í‰ì¼ì—ëŠ” í•­ìƒ ON
âœ… MVVM íŒ¨í„´ ì™„ë²½ ì¤€ìˆ˜
âœ… UI ê¹”ë”í•˜ê²Œ ì •ë¦¬ (ë¶ˆí•„ìš”í•œ ìš”ì†Œ ì œê±°)
