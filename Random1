알겠습니다. 주어진 정규식을 사용하여 파일을 삭제하는 방식으로 수정할 부분을 함수별로 짚어드리겠습니다. 또한, 머신러닝 관련 코드는 유지하겠습니다.

수정할 부분
MainWindow.xaml.cs: 폴더와 정규식을 입력받고 파일 삭제를 시작할 때 해당 정보를 전달하도록 수정.
FileCleaner.cs: 파일 삭제 로직을 정규식과 일치 여부에 따라 수행하도록 수정.
1. MainWindow.xaml.cs
MainWindow.xaml.cs 수정
정규식 입력란과 폴더 선택 버튼 추가, 정규식을 전달하여 삭제를 시작하도록 수정합니다.

csharp
코드 복사
using System;
using System.Collections.Generic;
using System.IO;
using System.Text.RegularExpressions;
using System.Windows;

namespace SMDFileCleaner
{
    public partial class MainWindow : Window
    {
        private FileCleaner _fileCleaner;
        private string _folderPath;
        private string _regexPattern;

        public MainWindow()
        {
            InitializeComponent();
            _fileCleaner = new FileCleaner();
        }

        private void btnSelectFolder_Click(object sender, RoutedEventArgs e)
        {
            var dialog = new System.Windows.Forms.FolderBrowserDialog();
            if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                _folderPath = dialog.SelectedPath;
                txtFolderPath.Text = _folderPath;
            }
        }

        private void btnStart_Click(object sender, RoutedEventArgs e)
        {
            if (string.IsNullOrWhiteSpace(txtRegexPattern.Text) || string.IsNullOrWhiteSpace(_folderPath))
            {
                MessageBox.Show("폴더와 정규식을 입력하세요.", "오류", MessageBoxButton.OK, MessageBoxImage.Error);
                return;
            }

            _regexPattern = txtRegexPattern.Text;
            StartFileDeletion();
        }

        private void StartFileDeletion()
        {
            try
            {
                var regex = new Regex(_regexPattern);
                _fileCleaner.DeleteFiles(_folderPath, regex);
                MessageBox.Show("파일 삭제 완료.", "완료", MessageBoxButton.OK, MessageBoxImage.Information);
            }
            catch (Exception ex)
            {
                MessageBox.Show("파일 삭제 중 오류 발생: " + ex.Message, "오류", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    }
}
2. FileCleaner.cs
FileCleaner.cs 수정
정규식과 일치하는 파일을 삭제하도록 로직을 추가합니다.

csharp
코드 복사
using System;
using System.Collections.Generic;
using System.IO;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace SMDFileCleaner
{
    public class FileCleaner
    {
        public void DeleteFiles(string folderPath, Regex regex)
        {
            var files = GetFiles(folderPath);

            foreach (var file in files)
            {
                if (regex.IsMatch(file.FullName))
                {
                    try
                    {
                        file.Delete();
                        LogDeletionActivity($"파일 삭제됨: {file.FullName}");
                    }
                    catch (Exception ex)
                    {
                        LogError("Failed to delete file: " + ex.Message);
                    }
                }
            }
        }

        private List<FileInfo> GetFiles(string folderPath)
        {
            var files = new List<FileInfo>();
            try
            {
                var directory = new DirectoryInfo(folderPath);
                files.AddRange(directory.GetFiles("*", SearchOption.AllDirectories));
            }
            catch (UnauthorizedAccessException ex)
            {
                LogError("폴더 접근 거부됨: " + folderPath + " - " + ex.Message);
            }
            return files;
        }

        private void LogDeletionActivity(string message)
        {
            // 삭제 로그를 남기는 로직
        }

        private void LogError(string message)
        {
            // 에러 로그를 남기는 로직
        }
    }
}
위 수정된 코드로 다음을 수행합니다:

MainWindow.xaml.cs: 폴더 선택과 정규식 입력을 받아서 파일 삭제를 시작합니다.
FileCleaner.cs: 지정된 폴더 내 모든 파일을 검색하고, 정규식과 일치하는 파일을 삭제합니다.
이제 폴더와 정규식을 입력받아 파일 삭제를 진행할 수 있습니다. 필요한 정규식과 폴더 경로를 입력한 후, 파일 삭제 버튼을 클릭하면 해당 정규식과 일치하는 파일들이 삭제됩니