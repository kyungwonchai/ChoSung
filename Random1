니다. 다시 설명하자면, machine 컬럼이 1인 행들 중에서 ftsite 값이 '0,0'이고, 해당 barcode 값이 동일한 barcode 값을 가지는 machine 컬럼이 2인 행이 있을 때 그 행을 삭제하고자 하는 것입니다.

이를 위해서는 서브쿼리를 사용하여 조건을 만족하는 행을 찾아 삭제해야 합니다. 다음은 이러한 조건을 만족하는 행을 삭제하는 SQL 스크립트입니다:

해당 행을 삭제하는 쿼리
sql
코드 복사
DELETE FROM smd.ft_2d_archive
WHERE machine = 1
  AND ftsite = '0,0'
  AND barcode IN (
      SELECT barcode
      FROM smd.ft_2d_archive
      WHERE machine = 2
  );
이벤트 등록
이제 위의 삭제 쿼리를 주기적으로 실행하도록 이벤트를 등록합니다.

sql
코드 복사
-- 이벤트 스케줄러 활성화
SET GLOBAL event_scheduler = ON;

-- 조건에 맞는 행을 삭제하는 이벤트 등록
CREATE EVENT delete_specific_rows
ON SCHEDULE EVERY 1 DAY -- 하루에 한 번 실행
DO
BEGIN
    DELETE FROM smd.ft_2d_archive
    WHERE machine = 1
      AND ftsite = '0,0'
      AND barcode IN (
          SELECT barcode
          FROM smd.ft_2d_archive
          WHERE machine = 2
      );
END;
전체 스크립트
위의 모든 단계를 하나의 스크립트로 정리하면 다음과 같습니다:

sql
코드 복사
-- 이벤트 스케줄러 활성화
SET GLOBAL event_scheduler = ON;

-- 조건에 맞는 행을 선택하는 쿼리 (확인용)
SELECT *
FROM smd.ft_2d_archive
WHERE machine = 1
  AND ftsite = '0,0'
  AND barcode IN (
      SELECT barcode
      FROM smd.ft_2d_archive
      WHERE machine = 2
  );

-- 조건에 맞는 행을 삭제하는 이벤트 등록
CREATE EVENT delete_specific_rows
ON SCHEDULE EVERY 1 DAY -- 하루에 한 번 실행
DO
BEGIN
    DELETE FROM smd.ft_2d_archive
    WHERE machine = 1
      AND ftsite = '0,0'
      AND barcode IN (
          SELECT barcode
          FROM smd.ft_2d_archive
          WHERE machine = 2
      );
END;
이 스크립트를 실행하면 MySQL에서 매일 한 번씩 조건에 맞는 행을 삭제하는 작업이 자동으로 수행됩니다.