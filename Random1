전에 제공한 코드에서 XAML을 활용하여 차트의 축을 설정하고, 데이터는 C# 코드에서 바인딩하는 방식으로 수정해드리겠습니다. 특히, XAML에서 2차 축을 설정하고, C# 코드에서 데이터를 바인딩하는 방법을 포함하였습니다.

1. XAML 파일 (MainWindow.xaml):

xml
코드 복사
<Window x:Class="LineDataViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
        Title="Line Data Viewer" Height="600" Width="800">
    <Grid>
        <dxc:ChartControl x:Name="BoxPlotChart" SelectionChanged="BoxPlotChart_SelectionChanged">
            <dxc:XYDiagram2D>
                <!-- 기본 X축 -->
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D Title="모델 이름" />
                </dxc:XYDiagram2D.AxisX>
                <!-- 기본 Y축 -->
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D Title="값" />
                </dxc:XYDiagram2D.AxisY>
                <!-- 보조 X축 -->
                <dxc:XYDiagram2D.SecondaryAxesX>
                    <dxc:SecondaryAxisX2D x:Name="secondaryAxisX" Title="보조 X축" />
                </dxc:XYDiagram2D.SecondaryAxesX>
                <!-- 보조 Y축 -->
                <dxc:XYDiagram2D.SecondaryAxesY>
                    <dxc:SecondaryAxisY2D x:Name="secondaryAxisY" Title="보조 Y축" />
                </dxc:XYDiagram2D.SecondaryAxesY>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>

        <dxc:ChartControl x:Name="LModelChart" Margin="0,300,0,0">
            <dxc:XYDiagram2D>
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D Title="시간" />
                </dxc:XYDiagram2D.AxisX>
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D Title="값" />
                </dxc:XYDiagram2D.AxisY>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>

        <dxc:ChartControl x:Name="RModelChart" Margin="0,600,0,0">
            <dxc:XYDiagram2D>
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D Title="시간" />
                </dxc:XYDiagram2D.AxisX>
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D Title="값" />
                </dxc:XYDiagram2D.AxisY>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>
    </Grid>
</Window>
2. C# 코드 (MainWindow.xaml.cs):

csharp
코드 복사
using DevExpress.Xpf.Charts;
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Windows;

namespace LineDataViewer
{
    public partial class MainWindow : Window
    {
        private List<DataPoint> allData;

        public MainWindow()
        {
            InitializeComponent();
            LoadData();
            InitializeBoxPlotChart();
        }

        private void LoadData()
        {
            allData = new List<DataPoint>();
            var connectionString = "YourConnectionStringHere";

            using (var connection = new SqlConnection(connectionString))
            {
                connection.Open();
                var query = @"
                    SELECT ModelName, Timestamp, MP1DATA, MP2DATA, MP3DATA, MP4DATA, MP5DATA
                    FROM View_InspectionResult
                    ORDER BY Timestamp DESC";

                using (var command = new SqlCommand(query, connection))
                using (var reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        allData.Add(new DataPoint
                        {
                            ModelName = reader.GetString(0),
                            Timestamp = reader.GetDateTime(1),
                            MP1 = reader.GetDouble(2),
                            MP2 = reader.GetDouble(3),
                            MP3 = reader.GetDouble(4),
                            MP4 = reader.GetDouble(5),
                            MP5 = reader.GetDouble(6),
                        });
                    }
                }
            }
        }

        private void InitializeBoxPlotChart()
        {
            var lineGroups = allData.GroupBy(d => d.ModelName);

            foreach (var group in lineGroups)
            {
                var recentData = group.Take(100).ToList();

                var allValues = recentData.SelectMany(d => new[] { d.MP1, d.MP2, d.MP3, d.MP4, d.MP5 }).ToList();
                if (allValues.Count > 0)
                {
                    var series = new BoxPlotSeries2D
                    {
                        DisplayName = group.Key,
                        ArgumentDataMember = "Argument",
                        MinValueDataMember = "Min",
                        Quartile1ValueDataMember = "Quartile1",
                        MedianValueDataMember = "Median",
                        Quartile3ValueDataMember = "Quartile3",
                        MaxValueDataMember = "Max",
                        DataSource = new List<BoxPlotData>
                        {
                            new BoxPlotData
                            {
                                Argument = group.Key,
                                Min = allValues.Min(),
                                Quartile1 = GetPercentile(allValues, 25),
                                Median = GetPercentile(allValues, 50),
                                Quartile3 = GetPercentile(allValues, 75),
                                Max = allValues.Max()
                            }
                        }
                    };
                    series.Tag = group.Key; // 시리즈에 라인 이름을 태그로 저장
                    BoxPlotChart.Diagram.Series.Add(series);
                }
            }
        }

        private void BoxPlotChart_SelectionChanged(object sender, ChartSelectionChangedEventArgs e)
        {
            var selectedSeries = e.SelectedItems.OfType<BoxPlotSeries2D>().FirstOrDefault();
            if (selectedSeries != null)
            {
                var lineName = selectedSeries.Tag.ToString();
                LoadLineData(lineName);
            }
        }

        private void LoadLineData(string lineName)
        {
            var lineData = allData.Where(d => d.ModelName == lineName).Take(500).ToList();

            var lModelData = lineData.Where(d => d.ModelName.EndsWith("L")).ToList();
            var rModelData = lineData.Where(d => d.ModelName.EndsWith("R")).ToList();

            InitializeModelChart(LModelChart, lModelData, "시간", "값");
            InitializeModelChart(RModelChart, rModelData, "시간", "값");
        }

        private void InitializeModelChart
::contentReference[oaicite:0]{index=0}
 





나의 말:
이어라 끊어졌네
ChatGPT의 말:
ChatGPT
이전에 제공한 코드에서 XAML을 활용하여 차트의 축을 설정하고, 데이터는 C# 코드에서 바인딩하는 방식으로 수정해드리겠습니다. 특히, XAML에서 2차 축을 설정하고, C# 코드에서 데이터를 바인딩하는 방법을 포함하였습니다.

1. XAML 파일 (MainWindow.xaml):

xml
코드 복사
<Window x:Class="LineDataViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
        Title="Line Data Viewer" Height="600" Width="800">
    <Grid>
        <!-- 박스 플롯 차트 -->
        <dxc:ChartControl x:Name="BoxPlotChart" SelectionChanged="BoxPlotChart_SelectionChanged">
            <dxc:XYDiagram2D>
                <!-- 기본 X축 -->
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D Title="모델 이름" />
                </dxc:XYDiagram2D.AxisX>
                <!-- 기본 Y축 -->
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D Title="값" />
                </dxc:XYDiagram2D.AxisY>
                <!-- 보조 X축 -->
                <dxc:XYDiagram2D.SecondaryAxesX>
                    <dxc:SecondaryAxisX2D x:Name="secondaryAxisX" Title="보조 X축" />
                </dxc:XYDiagram2D.SecondaryAxesX>
                <!-- 보조 Y축 -->
                <dxc:XYDiagram2D.SecondaryAxesY>
                    <dxc:SecondaryAxisY2D x:Name="secondaryAxisY" Title="보조 Y축" />
                </dxc:XYDiagram2D.SecondaryAxesY>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>

        <!-- L 모델 차트 -->
        <dxc:ChartControl x:Name="LModelChart" Margin="0,300,0,0">
            <dxc:XYDiagram2D>
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D Title="시간" />
                </dxc:XYDiagram2D.AxisX>
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D Title="값" />
                </dxc:XYDiagram2D.AxisY>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>

        <!-- R 모델 차트 -->
        <dxc:ChartControl x:Name="RModelChart" Margin="0,600,0,0">
            <dxc:XYDiagram2D>
                <dxc:XYDiagram2D.AxisX>
                    <dxc:AxisX2D Title="시간" />
                </dxc:XYDiagram2D.AxisX>
                <dxc:XYDiagram2D.AxisY>
                    <dxc:AxisY2D Title="값" />
                </dxc:XYDiagram2D.AxisY>
            </dxc:XYDiagram2D>
        </dxc:ChartControl>
    </Grid>
</Window>
2. C# 코드 (MainWindow.xaml.cs):

csharp
코드 복사
using DevExpress.Xpf.Charts;
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Windows;

namespace LineDataViewer
{
    public partial class MainWindow : Window
    {
        private List<DataPoint> allData;

        public MainWindow()
        {
            InitializeComponent();
            LoadData();
            InitializeBoxPlotChart();
        }

        private void LoadData()
        {
            allData = new List<DataPoint>();
            var connectionString = "YourConnectionStringHere";

            using (var connection = new SqlConnection(connectionString))
            {
                connection.Open();
                var query = @"
                    SELECT ModelName, Timestamp, MP1DATA, MP2DATA, MP3DATA, MP4DATA, MP5DATA
                    FROM View_InspectionResult
                    ORDER BY Timestamp DESC";

                using (var command = new SqlCommand(query, connection))
                using (var reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        allData.Add(new DataPoint
                        {
                            ModelName = reader.GetString(0),
                            Timestamp = reader.GetDateTime(1),
                            MP1 = reader.GetDouble(2),
                            MP2 = reader.GetDouble(3),
                            MP3 = reader.GetDouble(4),
                            MP4 = reader.GetDouble(5),
                            MP5 = reader.GetDouble(6),
                        });
                    }
                }
            }
        }

        private void InitializeBoxPlotChart()
        {
            var lineGroups = allData.GroupBy(d => d.ModelName);

            foreach (var group in lineGroups)
            {
                var recentData = group.Take(100).ToList();

                var allValues = recentData.SelectMany(d => new[] { d.MP1, d.MP2, d.MP3, d.MP4, d.MP5 }).ToList();
                if (allValues.Count > 0)
                {
                    var series = new BoxPlotSeries2D
                    {
                        DisplayName = group.Key,
                        ArgumentDataMember = "Argument",
                        MinValueDataMember = "Min",
                        Quartile1ValueDataMember = "Quartile1",
                        MedianValueDataMember = "Median",
                        Quartile3ValueDataMember = "Quartile3",
                        MaxValueDataMember = "Max",
                        DataSource = new List<BoxPlotData>
                        {
                            new BoxPlotData
                            {
                                Argument = group.Key,
                                Min = allValues.Min(),
                                Quartile1 = GetPercentile(allValues, 25),
                                Median = GetPercentile(allValues, 50),
                                Quartile3 = GetPercentile(allValues, 75),
                                Max = allValues.Max()
                            }
                        }
                    };
                    series.Tag = group.Key; // 시리즈에 라인 이름을 태그로 저장
                    BoxPlotChart.Diagram.Series.Add(series);
                }
            }
        }

        private void BoxPlotChart_SelectionChanged(object sender, ChartSelectionChangedEventArgs e)
        {
            var selectedSeries = e.SelectedItems.OfType<BoxPlotSeries2D>().FirstOrDefault();
            if (selectedSeries != null)
            {
                var lineName = selectedSeries.Tag.ToString();
                LoadLineData(lineName);
            }
        }

        private void LoadLineData(string lineName)
        {
            var lineData = allData.Where(d => d.ModelName == lineName).Take(500).ToList();

            var lModelData = lineData.Where(d => d.ModelName.EndsWith("L")).ToList();
            var rModelData = lineData.Where(d => d.ModelName.EndsWith("R")).ToList();

            InitializeModelChart(LModelChart, lModelData, "시간", "값");
            InitializeModelChart(RModelChart, rModelData, "