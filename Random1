using System.Globalization;
using System.Resources;
using DevExpress.XtraEditors;  // DevExpress 컨트롤 관련 네임스페이스 추가

public partial class MainForm : XtraForm  // XtraForm 사용 (DevExpress의 기본 폼)
{
    ResourceManager resManager;
    CultureInfo cultureInfo;

    public MainForm()
    {
        InitializeComponent();

        // ResourceManager 초기화 (리소스 파일 경로에 맞게 설정)
        resManager = new ResourceManager("YourProjectNamespace.Properties.Lang", typeof(MainForm).Assembly);

        // 기본 시스템 언어 설정
        cultureInfo = CultureInfo.CurrentUICulture;

        // 모든 DevExpress 컨트롤에 리소스 적용
        ApplyLocalizationToDevExpressControls(this);
    }

    // DevExpress 컨트롤에 리소스를 적용하는 함수
    private void ApplyLocalizationToDevExpressControls(BaseControl devControl)
    {
        // DevExpress 컨트롤만 필터링하여 처리
        if (devControl.Tag != null)
        {
            string controlTag = devControl.Tag.ToString();
            if (!string.IsNullOrEmpty(controlTag))
            {
                // 리소스에서 Tag로 지정된 키를 찾아 해당 텍스트를 적용
                string localizedText = resManager.GetString(controlTag, cultureInfo);
                if (!string.IsNullOrEmpty(localizedText))
                {
                    devControl.Text = localizedText;  // DevExpress 컨트롤의 Text 속성에 적용
                }
            }
        }

        // 재귀적으로 모든 자식 DevExpress 컨트롤에 대해 동일하게 처리
        foreach (BaseControl childDevControl in devControl.Controls)
        {
            ApplyLocalizationToDevExpressControls(childDevControl);
        }
    }

    // 언어 변경 함수
    private void ChangeLanguage(string culture)
    {
        cultureInfo = new CultureInfo(culture);
        // 현재 문화권을 설정하고 모든 DevExpress 컨트롤에 대해 다시 리소스 적용
        ApplyLocalizationToDevExpressControls(this);
    }

    // 예: 한국어로 변경하는 버튼 클릭 시
    private void buttonChangeToKorean_Click(object sender, EventArgs e)
    {
        ChangeLanguage("ko");
    }

    // 예: 영어로 변경하는 버튼 클릭 시
    private void buttonChangeToEnglish_Click(object sender, EventArgs e)
    {
        ChangeLanguage("en");
    }