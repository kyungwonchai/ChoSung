상환경에서 CUDA 버전이 두 개(nvcc --version 실행 시 12.8, 12.4 두 줄 출력)로 나오는 문제 해결 방법
CUDA가 여러 개 설치된 경우, 환경 변수에서 우선순위를 조정하거나 불필요한 경로를 삭제해야 합니다.
Windows에서는 nvcc 실행 시 환경 변수(PATH 변수)에 등록된 순서대로 검색하므로, CUDA 12.4만 남기려면 CUDA 12.8 관련 환경 변수를 제거해야 합니다.

1. 현재 등록된 CUDA 버전 확인
(1) where nvcc 실행
sh
코드 복사
where nvcc
✅ 출력 예시 (CUDA 12.8, 12.4 두 개 등록됨)

makefile
코드 복사
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.8\bin\nvcc.exe
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4\bin\nvcc.exe
🚨 이 경우, 환경 변수에 두 개의 CUDA 버전이 등록되어 있는 것임.
→ 해결 방법: CUDA 12.4만 남기고 12.8 경로를 삭제해야 함.

2. CUDA 12.8을 환경 변수에서 제거하는 방법
방법 1: 일시적으로 CUDA 12.8 사용 안 하기 (현재 세션)
CMD에서 현재 터미널에서만 CUDA 12.4를 우선순위로 설정:

sh
코드 복사
set PATH=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4\bin;%PATH%
set CUDA_HOME=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4
✅ 이렇게 하면, 현재 터미널에서만 CUDA 12.4가 우선 적용됩니다.
❌ 하지만 터미널을 닫으면 다시 원래 상태로 복구됨. → 환경 변수를 영구 수정해야 함!

방법 2: CUDA 12.8 환경 변수를 영구적으로 삭제 (권장)
Windows 환경 변수 편집 열기

Windows 키 + R → sysdm.cpl 입력 → 확인
고급 탭 → 환경 변수 버튼 클릭
시스템 변수에서 Path 편집

Path 변수 선택 → 편집 버튼 클릭
CUDA 12.8 관련 경로 삭제
makefile
코드 복사
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.8\bin
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.8\libnvvp
CUDA 12.4 경로만 남김
makefile
코드 복사
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4\bin
환경 변수 CUDA_HOME 수정

CUDA_HOME 변수를 찾음 (없으면 새로 생성)
값 변경:
makefile
코드 복사
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4
설정 저장 후 시스템 재부팅

3. 변경 후 확인
CMD 열고 nvcc --version 실행

sh
코드 복사
nvcc --version
✅ 출력 예시 (이제 CUDA 12.4만 보임)

arduino
코드 복사
nvcc: NVIDIA (R) Cuda compiler
release 12.4, V12.4.76
where nvcc 실행하여 CUDA 12.8 경로가 삭제되었는지 확인

sh
코드 복사
where nvcc
✅ 출력 예시 (CUDA 12.4만 남음)

makefile
코드 복사
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.4\bin\nvcc.exe
PyTorch에서 CUDA 12.4가 정상적으로 적용되었는지 확인

python
코드 복사
import torch
print("CUDA Available:", torch.cuda.is_available())
print("CUDA Version:", torch.version.cuda)
print("GPU Name:", torch.cuda.get_device_name(0) if torch.cuda.is_available() else "No GPU Found")
✅ 출력 예시 (정상 적용)

yaml
코드 복사
CUDA Available: True
CUDA Version: 12.4
GPU Name: NVIDIA GeForce RTX 3090
4. 최종 정리
✅ CUDA 12.8과 CUDA 12.4가 함께 설치된 경우, 환경 변수(Path, CUDA_HOME)에서 12.8 경로를 제거해야 함.
✅ 일시적으로 CUDA 12.4를 사용하려면 set PATH=... 명령어를 실행.
✅ 영구적으로 CUDA 12.4만 남기려면 Windows 환경 변수 편집에서 12.8 경로 삭제 후 시스템 재부팅.
✅ 변경 후 nvcc --version, where nvcc, torch.version.cuda를 실행하여 CUDA 12.4가 적용되었는지 확인.