가장 상단 막대의 값(몇 개인지)을 표시하려면 각 막대 위에 숫자 값을 추가로 그리는 코드를 수정해야 합니다. 수정해야 할 부분은 drawHorizontalBarChart 함수입니다.

수정된 drawHorizontalBarChart 함수
javascript
코드 복사
function drawHorizontalBarChart(canvasId, data, labelKey, valueKey, color) {
    const canvas = document.getElementById(canvasId);
    const ctx = canvas.getContext('2d');
    const labels = data.map(d => d[labelKey]);
    const values = data.map(d => d[valueKey]);
    const barHeight = 30;
    const maxValue = Math.max(...values);
    const scale = (canvas.width - 100) / maxValue;

    canvas.height = Math.max(data.length * (barHeight + 10), 300); // 캔버스 높이 설정

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    labels.forEach((label, index) => {
        const barWidth = values[index] * scale;
        const y = index * (barHeight + 10) + 20;

        // Draw bar
        ctx.fillStyle = color;
        ctx.fillRect(100, y, barWidth, barHeight);

        // Draw label
        ctx.fillStyle = '#ffffff';
        ctx.textAlign = 'right';
        ctx.fillText(label, 90, y + barHeight / 2 + 5);

        // Draw value on the bar (for the first bar and all others)
        ctx.textAlign = 'left';
        ctx.fillText(values[index], 100 + barWidth + 5, y + barHeight / 2 + 5);

        // Draw value above the bar (for the first bar)
        if (index === 0) {
            ctx.textAlign = 'center';
            ctx.fillText(values[index], 100 + barWidth / 2, y - 5);
        }
    });
}
변경 사항 설명
각 막대 위에 숫자 표시:

if (index === 0) 조건으로 상단 막대(첫 번째 막대)에만 값이 막대 위쪽에 표시되도록 설정.
숫자는 막대의 중앙에 정렬되며, ctx.fillText(values[index], 100 + barWidth / 2, y - 5)로 그려집니다.
기존 막대 오른쪽 값 유지:

모든 막대의 오른쪽에도 숫자를 표시하여 시각적으로 일관성을 유지.
값 위치 조정:

첫 번째 막대의 숫자가 y - 5로 막대 위쪽에 표시되도록 조정.