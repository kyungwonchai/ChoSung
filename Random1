using System;
using System.Net.Http;

class Program
{
    static void Main(string[] args)
    {
        string recipient = "recipient@example.com";
        string subject = "Email Subject";
        string body = "Email Body";

        // MultipartFormDataContent 생성
        var formDataContent = new MultipartFormDataContent();

        // 수신자 이메일 주소 추가
        formDataContent.Add(new StringContent(recipient), "to");

        // 이메일 제목 추가
        formDataContent.Add(new StringContent(subject), "subject");

        // 이메일 내용 추가
        formDataContent.Add(new StringContent(body), "body");

        // 이메일 첨부 파일 추가
        byte[] fileBytes = System.IO.File.ReadAllBytes("path/to/attachment.pdf");
        var fileContent = new ByteArrayContent(fileBytes);
        formDataContent.Add(fileContent, "attachment", "attachment.pdf");

        // HttpClient를 사용하여 POST 요청 전송
        using (var httpClient = new HttpClient())
        {
            var apiUrl = "https://api.example.com/send-email"; // 이메일 발송 API 엔드포인트 URL

            try
            {
                var response = httpClient.PostAsync(apiUrl, formDataContent).Result;
                response.EnsureSuccessStatusCode();

                Console.WriteLine("Email sent successfully.");
            }
            catch (Exception ex)
            {
                Console.WriteLine("Failed to send email: " + ex.Message);
            }
        }
    }
}
