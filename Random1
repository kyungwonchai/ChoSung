# 1. 이전 설정이 남아있을 수 있으니 정리 (선택 사항이지만 권장)
sudo apt-get purge -y msodbcsql18 mssql-tools18 unixodbc-dev

# 2. 필수 패키지 설치 (curl, gpg 등)
sudo apt-get update
sudo apt-get install -y curl apt-transport-https

# 3. Microsoft GPG 보안 키 등록
curl https://packages.microsoft.com/keys/microsoft.asc | sudo gpg --dearmor -o /usr/share/keyrings/microsoft-prod.gpg

# 4. Microsoft의 공식 패키지 저장소(Repository)를 시스템에 추가
# 사용 중인 우분투 버전에 맞는 저장소를 자동으로 추가해줍니다.
sudo sh -c 'echo "deb [arch=amd64,arm64,armhf signed-by=/usr/share/keyrings/microsoft-prod.gpg] https://packages.microsoft.com/ubuntu/$(lsb_release -rs)/prod $(lsb_release -cs) main" > /etc/apt/sources.list.d/mssql-release.list'

# 5. 새로 추가된 저장소의 패키지 목록을 가져오기
sudo apt-get update

# 6. 드디어 드라이버 설치!
# ACCEPT_EULA=Y는 EULA(최종 사용자 라이선스 계약)에 동의한다는 의미입니다.
sudo ACCEPT_EULA=Y apt-get install -y msodbcsql18 unixodbc-dev