록 index.html 파일을 수정하겠습니다.

수정된 index.html 파일
html
코드 복사
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Table Mask Cleaning</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        .yellow {
            background-color: yellow;
        }
        .orange {
            background-color: orange;
        }
        .grey {
            background-color: grey;
        }
        .refresh-button {
            display: block;
            width: 100%;
            padding: 10px;
            font-size: 16px;
            font-weight: bold;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            text-align: center;
        }
        .refresh-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>Table Mask Cleaning</h1>
    <button class="refresh-button" onclick="refreshData()">Refresh</button>
    <table>
        <thead>
            <tr>
                <th>CLine</th>
                <th>CMachine</th>
                <th>CPCBTEMP</th>
                <th>CMASKTEMP</th>
                <th>CHUMID</th>
                <th>CSORDER</th>
                <th>CPAPER</th>
                <th>CSOLVENT</th>
                <th>CFILETIME</th>
                <th>DIFF</th>
            </tr>
        </thead>
        <tbody id="table-body">
            {% for row in data %}
            <tr class="{% if row.CFILETIME is none %}grey{% elif row.DIFF > 480 %}orange{% elif row.DIFF > 10 %}yellow{% endif %}">
                <td>{{ row.CLine }}</td>
                <td>{{ row.CMachine }}</td>
                <td>{{ row.CPCBTEMP }}</td>
                <td>{{ row.CMASKTEMP }}</td>
                <td>{{ row.CHUMID }}</td>
                <td>{{ row.CSORDER }}</td>
                <td>{{ row.CPAPER }}</td>
                <td>{{ row.CSOLVENT }}</td>
                <td>{{ row.CFILETIME }}</td>
                <td>{{ row.DIFF }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <script>
        function refreshData() {
            fetch('/refresh')
                .then(response => response.json())
                .then(data => {
                    const tableBody = document.getElementById('table-body');
                    tableBody.innerHTML = '';
                    data.forEach(row => {
                        const tr = document.createElement('tr');
                        let className = '';
                        if (row.CFILETIME === null) {
                            className = 'grey';
                        } else if (row.DIFF > 480) {
                            className = 'orange';
                        } else if (row.DIFF > 10) {
                            className = 'yellow';
                        }
                        tr.className = className;
                        tr.innerHTML = `
                            <td>${row.CLine}</td>
                            <td>${row.CMachine}</td>
                            <td>${row.CPCBTEMP}</td>
                            <td>${row.CMASKTEMP}</td>
                            <td>${row.CHUMID}</td>
                            <td>${row.CSORDER}</td>
                            <td>${row.CPAPER}</td>
                            <td>${row.CSOLVENT}</td>
                            <td>${row.CFILETIME}</td>
                            <td>${row.DIFF}</td>
                        `;
                        tableBody.appendChild(tr);
                    });
                });
        }
    </script>
</body>
</html>
변경된 부분 설명
HTML 템플릿에서 None 체크 및 회색 클래스 추가:

CFILETIME이 None인 경우, grey 클래스를 적용하여 행 색상을 회색으로 설정합니다.
html
코드 복사
<tr class="{% if row.CFILETIME is none %}grey{% elif row.DIFF > 480 %}orange{% elif row.DIFF > 10 %}yellow{% endif %}">
JavaScript에서 None 체크 및 회색 클래스 추가:

row.CFILETIME이 null인 경우, grey 클래스를 적용하여 행 색상을 회색으로 설정합니다.
javascript
코드 복사
if (row.CFILETIME === null) {
    className = 'grey';
} else if (row.DIFF > 480) {
    className = 'orange';
} else if (row.DIFF > 10) {
    className = 'yellow';
}
이제 CFILETIME이 None인 경우 행 색상이 회색으로 표시되도록 