업은 **배포 대상이 되는 모든 서버(500대 전부)**에 각각 접속해서 최초 한 번만 해주시면 됩니다. 그 이후로는 이전에 드린 파이썬 스크립트가 아무런 문제 없이 작동할 것입니다.

1단계: 원격 서버 접속
터미널에서 pi 계정으로 원격 서버에 접속합니다.

Bash

ssh pi@192.168.1.101
2단계: visudo로 sudo 권한 파일 열기
절대로 vim이나 nano로 /etc/sudoers 파일을 직접 열면 안 됩니다. 문법이 틀리면 sudo 권한을 영원히 잃을 수 있습니다. 반드시 아래 명령어를 사용해야 합니다. 이 명령어는 저장할 때 문법을 검사해서 실수를 막아줍니다.

Bash

sudo visudo
3단계: 파일 맨 아래에 권한 추가
sudo visudo를 실행하면 편집기가 열립니다. 키보드 방향키를 이용해 파일의 맨 아래로 이동한 후, 다음 내용을 똑같이 추가해 주세요.

pi ALL=(ALL) NOPASSWD: ALL
pi: pi라는 사용자는

ALL=: 어떤 컴퓨터에서 접속하든

(ALL): 모든 사용자의 권한으로

NOPASSWD: ALL: 암호 없이 모든 명령어를 실행할 수 있다.

4단계: 저장하고 종료
편집기가 nano일 가능성이 높습니다. 아래 순서대로 키보드를 눌러 저장하고 종료합니다.

Ctrl + X (종료)

Y (저장하겠냐는 물음에 Yes)

Enter (파일 이름을 그대로 사용)

5단계: 모든 서버에 반복
192.168.1.102를 포함한 모든 나머지 서버에 접속하여 위 1~4단계를 똑같이 반복해 주시면 모든 준비가 끝납니다.

이제 모든 서버에 pi 사용자의 sudo 마스터키가 발급되었습니다.