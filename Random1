QL에서 특정 테이블의 행을 주기적으로 삭제하는 작업을 수행하려면 이벤트 스케줄러를 사용할 수 있습니다. 요청하신 작업을 수행하는 이벤트를 설정하는 방법은 다음과 같습니다.

1. 이벤트 스케줄러 활성화
먼저 MySQL의 이벤트 스케줄러가 활성화되어 있는지 확인해야 합니다. 이벤트 스케줄러가 비활성화되어 있으면 다음 명령어를 사용하여 활성화할 수 있습니다:

sql
코드 복사
SET GLOBAL event_scheduler = ON;
이 명령어를 실행하면 MySQL 이벤트 스케줄러가 활성화됩니다.

2. 1개월이 지난 데이터를 삭제하는 이벤트 생성
이제 요청하신 대로 smd.management_mobile_deviceid 테이블에서 time 컬럼의 값이 1개월이 지난 행을 삭제하는 이벤트를 생성할 수 있습니다. 아래 쿼리를 사용하세요:

sql
코드 복사
CREATE EVENT IF NOT EXISTS delete_old_records
ON SCHEDULE EVERY 1 HOUR
DO
BEGIN
    DELETE FROM smd.management_mobile_deviceid
    WHERE time < NOW() - INTERVAL 1 MONTH;
END;
이 쿼리의 구성 요소를 설명드리면:

CREATE EVENT IF NOT EXISTS delete_old_records: delete_old_records라는 이름의 이벤트를 생성합니다. 이미 존재하는 경우에는 새로 생성하지 않습니다.
ON SCHEDULE EVERY 1 HOUR: 이 이벤트는 1시간마다 한 번씩 실행됩니다.
DO BEGIN ... END;: 이벤트의 본문입니다. 이 안에 포함된 SQL 구문이 주기적으로 실행됩니다.
DELETE FROM smd.management_mobile_deviceid WHERE time < NOW() - INTERVAL 1 MONTH;: time 컬럼의 값이 현재 시간에서 1개월 이전인 모든 행을 삭제합니다.
3. 이벤트 상태 확인
이벤트가 정상적으로 등록되었는지 확인하려면 다음 쿼리를 사용할 수 있습니다:

sql
코드 복사
SHOW EVENTS LIKE 'delete_old_records';
이 쿼리를 실행하면 방금 생성한 이벤트의 정보를 확인할 수 있습니다.

이와 같이 설정하면, smd.management_mobile_deviceid 테이블에서 time 컬럼의 값이 1개월이 지난 행이 1시간마다 자동으로 삭제됩니