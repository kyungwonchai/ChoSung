using System;
using System.Data;
using System.Drawing;
using System.Windows.Forms;
using DevExpress.XtraCharts;
using DevExpress.XtraTab;

// DataTableA를 예시로 가정합니다.
DataTable dataTable = DataTableA;

// XtraTabControl 생성 및 XtraTabPage 생성
XtraTabControl tabControl = new XtraTabControl();
tabControl.Dock = DockStyle.Fill;
this.Controls.Add(tabControl);

XtraTabPage tabPage3 = new XtraTabPage();
tabPage3.Text = "Chart Page";
tabControl.TabPages.Add(tabPage3);

// Chart Control 생성
ChartControl chartControl = new ChartControl();
chartControl.Size = tabPage3.Size;
chartControl.Dock = DockStyle.Fill;
tabPage3.Controls.Add(chartControl);

// XYDiagram 생성
XYDiagram diagram = new XYDiagram();
chartControl.Diagram = diagram;

// 데이터 시리즈 생성
Series series = new Series("Usage Rate", ViewType.Line);
diagram.Series.Add(series);

// 데이터 바인딩
series.ArgumentDataMember = "InputTime"; // 입력시간 컬럼
series.ValueDataMembers.AddRange("UsageRate"); // 사용비율 컬럼
series.DataSource = dataTable;

// 마지막 부팅시간 데이터 시리즈 생성
Series lastBootTimeSeries = new Series("Last Boot Time", ViewType.Point);
diagram.Series.Add(lastBootTimeSeries);

// 마지막 부팅시간 데이터 바인딩
lastBootTimeSeries.ArgumentDataMember = "InputTime"; // 입력시간 컬럼
lastBootTimeSeries.ValueDataMembers.AddRange("LastBootTime"); // 마지막 부팅시간 컬럼
lastBootTimeSeries.DataSource = dataTable;

// 마지막 부팅시간 데이터 점 스타일 설정
lastBootTimeSeries.LabelsVisibility = DevExpress.Utils.DefaultBoolean.False; // 라벨 비활성화
lastBootTimeSeries.View.Color = Color.Blue; // 점 색상 설정
lastBootTimeSeries.View.PointMarkerOptions.Kind = MarkerKind.Circle; // 점 모양 설정
lastBootTimeSeries.View.PointMarkerOptions.Size = 10; // 점 크기 설정

// X축 설정
AxisBase xAxis = diagram.AxisX;
xAxis.DateTimeOptions.Format = DateTimeFormat.Custom;
xAxis.DateTimeOptions.FormatString = "yyyy-MM-dd HH:mm:ss"; // 날짜 및 시간 형식 설정
xAxis.Label.Angle = 45; // X축 라벨 회전 각도 설정

// Y축 설정
AxisBase yAxis = diagram.AxisY;
yAxis.WholeRange.Auto = false;
yAxis.WholeRange.SetMinMaxValues(0, 100);

// 그래프 그리기
chartControl.Dock = DockStyle.Fill;
tabPage3.Controls.Add(chartControl);
