using DevExpress.XtraRichEdit;
using System.Data;
using System.Data.SqlClient;
using System.IO;

// RichEditControl 생성
RichEditControl richEditControl1 = new RichEditControl();

// 데이터베이스 연결 문자열 설정
string connectionString = "YourConnectionString"; // 실제 연결 문자열로 대체해야 합니다.

// RichEditControl의 내용을 데이터베이스에 저장
SaveContentToDatabase(richEditControl1, connectionString);

// 데이터베이스에서 내용을 불러와서 RichEditControl에 표시
LoadContentFromDatabase(richEditControl1, connectionString);

// RichEditControl의 내용을 데이터베이스에 저장하는 함수
private void SaveContentToDatabase(RichEditControl richEditControl, string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        SqlCommand command = new SqlCommand("INSERT INTO YourTableName (Content) VALUES (@Content)", connection);
        MemoryStream stream = new MemoryStream();
        richEditControl.SaveDocument(stream, DocumentFormat.Rtf);
        command.Parameters.AddWithValue("@Content", Encoding.UTF8.GetString(stream.ToArray()));
        command.ExecuteNonQuery();
    }
}

// 데이터베이스에서 내용을 불러와서 RichEditControl에 표시하는 함수
private void LoadContentFromDatabase(RichEditControl richEditControl, string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        SqlCommand command = new SqlCommand("SELECT Content FROM YourTableName ORDER BY ID DESC", connection);
        SqlDataReader reader = command.ExecuteReader();
        if (reader.Read())
        {
            byte[] contentBytes = (byte[])reader["Content"];
            MemoryStream stream = new MemoryStream(contentBytes);
            richEditControl.LoadDocument(stream, DocumentFormat.Rtf);
        }

        reader.Close();
    }
}
