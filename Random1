쿼리로 여러 이미지를 업데이트하려면, SQL 쿼리를 동적으로 생성하고, 이미지 데이터를 매개변수로 전달하여 업데이트를 진행할 수 있습니다. 아래 코드는 각 Image 컨트롤의 이미지를 byte 배열로 변환하고, 모든 이미지를 한 번의 쿼리로 데이터베이스에 업데이트하는 방법을 보여줍니다.

1. 이미지를 byte 배열로 변환하는 메서드
csharp
Copy code
public byte[] ImageToByte(BitmapImage imageSource)
{
    if (imageSource == null) return null;

    JpegBitmapEncoder encoder = new JpegBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(imageSource));
    using (MemoryStream ms = new MemoryStream())
    {
        encoder.Save(ms);
        return ms.ToArray();
    }
}
2. 이미지 데이터와 쿼리 생성
csharp
Copy code
public void UpdateAllImages(Image[] imageControls)
{
    string connectionString = "Your Connection String Here";
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        conn.Open();
        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.Connection = conn;

            for (int i = 0; i < imageControls.Length; i++)
            {
                BitmapImage bitmapImage = imageControls[i].Source as BitmapImage;
                if (bitmapImage != null)
                {
                    byte[] imageData = ImageToByte(bitmapImage);
                    string paramName = $"@Image{i}";
                    cmd.Parameters.AddWithValue(paramName, imageData);

                    cmd.CommandText += $"UPDATE YourTableName SET YourImageColumn = {paramName} WHERE Id = {i + 1}; ";
                }
            }

            if (cmd.CommandText != "")
            {
                cmd.ExecuteNonQuery();
            }
        }
    }
}
3. 업데이트 메서드 호출
csharp
Copy code
private void UpdateImages()
{
    Image[] imageControls = { image1, image2, image3, image4 };
    UpdateAllImages(imageControls);
}
이 코드는 모든 이미지를 순회하면서 각 이미지에 대해 쿼리 문자열을 생성하고, 해당 이미지 데이터를 SQL 매개변수로 추가합니다. 마지막에 모든 업데이트 쿼리를 한 번에 실행합니다.

"Your Connection String Here", "YourTableName", "YourImageColumn"는 실제 환경에 맞게 수정해야 하며, 