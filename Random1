라즈베리파이3(armhf 아키텍처)를 위해 인터넷이 연결된 컴퓨터에서 watchdog 패키지를 다운로드하고, 오프라인으로 라즈베리파이에 설치하는 방법을 아주 상세하게 설명해 드리겠습니다.

1단계: 라즈베리파이에서 서명 파일 생성
인터넷이 연결되지 않은 라즈베리파이에서 다음 명령어를 실행하여 watchdog 패키지 설치에 필요한 종속성 정보를 담은 서명 파일을 만듭니다.

Bash

# apt-offline이 설치되어 있지 않으므로, 이 단계를 건너뜁니다.
# 대신, 직접 필요한 패키지 이름을 확인하는 방법을 사용합니다.

# 1. 패키지 목록을 미리 다운로드한 후,
# 2. apt-offline을 사용해 패키지 설치 목록을 만드는 것이 일반적인 절차입니다.
# 하지만, 지금은 apt-offline 설치 자체가 불가능하므로, 수동으로 패키지 이름을 확인하겠습니다.
# 일반적으로 watchdog 설치에 필요한 주요 패키지는 'watchdog' 자체와 'libsystemd-dev' 정도입니다.
# 라즈베리파이 OS 버전과 아키텍처(armhf)를 기준으로 다운로드해야 합니다.
이 방법은 다소 복잡하므로, 가장 확실하고 간단한 방법인 .deb 파일을 직접 다운로드하는 방법을 사용하겠습니다.

2단계: 인터넷이 되는 컴퓨터에서 패키지 다운로드
인터넷이 되는 우분투 PC를 이용해 라즈베리파이3용 watchdog 패키지를 다운로드합니다. 라즈베리파이3의 아키텍처는 **armhf**입니다.

웹 브라우저를 열고 다음 사이트로 이동합니다:

Ubuntu 패키지 아카이브: https://packages.ubuntu.com/

watchdog 패키지 검색:

검색창에 watchdog을 입력하고 엔터를 누릅니다.

검색 결과 페이지에서 watchdog 패키지를 선택합니다.

패키지 다운로드 링크 찾기:

페이지 하단으로 스크롤하여 Download watchdog 섹션을 찾습니다.

여기서 armhf 아키텍처 링크를 클릭합니다.

https://launchpad.net/ubuntu/+source/watchdog/와 비슷한 페이지로 이동할 것입니다.

필요한 .deb 파일 다운로드:

watchdog 패키지 자체 외에, 종속성 패키지도 다운로드해야 합니다.

일반적으로 watchdog 설치 시 추가로 필요한 패키지는 다음과 같습니다. 모두 armhf 버전으로 다운로드해야 합니다.

watchdog_*.deb (watchdog 본체)

libc6_*.deb (libc6 종속성)

libsystemd0_*.deb (systemd 라이브러리 종속성)

libcap-ng0_*.deb (libcap-ng0 종속성)

armhf 아키텍처에 맞는 최신 버전 .deb 파일을 클릭하여 모두 다운로드합니다.

파일 이동:

다운로드한 모든 .deb 파일들을 USB 메모리나 SD카드에 복사합니다.

3단계: 라즈베리파이에서 패키지 설치
USB 메모리를 라즈베리파이에 연결하고, 다음 명령어를 순서대로 실행합니다.

USB 메모리 마운트:

라즈베리파이에 USB를 꽂고, 다음 명령어로 장치 이름을 확인합니다.
sudo fdisk -l

보통 /dev/sda1와 같은 이름으로 나타납니다.

마운트할 디렉토리를 만듭니다.
sudo mkdir /mnt/usb

장치를 마운트합니다.
sudo mount /dev/sda1 /mnt/usb

.deb 파일 복사:

watchdog 패키지 파일들을 라즈베리파이의 홈 디렉토리로 복사합니다.
cp /mnt/usb/*.deb /home/pi/

USB 언마운트 및 제거:

파일 복사가 완료되면 USB를 안전하게 제거합니다.
sudo umount /mnt/usb

패키지 설치:

파일들이 있는 디렉토리로 이동합니다.
cd /home/pi/

모든 .deb 파일들을 한 번에 설치합니다. 순서가 중요할 수 있으므로, 종속성 파일부터 먼저 설치합니다.

Bash

# 종속성 패키지부터 설치
sudo dpkg -i libcap-ng0_*.deb
sudo dpkg -i libsystemd0_*.deb
sudo dpkg -i libc6_*.deb

# 마지막으로 watchdog 본체 패키지 설치
sudo dpkg -i watchdog_*.deb
이 명령어가 종속성 문제를 자동으로 해결하며 패키지를 설치해 줍니다.

4단계: 워치독 설정 및 활성화
패키지 설치가 완료되면, 이제 워치독을 활성화하는 설정을 해야 합니다.

커널 모듈 활성화:

sudo nano /boot/config.txt

파일 맨 아래에 dtparam=watchdog=on을 추가하고 저장합니다.

워치독 데몬 설정:

sudo nano /etc/watchdog.conf

파일 내부에서 #watchdog-device = /dev/watchdog 라인의 주석(#)을 제거합니다.

서비스 활성화:

sudo systemctl enable watchdog

sudo systemctl start watchdog

재부팅:

sudo reboot