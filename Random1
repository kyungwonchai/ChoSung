version: '3.8'

services:
  homepage:
    build:
      context: ./homepage25
      args:
        http_proxy: http://your-proxy-server:port
        https_proxy: http://your-proxy-server:port
    networks:
      - app-network

  plantuml:
    build:
      context: ./react_plantuml
      args:
        http_proxy: http://your-proxy-server:port
        https_proxy: http://your-proxy-server:port
    networks:
      - app-network

  zenithnote:
    build:
      context: ./react_zenithnote
      args:
        http_proxy: http://your-proxy-server:port
        https_proxy: http://your-proxy-server:port
    networks:
      - app-network

  # nginx 서비스는 빌드를 하지 않으므로 수정할 필요가 없습니다.
  nginx:
    image: nginx:1.25-alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
    depends_on:
      - homepage
      - plantuml
      - zenithnote
    networks:
      - app-network

networks:
  app-network:
    driver: bridge