using System.Globalization;
using System.Resources;
using System.Threading;
using System.Windows.Forms;

public partial class MainForm : Form
{
    ResourceManager resManager;
    CultureInfo cultureInfo;

    public MainForm()
    {
        InitializeComponent();

        // ResourceManager 초기화 (리소스 파일 경로에 맞게 설정)
        resManager = new ResourceManager("YourProjectNamespace.Properties.Lang", typeof(MainForm).Assembly);

        // 현재 시스템 언어를 기반으로 문화권 설정
        cultureInfo = CultureInfo.CurrentUICulture;

        // 모든 컨트롤의 UI 문구에 리소스 적용
        ApplyLocalization(this);
    }

    // 폼과 모든 하위 컨트롤에 대해 리소스를 적용하는 함수
    private void ApplyLocalization(Control parentControl)
    {
        // 현재 컨트롤의 Text 속성을 리소스 파일에서 가져와 적용
        string controlText = resManager.GetString(parentControl.Name, cultureInfo);
        if (!string.IsNullOrEmpty(controlText))
        {
            parentControl.Text = controlText;
        }

        // 재귀적으로 모든 하위 컨트롤에 대해 동일하게 처리
        foreach (Control childControl in parentControl.Controls)
        {
            ApplyLocalization(childControl);
        }
    }

    // 언어 변경 함수
    private void ChangeLanguage(string culture)
    {
        cultureInfo = new CultureInfo(culture);
        Thread.CurrentThread.CurrentUICulture = cultureInfo;

        // 언어 변경 후 모든 컨트롤에 리소스 다시 적용
        ApplyLocalization(this);
    }

    // 예: 버튼 클릭 시 언어를 한국어로 변경
    private void buttonChangeToKorean_Click(object sender, EventArgs e)
    {
        ChangeLanguage("ko");
    }

    // 예: 버튼 클릭 시 언어를 영어로 변경
    private void buttonChangeToEnglish_Click(object sender, EventArgs e)
    {
        ChangeLanguage("en");
    }