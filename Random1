USE YourDatabaseName;  -- 데이터베이스 이름을 지정합니다.

SELECT
    ipadd1,
    partition1,
    lastreport1,
    db1,
    db1 - LAG(db1, 1, db1) OVER (PARTITION BY ipadd1, partition1 ORDER BY lastreport1) AS DecreaseAmount
FROM
    YourTableName
ORDER BY
    ipadd1,
    partition1,
    lastreport1;
