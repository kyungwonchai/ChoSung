아래는 체크 상태와 수량 값을 C:\agent\RouterACRmiddleware\setting2.ini 파일에 저장하고, 프로그램 실행 시 MainViewModel에서 파일을 읽어 초기 상태로 적용하는 코드입니다.

설정 파일 저장 및 로드 함수
설정 저장 함수 (SaveSettings)
csharp
코드 복사
private void SaveSettings()
{
    try
    {
        string path = @"C:\agent\RouterACRmiddleware\setting2.ini";

        // 파일 내용 생성
        string content = $"IsFeatureEnabled={IsFeatureEnabled}\nForceExitValue={ForceExitValue}";

        // 파일 저장
        System.IO.File.WriteAllText(path, content);
    }
    catch (Exception ex)
    {
        MessageBox.Show($"설정을 저장하는 중 오류가 발생했습니다.\n{ex.Message}", "오류", MessageBoxButton.OK, MessageBoxImage.Error);
    }
}
설정 로드 함수 (LoadSettings)
csharp
코드 복사
private void LoadSettings()
{
    try
    {
        string path = @"C:\agent\RouterACRmiddleware\setting2.ini";

        // 파일이 없으면 기본값 유지
        if (!System.IO.File.Exists(path)) return;

        // 파일 읽기
        var lines = System.IO.File.ReadAllLines(path);

        // 파일 내용 파싱
        foreach (var line in lines)
        {
            var keyValue = line.Split('=');
            if (keyValue.Length == 2)
            {
                string key = keyValue[0].Trim();
                string value = keyValue[1].Trim();

                if (key == "IsFeatureEnabled" && bool.TryParse(value, out bool isEnabled))
                {
                    IsFeatureEnabled = isEnabled;
                }
                else if (key == "ForceExitValue" && int.TryParse(value, out int exitValue))
                {
                    ForceExitValue = exitValue;
                }
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show($"설정을 로드하는 중 오류가 발생했습니다.\n{ex.Message}", "오류", MessageBoxButton.OK, MessageBoxImage.Error);
    }
}
MainViewModel 생성자에서 호출
csharp
코드 복사
public MainViewModel()
{
    CheckBoxCommand = new RelayCommand(ExecuteCheckBoxCommand);
    IsTextBoxReadOnly = false;

    // 설정 파일 로드
    LoadSettings();
}

// CheckBox 상태가 변경될 때 설정 저장
private void ExecuteCheckBoxCommand(object parameter)
{
    if (IsFeatureEnabled)
    {
        // (기존 코드)
        SaveSettings();
    }
    else
    {
        // (기존 코드)
        SaveSettings();
    }
}
코드 설명
SaveSettings 함수

IsFeatureEnabled와 ForceExitValue 값을 C:\agent\RouterACRmiddleware\setting2.ini 파일에 저장합니다.
파일은 키-값 형식으로 저장됩니다.
LoadSettings 함수

설정 파일을 읽어 IsFeatureEnabled와 ForceExitValue 값을 파싱하고 ViewModel 속성에 반영합니다.
파일이 없으면 기본값을 유지합니다.
MainViewModel에서 호출

생성자에서 LoadSettings를 호출해 설정을 초기화합니다.