import requests

def send_email(user_id, system_id, access_token, recipient_emails, subject, contents, attachment_path):
    url = 'your-email-api-url'

    headers = {
        'Authorization': 'Bearer ' + access_token,
        'System-ID': system_id
    }

    data = {
        'userID': user_id,
        'recipientEmailAddresses': [{'emailAddress': email, 'recipientType': 'TO'} for email in recipient_emails],
        'subject': subject,
        'contents': contents,
        'contentType': 'HTML',
        'docSecuType': 'PERSONAL',
        'sender': {'emailAddress': 'sender@example.com'}
    }

    files = {'attachment': open(attachment_path, 'rb')}

    try:
        response = requests.post(url, headers=headers, data=data, files=files)
        if response.status_code == 200:
            print("이메일이 발송되었습니다.")
        else:
            print("이메일 발송 실패:", response.text)
    except requests.exceptions.RequestException as e:
        print("이메일 발송 중 오류가 발생했습니다:", str(e))

# 예시 사용법
user_id = 'your-user-id'
system_id = 'your-system-id'
access_token = 'your-access-token'
recipient_emails = ['recipient1@example.com', 'recipient2@example.com', 'recipient3@example.com']
subject = '이메일 제목'
contents = '<h1>안녕하세요!</h1><p>이메일 본문입니다.</p>'
attachment_path = 'your-attachment-filepath'

send_email(user_id, system_id, access_token, recipient_emails, subject, contents, attachment_path)
