제: Ubuntu에서 Windows 11이 Samba 공유 폴더를 접근할 때 '권한이 없습니다' 오류 발생
방화벽은 이미 비활성화됨 (확인 완료)

Windows에서 접근 시 '권한이 없습니다' 라고 뜨는 문제.

✅ 홈 디렉토리 (/home/kwkw/) 권한 문제 및 상세 설정 방법 (100% 해결하도록 안내)
📌 문제의 핵심:
홈 디렉토리 (/home/kwkw/) 접근 권한 문제.

Samba 설정 파일에서 권한 설정 문제.

Windows의 인증 정보 문제 (제거 필요).

1. 홈 디렉토리 및 공유 폴더 권한 설정 (확실히 설정하기)
🔥 1.1 홈 디렉토리 (/home/kwkw/) 권한 설정 확인 및 수정하기
홈 디렉토리가 기본 설정일 경우, 다른 사용자나 Windows에서 접근할 수 없게 되어 있습니다.
기본 설정: drwx------ (700) - 즉, 소유자만 접근 가능.

권한 확인하기:
bash
코드 복사
ls -ld /home/kwkw
출력 예시:

arduino
코드 복사
drwx------  1 kwkw kwkw 4096 Mar 28 10:30 /home/kwkw
drwx------ : 소유자 (kwkw) 만 접근 가능 (다른 사용자나 Samba 접근 불가).

권한 변경하기 (필수):
bash
코드 복사
sudo chmod 755 /home/kwkw
변경 후 다시 확인:

bash
코드 복사
ls -ld /home/kwkw
출력 예시:

arduino
코드 복사
drwxr-xr-x  1 kwkw kwkw 4096 Mar 28 10:30 /home/kwkw
drwxr-xr-x : 모든 사용자가 읽기 및 실행 권한을 가짐 (Samba 접근 가능).

🔥 1.2 공유 폴더 권한 설정하기 (확실히 열기)
bash
코드 복사
mkdir -p /home/kwkw/shared
sudo chmod -R 777 /home/kwkw/shared
sudo chown -R kwkw:kwkw /home/kwkw/shared
777: 모든 사용자에게 읽기, 쓰기, 실행 권한 부여 (테스트용으로 권한을 풀어놓기)

chown -R kwkw:kwkw /home/kwkw/shared: 폴더의 소유자를 kwkw 로 설정.

2. Samba 설정 파일 수정 (/etc/samba/smb.conf)
🔥 2.1 설정 파일 열기
bash
코드 복사
sudo nano /etc/samba/smb.conf
🔥 2.2 설정 추가하기 (폴더를 공유하기 위한 설정)
ini
코드 복사
[global]
   workgroup = WORKGROUP
   server string = Samba Server %v
   netbios name = ubuntu
   security = user
   map to guest = never
   smb ports = 445 139
   client min protocol = SMB2
   server min protocol = SMB2
   ntlm auth = yes

[shared]
   path = /home/kwkw/shared
   browseable = yes
   read only = no
   writable = yes
   valid users = kwkw
   guest ok = no
   force user = kwkw
force user = kwkw: 모든 접근을 사용자 kwkw 로 강제 (필수).

valid users = kwkw: 사용자 kwkw 만 접근 가능하게 설정.

guest ok = no: 비밀번호 없이 접근 불가능하게 설정.

3. Samba 사용자 등록하기 (중요)
bash
코드 복사
sudo smbpasswd -a kwkw
여기서 입력한 비밀번호를 정확히 기억하고 Windows에서 사용할 것.

만약 이미 등록되어 있더라도 다시 등록하세요.

4. Samba 서비스 재시작하기
bash
코드 복사
sudo systemctl restart smbd
sudo systemctl restart nmbd
5. Windows 11에서 접근하기 (확인 방법)
5.1 Windows에서 자격 증명 관리자 초기화하기 (중요)
제어판 > 자격 증명 관리자 > Windows 자격 증명

Samba 서버 관련된 모든 항목 삭제

삭제하지 않으면 이전 설정 때문에 오류 발생 가능.

5.2 탐색기에서 접근하기
Windows 파일 탐색기 열기 (Win + E)

주소창에 입력:

php-template
코드 복사
\\<Ubuntu_IP>\shared
예시:

vbnet
코드 복사
\\192.168.0.10\shared
사용자 이름과 비밀번호 입력:

사용자 이름: kwkw

비밀번호: (Samba에서 설정한 비밀번호)

5.3 CMD로 접근 확인하기 (문제 확인용)
cmd
코드 복사
net use \\192.168.0.10\shared /user:kwkw <비밀번호>
성공 시: 명령이 성공적으로 완료되었습니다.

실패 시: 오류 메시지 확인.

6. 확인 사항 (테스트 완료 후)
Samba 설정 오류 확인하기 (Ubuntu에서 실행):

bash
코드 복사
testparm
Samba 로그 확인하기:

bash
코드 복사
sudo tail -f /var/log/samba/log.smbd
🔥 정리
홈 디렉토리 (/home/kwkw/) 권한을 반드시 755 이상으로 설정해야 함 (chmod 755 /home/kwkw).

공유 폴더 권한을 풀어놓기 위해 임시로 777 로 설정 (chmod -R 777 /home/kwkw/shared).

Windows 자격 증명 관리자에서 이전 기록을 삭제하고 새로 접근 시도.

Windows에서 접속할 때는 정확한 사용자 이름과 비밀번호를 입력.
