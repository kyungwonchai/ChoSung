using System;
using System.IO;
using System.Windows.Forms;
using DevExpress.XtraEditors;

namespace TimerExample
{
    public partial class MainForm : XtraForm
    {
        System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
        DateTime targetTime;

        public MainForm()
        {
            InitializeComponent();
            LoadSettings();

            timer.Interval = 1000; // 1 second
            timer.Tick += Timer_Tick;
            timer.Start();
        }

        private void Timer_Tick(object sender, EventArgs e)
        {
            if (DateTime.Now >= targetTime)
            {
                XtraMessageBox.Show("It's time!");
                timer.Stop();
            }
        }

        private void dateEdit_EditValueChanged(object sender, EventArgs e)
        {
            targetTime = dateEdit.DateTime;
            SaveSettings();
        }

        private void SaveSettings()
        {
            File.WriteAllText("settings.txt", targetTime.ToString());
        }

        private void LoadSettings()
        {
            if (File.Exists("settings.txt"))
            {
                targetTime = DateTime.Parse(File.ReadAllText("settings.txt"));
                dateEdit.DateTime = targetTime;
            }
        }
    }
}
