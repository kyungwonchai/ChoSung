í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. í•œë²ˆ ì„¤ì •í•´ë‘ë©´ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì•ˆì „í•˜ê²Œ ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (SSH í‚¤ ì„¤ì •ë²•ì€ 4ë²ˆ í•­ëª©ì„ ì°¸ê³ í•˜ì„¸ìš”.)

ì•„ë˜ ì½”ë“œëŠ” ì›ê²© ì ‘ì† ë° ëª…ë ¹ì–´ ì‹¤í–‰ ë¶€ë¶„ì„ í•¨ìˆ˜(execute_ssh_command)ë¡œ ë§Œë“¤ì–´, ì–¸ì œë“  ë‹¤ë¥¸ ëª…ë ¹ì–´ì™€ ì •ë³´ë¡œ ì¬ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

Python

import paramiko
import os

def execute_ssh_command(hostname, port, username, key_filepath, command):
    """
    SSH í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›ê²© ì„œë²„ì— ì ‘ì†í•˜ê³  ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

    :param hostname: (str) ì ‘ì†í•  ì„œë²„ì˜ IP ì£¼ì†Œ ë˜ëŠ” ë„ë©”ì¸
    :param port: (int) SSH í¬íŠ¸ (ê¸°ë³¸ê°’: 22)
    :param username: (str) ì‚¬ìš©ì ì´ë¦„
    :param key_filepath: (str) ê°œì¸ SSH í‚¤ íŒŒì¼ì˜ ê²½ë¡œ (ì˜ˆ: ~/.ssh/id_rsa)
    :param command: (str) ì‹¤í–‰í•  ëª…ë ¹ì–´
    :return: (tuple) (ì„±ê³µ ì—¬ë¶€, í‘œì¤€ ì¶œë ¥, í‘œì¤€ ì—ëŸ¬)
    """
    ssh_client = None  # finally ì ˆì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¨¼ì € ì„ ì–¸
    try:
        # 1. SSH í´ë¼ì´ì–¸íŠ¸ ê°ì²´ ìƒì„±
        ssh_client = paramiko.SSHClient()
        
        # 2. ì²˜ìŒ ì ‘ì† ì‹œ í˜¸ìŠ¤íŠ¸ í‚¤ë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ì •ì±… ì„¤ì •
        ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        
        # 3. ê°œì¸ í‚¤ íŒŒì¼ ê²½ë¡œ í™•ì¥ (ì˜ˆ: '~'ë¥¼ '/home/user'ë¡œ ë³€í™˜)
        key_path = os.path.expanduser(key_filepath)
        
        # 4. SSH í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì— ì—°ê²°
        print(f"Connecting to {hostname}...")
        ssh_client.connect(hostname=hostname,
                           port=port,
                           username=username,
                           key_filename=key_path)
        print("Connection successful!")

        # 5. ëª…ë ¹ì–´ ì‹¤í–‰
        print(f"Executing command: '{command}'")
        stdin, stdout, stderr = ssh_client.exec_command(command)
        
        # 6. ì‹¤í–‰ ê²°ê³¼ ì½ê¸° (bytesë¥¼ utf-8 ë¬¸ìì—´ë¡œ ë³€í™˜)
        output = stdout.read().decode('utf-8').strip()
        error = stderr.read().decode('utf-8').strip()
        
        print("Command execution finished.")
        return (True, output, error)

    except Exception as e:
        # ì˜ˆì™¸ ë°œìƒ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜
        print(f"An error occurred: {e}")
        return (False, None, str(e))
    
    finally:
        # 7. ì—°ê²° ì¢…ë£Œ (ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ í•­ìƒ ì‹¤í–‰)
        if ssh_client:
            ssh_client.close()
            print("Connection closed.")

# --- í•¨ìˆ˜ ì‚¬ìš© ì˜ˆì œ ---
if __name__ == "__main__":
    # --- ì‚¬ìš©ì ì„¤ì • ë³€ìˆ˜ ---
    REMOTE_HOST = '192.168.0.10'  # ë¼ì¦ˆë² ë¦¬íŒŒì´ IP ì£¼ì†Œ
    REMOTE_PORT = 22
    REMOTE_USER = 'pi'            # ë¼ì¦ˆë² ë¦¬íŒŒì´ ì‚¬ìš©ì ì´ë¦„
    # ìœˆë„ìš°: 'C:/Users/ì‚¬ìš©ìì´ë¦„/.ssh/id_rsa'
    # ë¦¬ëˆ…ìŠ¤/macOS: '~/.ssh/id_rsa'
    PRIVATE_KEY_PATH = '~/.ssh/id_rsa' 
    
    # --- ì‹¤í–‰í•  ëª…ë ¹ì–´ ---
    COMMAND_TO_RUN = 'vcgencmd measure_temp' # ì˜ˆ: ë¼ì¦ˆë² ë¦¬íŒŒì´ ì˜¨ë„ ì¸¡ì •
    # COMMAND_TO_RUN = 'ls -al'
    
    # í•¨ìˆ˜ í˜¸ì¶œ
    success, result_output, result_error = execute_ssh_command(
        hostname=REMOTE_HOST,
        port=REMOTE_PORT,
        username=REMOTE_USER,
        key_filepath=PRIVATE_KEY_PATH,
        command=COMMAND_TO_RUN
    )
    
    # ê²°ê³¼ ì¶œë ¥
    print("\n--- Execution Result ---")
    if success:
        print("âœ… Success!")
        if result_output:
            print("[Standard Output]:")
            print(result_output)
        if result_error:
            print("[Standard Error]:")
            print(result_error)
    else:
        print("âŒ Failure!")
        print(f"[Error Message]:\n{result_error}")

ì½”ë“œ ì£¼ìš” ê°œì„ ì 
ë³´ì•ˆ ê°•í™”: connect() í•¨ìˆ˜ì—ì„œ password ëŒ€ì‹  key_filenameì„ ì‚¬ìš©í•˜ì—¬ SSH í‚¤ë¡œ ì¸ì¦í•©ë‹ˆë‹¤.

ì—ëŸ¬ ì²˜ë¦¬: try...except...finally êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ì† ì‹¤íŒ¨, ëª…ë ¹ì–´ ì˜¤ë¥˜ ë“± ì˜ˆì™¸ ìƒí™©ì— ëŒ€ë¹„í•˜ê³ , ì–´ë–¤ ê²½ìš°ì—ë„ ssh_client.close()ë¡œ ì—°ê²°ì„ í™•ì‹¤íˆ ì¢…ë£Œí•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.

ê²°ê³¼ êµ¬ë¶„: ëª…ë ¹ì–´ ì‹¤í–‰ ê²°ê³¼ë¥¼ í‘œì¤€ ì¶œë ¥(stdout)ê³¼ í‘œì¤€ ì—ëŸ¬(stderr)ë¡œ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬, ëª…ë ¹ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì›ì¸ì„ íŒŒì•…í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.

ì¬ì‚¬ìš©ì„±: ì ‘ì† ì •ë³´ì™€ ëª…ë ¹ì–´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´, ì½”ë“œ ìˆ˜ì • ì—†ì´ ë‹¤ì–‘í•œ ì›ê²© ì‘ì—…ì— ì‰½ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 3. (ì°¸ê³ ) ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°„í¸í•œ ë°©ë²• (ë³´ì•ˆì— ì·¨ì•½)
ğŸš¨ ì´ ë°©ë²•ì€ ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì— ë¹„ë°€ë²ˆí˜¸ê°€ ê·¸ëŒ€ë¡œ ë…¸ì¶œë˜ì–´ ë³´ì•ˆì— ë§¤ìš° ì·¨ì•½í•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œë§Œ ì‚¬ìš©í•˜ê³ , ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.

ìœ„ ì½”ë“œì—ì„œ ssh_client.connect() ë¶€ë¶„ë§Œ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•˜ë©´ ë¹„ë°€ë²ˆí˜¸ë¡œ ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Python

# ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•œ ì—°ê²° (ë³´ì•ˆì— ì·¨ì•½!)
ssh_client.connect(hostname=hostname,
                   port=port,
                   username=username,
                   password='your_password_here') # ì—¬ê¸°ì— ë¼ì¦ˆë² ë¦¬íŒŒì´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§ì ‘ ì…ë ¥
## 4. SSH í‚¤ ìƒì„± ë° ì›ê²© ì„œë²„ì— ë³µì‚¬í•˜ê¸°
ìœ„ì˜ ì•ˆì „í•œ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë ¤ë©´, ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì»´í“¨í„°(ë¡œì»¬)ì— SSH í‚¤ê°€ ìƒì„±ë˜ì–´ ìˆì–´ì•¼ í•˜ê³ , ê·¸ í‚¤ê°€ ì ‘ì†í•˜ë ¤ëŠ” ë¼ì¦ˆë² ë¦¬íŒŒì´(ì›ê²©)ì— ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

1ë‹¨ê³„: SSH í‚¤ ìƒì„± (ë¡œì»¬ ì»´í“¨í„°ì—ì„œ í•œ ë²ˆë§Œ)
ë¡œì»¬ ì»´í“¨í„°ì˜ í„°ë¯¸ë„(macOS/Linux) ë˜ëŠ” PowerShell(Windows)ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

Bash

ssh-keygen -t rsa -b 4096
ê·¸ëŸ¬ë©´ í‚¤ë¥¼ ì €ì¥í•  ìœ„ì¹˜ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¬¼ì–´ë³´ëŠ”ë°, ê·¸ëƒ¥ Enterë§Œ ê³„ì† ëˆŒëŸ¬ì„œ ê¸°ë³¸ê°’ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ì¥ ê°„ë‹¨í•©ë‹ˆë‹¤. (~/.ssh/ í´ë”ì— id_rsa(ê°œì¸í‚¤)ì™€ id_rsa.pub(ê³µê°œí‚¤) íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.)

2ë‹¨ê³„: ìƒì„±ëœ í‚¤ë¥¼ ë¼ì¦ˆë² ë¦¬íŒŒì´ì— ë³µì‚¬
macOSë‚˜ Linux í™˜ê²½ì—ì„œëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì“°ëŠ” ê²ƒì´ ê°€ì¥ í¸ë¦¬í•©ë‹ˆë‹¤. ë¼ì¦ˆë² ë¦¬íŒŒì´ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ ë¬¼ì–´ë´…ë‹ˆë‹¤.

Bash

# ssh-copy-id [ì‚¬ìš©ìì´ë¦„]@[ë¼ì¦ˆë² ë¦¬íŒŒì´_IP]