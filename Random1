상환경에서 CUDA 12.1.1을 인식하도록 설정하는 방법
PyTorch를 가상환경에서 사용할 때, CUDA 12.1.1이 설치된 경로를 인식하도록 설정해야 합니다.
Windows에서 CUDA는 시스템에 설치되지만, 가상환경에서는 이를 직접 인식하지 못할 수 있습니다.

1. 현재 PyTorch가 인식하는 CUDA 버전 확인
먼저, 현재 가상환경에서 CUDA가 어떻게 설정되어 있는지 확인해야 합니다.

(1) 가상환경 활성화
CMD 또는 PowerShell에서 실행:

sh
코드 복사
conda activate myenv  # 또는 venv 활성화
가상환경을 활성화한 후 Python 실행:

python
코드 복사
import torch
print("PyTorch CUDA Version:", torch.version.cuda)
print("CUDA Available:", torch.cuda.is_available())
print("GPU Name:", torch.cuda.get_device_name(0) if torch.cuda.is_available() else "No GPU Found")
출력 예시 (정상 작동):

yaml
코드 복사
PyTorch CUDA Version: 12.1
CUDA Available: True
GPU Name: NVIDIA GeForce RTX 3090
❌ 만약 CUDA Available이 False라면? → 아래 해결 방법 실행

2. 가상환경에서 CUDA 12.1.1을 감지하도록 설정하는 방법
Windows에서 여러 개의 CUDA 버전(12.8, 12.1.1 등)이 설치되어 있을 경우,
PyTorch가 특정 버전을 사용하도록 환경 변수를 설정해야 합니다.

(1) CUDA 12.1.1이 설치된 경로 확인
먼저, CUDA 12.1.1이 어디에 설치되어 있는지 확인합니다. 기본적으로 C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA 아래에 설치됩니다.

확인 방법:

sh
코드 복사
dir "C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA"
출력 예시:

코드 복사
12.1
12.8
위처럼 CUDA 12.1이 설치된 것이 확인되면, 경로를 설정해야 합니다.

(2) 가상환경에서 CUDA 12.1.1 강제 사용 설정
가상환경에서 CUDA 12.1.1을 사용하도록 환경 변수를 설정합니다.

CMD에서 가상환경을 활성화한 상태에서 실행:

sh
코드 복사
set CUDA_HOME=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1
set PATH=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1\bin;%PATH%
✅ 위 명령어를 실행하면 가상환경 내에서만 CUDA 12.1.1을 사용하도록 설정됩니다.
❌ 재부팅하거나 새로운 터미널을 열면 다시 설정해야 하므로, 영구적으로 설정하려면 아래 방법을 따릅니다.

(3) 영구적으로 CUDA 12.1.1을 가상환경에 적용하는 방법
activate.bat 또는 activate.ps1 스크립트에 CUDA 12.1.1 경로를 추가하면 가상환경을 실행할 때마다 적용됩니다.

① Conda 가상환경일 경우
CMD에서 실행:

sh
코드 복사
echo set CUDA_HOME=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1 >> %CONDA_PREFIX%\etc\conda\activate.d\cuda_activate.bat
echo set PATH=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1\bin;%PATH% >> %CONDA_PREFIX%\etc\conda\activate.d\cuda_activate.bat
이제 conda activate myenv 하면 자동으로 CUDA 12.1.1이 설정됩니다.

② Virtualenv (venv) 가상환경일 경우
CMD에서 실행:

sh
코드 복사
echo set CUDA_HOME=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1 >> myenv\Scripts\activate.bat
echo set PATH=C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v12.1\bin;%PATH% >> myenv\Scripts\activate.bat
이제 myenv\Scripts\activate 하면 자동으로 CUDA 12.1.1이 적용됩니다.

3. 적용 후 PyTorch에서 CUDA 확인
이제 다시 Python을 실행하고 CUDA 12.1.1이 감지되는지 확인합니다.

python
코드 복사
import torch
print(torch.version.cuda)  # CUDA 12.1.1이 출력되어야 함
print(torch.cuda.is_available())  # True면 정상 작동
print(torch.cuda.get_device_name(0) if torch.cuda.is_available() else "No GPU Found")
✅ 정상적인 경우 출력 예시

yaml
코드 복사
PyTorch CUDA Version: 12.1
CUDA Available: True
GPU Name: NVIDIA GeForce RTX 3090
❌ 아직도 CUDA가 감지되지 않는다면?

nvidia-smi로 드라이버 확인
nvcc --version으로 CUDA 설치 확인
PyTorch CUDA 버전이 맞는지 확인 (pip show torch)
최종 정리
✅ Windows에서 CUDA 12.8과 CUDA 12.1.1을 함께 설치 가능
✅ PyTorch에서 CUDA 12.1.1을 사용하려면 환경 변수를 수정해야 함
✅ 가상환경 실행 후 set CUDA_HOME과 set PATH를 적용해야 함