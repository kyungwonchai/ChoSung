ì•Œê² ìŠµë‹ˆë‹¤. AI ì‹œëŒ€ë¥¼ ë§ì•„ ì—¬ëŸ¬ ì‚¬ëŒì˜ ì—­í• ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ê°œë°œìë‹˜ì„ ìœ„í•œ ìµœê³ ì˜ ìƒì‚°ì„± ë„êµ¬, 'ì´ˆê³ ì† ë©”ëª¨ ìº¡ì²˜ ë° ê²€ìƒ‰ ì•±' ì œì‘ì„ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ìš”ì²­í•˜ì‹  ëŒ€ë¡œ, ì´ ëª¨ë“  í”„ë¡œì íŠ¸ í´ë”ì™€ íŒŒì¼ì„ í•œ ë²ˆì— ìƒì„±í•˜ëŠ” **'ë‹¨ì¼ Python ìŠ¤í¬ë¦½íŠ¸'**ë¥¼ ì œê³µí•´ ë“œë¦½ë‹ˆë‹¤. ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸°ë§Œ í•˜ë©´, ì¦‰ì‹œ Visual Studioì—ì„œ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ C# WPF í”„ë¡œì íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤.

í•µì‹¬ ê¸°ëŠ¥
ì „ì—­ ë‹¨ì¶•í‚¤ë¡œ ì¦‰ì‹œ ë©”ëª¨ì¥ í™œì„±í™” ( Win + Shift + M ): ì–´ë–¤ ì‘ì—…ì„ í•˜ë˜ ì¤‘ì—ë„ ë‹¨ì¶•í‚¤ë¥¼ ëˆ„ë¥´ë©´ í™”ë©´ ì¤‘ì•™ì— ì‘ì€ ë©”ëª¨ ì…ë ¥ì°½ì´ ë‚˜íƒ€ë‚˜ ë°”ë¡œ ì•„ì´ë””ì–´ë¥¼ ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¹ ë¥¸ ì €ì¥ ë° ì·¨ì†Œ: ë©”ëª¨ ì…ë ¥ í›„ Enter í‚¤ë¥¼ ëˆ„ë¥´ë©´ MSSQL DBì— ì¦‰ì‹œ ì €ì¥ë˜ê³  ì°½ì€ ì‚¬ë¼ì§‘ë‹ˆë‹¤. Esc í‚¤ë¥¼ ëˆ„ë¥´ë©´ ì·¨ì†Œë©ë‹ˆë‹¤.

ê°•ë ¥í•œ ê²€ìƒ‰ ê¸°ëŠ¥: ë©”ì¸ ì•± í™”ë©´ì—ì„œ ëª¨ë“  ë©”ëª¨ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê²€ìƒ‰í•˜ê³  í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¯¸ë˜ í™•ì¥ì„± (LLM, RAG): ë°ì´í„°ë¥¼ êµ¬ì¡°í™”ëœ Notes í…Œì´ë¸”ì— ì €ì¥í•˜ì—¬, ë‚˜ì¤‘ì— LLMì´ ë¶„ì„í•˜ê³  RAG ì†ŒìŠ¤ë¡œ í™œìš©í•˜ê¸°ì— ìµœì í™”ëœ êµ¬ì¡°ì…ë‹ˆë‹¤.

ì•ˆì •ì ì¸ ì•„í‚¤í…ì²˜: ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ MVVM(Model-View-ViewModel) íŒ¨í„´ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.

1ë‹¨ê³„: Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
ì•„ë˜ ì½”ë“œë¥¼ create_quick_memo_app.py ë¼ëŠ” ì´ë¦„ì˜ íŒŒì¼ë¡œ ì €ì¥í•˜ê³ , ì›í•˜ëŠ” ìœ„ì¹˜ì—ì„œ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤. ì‹¤í–‰ ì¦‰ì‹œ QuickMemoSolutionì´ë¼ëŠ” í´ë”ì™€ ê·¸ ì•ˆì— ëª¨ë“  C# í”„ë¡œì íŠ¸ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.

Python

import os
import uuid

# --- í”„ë¡œì íŠ¸ ì„¤ì • ---
SOLUTION_NAME = "QuickMemoSolution"
PROJECT_NAME = "QuickMemo"
TARGET_FRAMEWORK = "net8.0-windows"  # ìµœì‹  .NET 8.0 LTS ì‚¬ìš©

# --- ì†”ë£¨ì…˜ ë° í”„ë¡œì íŠ¸ GUID ìƒì„± ---
SOLUTION_GUID = str(uuid.uuid4()).upper()
PROJECT_GUID = str(uuid.uuid4()).upper()

# --- íŒŒì¼ ë‚´ìš© ì •ì˜ ---

# .gitignore
GITIGNORE_CONTENT = """
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# User-specific files
*.rsuser
*.suo
*.user
*.userosscache
*.sln.docstates

# User-specific files (MonoDevelop/Xamarin Studio)
*.userprefs

# Build results
[Dd]ebug/
[Dd]ebugPublic/
[Rr]elease/
[Rr]eleases/
x64/
x86/
[Aa][Rr][Mm]/
[Aa][Rr][Mm]64/
bld/
[Bb]in/
[Oo]bj/
[Ll]og/

# Visual Studio 2019 cache/options directory
.vs/
# Uncomment if you have tasks that create the project's launch settings
# launchSettings.json

# Rider files
.idea/
"""

# README.md
README_CONTENT = f"""
# {PROJECT_NAME} - ì´ˆê³ ì† ë©”ëª¨ ìº¡ì²˜ ë° ê²€ìƒ‰ ì•±

AI ì‹œëŒ€ë¥¼ ìœ„í•œ ê°œë°œììš© ìƒì‚°ì„± ë„êµ¬ì…ë‹ˆë‹¤.
ì–´ë–¤ ì‘ì—… ì¤‘ì—ë„ ë‹¨ì¶•í‚¤ë¡œ ìƒê°ì„ ì¦‰ì‹œ ìº¡ì²˜í•˜ê³ , ë‚˜ì¤‘ì— ì‰½ê²Œ ê²€ìƒ‰í•˜ì—¬ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸš€ ì‹œì‘ ê°€ì´ë“œ

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
1.  SQL Server Management Studio(SSMS)ë¥¼ ì—½ë‹ˆë‹¤.
2.  ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.
3.  í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìˆëŠ” `database_setup.sql` íŒŒì¼ì˜ ë‚´ìš©ì„ ì‹¤í–‰í•˜ì—¬ `Notes` í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤.

### 2. ì—°ê²° ë¬¸ìì—´ ìˆ˜ì •
1.  Visual Studioì—ì„œ `QuickMemoSolution.sln` íŒŒì¼ì„ ì—½ë‹ˆë‹¤.
2.  ì†”ë£¨ì…˜ íƒìƒ‰ê¸°ì—ì„œ `{PROJECT_NAME}/Data/DatabaseService.cs` íŒŒì¼ì„ ì—½ë‹ˆë‹¤.
3.  íŒŒì¼ ìƒë‹¨ì— ìˆëŠ” `_connectionString` ë³€ìˆ˜ì˜ ê°’ì„ **ìì‹ ì˜ MSSQL ì„œë²„ ì •ë³´ì— ë§ê²Œ ìˆ˜ì •**í•©ë‹ˆë‹¤.

    ```csharp
    // !!! ì¤‘ìš”: ì´ ì—°ê²° ë¬¸ìì—´ì„ ìì‹ ì˜ DB í™˜ê²½ì— ë§ê²Œ ë°˜ë“œì‹œ ìˆ˜ì •í•˜ì„¸ìš” !!!
    private readonly string _connectionString = "Server=YOUR_SERVER_NAME;Database=YOUR_DATABASE_NAME;User Id=your_user;Password=your_password;TrustServerCertificate=True;";
    ```

### 3. ë¹Œë“œ ë° ì‹¤í–‰
1.  Visual Studio ìƒë‹¨ ë©”ë‰´ì—ì„œ `ë¹Œë“œ(Build) > ì†”ë£¨ì…˜ ë¹Œë“œ(Build Solution)`ë¥¼ ì„ íƒí•˜ê±°ë‚˜ `Ctrl+Shift+B`ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.
2.  ë¹Œë“œê°€ ì„±ê³µí•˜ë©´ `F5` í‚¤ë¥¼ ëˆŒëŸ¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.
3.  ì•±ì´ ì‹¤í–‰ë˜ë©´ ì‘ì—… í‘œì‹œì¤„ íŠ¸ë ˆì´ì— ì•„ì´ì½˜ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

## âœ¨ ì‚¬ìš© ë°©ë²•

-   **ë©”ëª¨ ìº¡ì²˜**: í‚¤ë³´ë“œì—ì„œ `Win` + `Shift` + `M` ì„ ëˆ„ë¦…ë‹ˆë‹¤.
-   **ë©”ëª¨ ì €ì¥**: ë‚´ìš©ì„ ì…ë ¥í•˜ê³  `Enter` í‚¤ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.
-   **ì·¨ì†Œ**: `Esc` í‚¤ë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.
-   **ë©”ëª¨ ê²€ìƒ‰**: ì‘ì—… í‘œì‹œì¤„ íŠ¸ë ˆì´ì˜ ì•„ì´ì½˜ì„ í´ë¦­í•˜ì—¬ ë©”ì¸ ì°½ì„ ì—´ê³  ë©”ëª¨ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
"""

# database_setup.sql
SQL_SCRIPT_CONTENT = """
-- ë§Œì•½ Notes í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´ ì‚­ì œí•©ë‹ˆë‹¤. (ì´ˆê¸° ì„¤ì •ìš©)
IF OBJECT_ID('dbo.Notes', 'U') IS NOT NULL
    DROP TABLE dbo.Notes;
GO

-- Notes í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤.
-- ì´ í…Œì´ë¸”ì€ ë‚˜ì¤‘ì— LLM ë¶„ì„ ë° RAG ì†ŒìŠ¤ë¡œ í™œìš©í•˜ê¸°ì— ì í•©í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.
CREATE TABLE dbo.Notes (
    Id INT PRIMARY KEY IDENTITY(1,1), -- ê³ ìœ  ì‹ë³„ì
    Content NVARCHAR(MAX) NOT NULL,   -- ë©”ëª¨ ë‚´ìš© (ì œí•œ ì—†ìŒ)
    Tags NVARCHAR(255) NULL,          -- ì¶”í›„ ë¶„ë¥˜ë¥¼ ìœ„í•œ íƒœê·¸ (ì‰¼í‘œë¡œ êµ¬ë¶„)
    CreatedAt DATETIME2 NOT NULL DEFAULT GETDATE() -- ìƒì„± ì‹œê° (ì •ë°€í•œ ì‹œê°„)
);
GO

-- ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€ (ì„ íƒ ì‚¬í•­)
INSERT INTO dbo.Notes (Content, Tags) VALUES (N'ì´ê²ƒì€ ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ë©”ëª¨ì…ë‹ˆë‹¤.', N'ìƒ˜í”Œ, í…ŒìŠ¤íŠ¸');
INSERT INTO dbo.Notes (Content, Tags) VALUES (N'ê¸€ë¡œë²Œ ë‹¨ì¶•í‚¤ ê¸°ëŠ¥ ì•„ì´ë””ì–´ êµ¬ìƒ', N'ì•„ì´ë””ì–´, ê°œë°œ');
GO

PRINT 'Notes í…Œì´ë¸”ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.';
"""

# QuickMemoSolution.sln
SLN_CONTENT = f"""
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio Version 17
VisualStudioVersion = 17.0.31903.59
MinimumVisualStudioVersion = 10.0.40219.1
Project("{{{SOLUTION_GUID}}}") = "{PROJECT_NAME}", "{PROJECT_NAME}\\{PROJECT_NAME}.csproj", "{{{PROJECT_GUID}}}"
EndProject
Global
	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Any CPU = Debug|Any CPU
		Release|Any CPU = Release|Any CPU
	EndGlobalSection
	GlobalSection(ProjectConfigurationPlatforms) = postSolution
		{{{PROJECT_GUID}}}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{{{PROJECT_GUID}}}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{{{PROJECT_GUID}}}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{{{PROJECT_GUID}}}.Release|Any CPU.Build.0 = Release|Any CPU
	EndGlobalSection
	GlobalSection(SolutionProperties) = preSolution
		HideSolutionNode = FALSE
	EndGlobalSection
	GlobalSection(ExtensibilityGlobals) = postSolution
		SolutionGuid = {{{str(uuid.uuid4()).upper()}}}
	EndGlobalSection
EndGlobal
"""

# QuickMemo.csproj
CSPROJ_CONTENT = f"""
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>{TARGET_FRAMEWORK}</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UseWPF>true</UseWPF>
    <ApplicationIcon>icon.ico</ApplicationIcon>
  </PropertyGroup>

  <ItemGroup>
    <None Remove="icon.ico" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Dapper" Version="2.1.35" />
    <PackageReference Include="Microsoft.Data.SqlClient" Version="5.2.0" />
  </ItemGroup>

  <ItemGroup>
    <Resource Include="icon.ico" />
  </ItemGroup>

</Project>
"""

# App.xaml
APP_XAML_CONTENT = """
<Application x:Class="QuickMemo.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:QuickMemo"
             ShutdownMode="OnExplicitShutdown">
    <Application.Resources>
         
    </Application.Resources>
</Application>
"""

# App.xaml.cs
APP_XAML_CS_CONTENT = f"""
using System.Windows;
using QuickMemo.Data;
using QuickMemo.Services;
using QuickMemo.Views;
using System.Windows.Forms;

namespace QuickMemo
{{
    public partial class App : System.Windows.Application
    {{
        private GlobalHotkeyService? _hotkeyService;
        private DatabaseService? _databaseService;
        private NotifyIcon? _notifyIcon;
        private MainWindow? _mainWindow;

        protected override void OnStartup(StartupEventArgs e)
        {{
            base.OnStartup(e);

            _databaseService = new DatabaseService();

            // ë©”ì¸ ìœˆë„ìš° ìƒì„± (í•˜ì§€ë§Œ ë°”ë¡œ ë³´ì—¬ì£¼ì§€ëŠ” ì•ŠìŒ)
            _mainWindow = new MainWindow();

            // ì „ì—­ ë‹¨ì¶•í‚¤ ë“±ë¡
            _hotkeyService = new GlobalHotkeyService();
            _hotkeyService.Register(ModifierKeys.Win | ModifierKeys.Shift, System.Windows.Input.Key.M);
            _hotkeyService.HotKeyPressed += OnHotKeyPressed;

            // ì‘ì—… í‘œì‹œì¤„ íŠ¸ë ˆì´ ì•„ì´ì½˜ ì„¤ì •
            SetupTrayIcon();
        }}

        private void SetupTrayIcon()
        {{
            _notifyIcon = new NotifyIcon();
            _notifyIcon.Icon = new System.Drawing.Icon("icon.ico");
            _notifyIcon.Visible = true;
            _notifyIcon.Text = "{PROJECT_NAME}";

            _notifyIcon.ContextMenuStrip = new ContextMenuStrip();
            _notifyIcon.ContextMenuStrip.Items.Add("Open {PROJECT_NAME}", null, OnOpenClicked);
            _notifyIcon.ContextMenuStrip.Items.Add("Exit", null, OnExitClicked);

            _notifyIcon.MouseClick += (sender, args) =>
            {{
                if (args.Button == MouseButtons.Left)
                {{
                    OnOpenClicked(sender, args);
                }}
            }};
        }}

        private void OnOpenClicked(object? sender, EventArgs e)
        {{
            if (_mainWindow == null || !_mainWindow.IsVisible)
            {{
                _mainWindow = new MainWindow();
                _mainWindow.Show();
                _mainWindow.Activate();
            }}
            else
            {{
                _mainWindow.Activate();
            }}
        }}

        private void OnExitClicked(object? sender, EventArgs e)
        {{
            Current.Shutdown();
        }}
        
        private async void OnHotKeyPressed(object? sender, EventArgs e)
        {{
            var captureWindow = new CaptureWindow();
            var result = captureWindow.ShowDialog();

            if (result == true && !string.IsNullOrWhiteSpace(captureWindow.NoteContent) && _databaseService != null)
            {{
                await _databaseService.AddNoteAsync(captureWindow.NoteContent);
                // ë©”ì¸ ì°½ì´ ì—´ë ¤ìˆìœ¼ë©´ ë©”ëª¨ ëª©ë¡ì„ ìƒˆë¡œê³ ì¹¨
                if (_mainWindow != null && _mainWindow.IsVisible)
                {{
                    await _mainWindow.ViewModel.LoadNotesAsync();
                }}
            }}
        }}

        protected override void OnExit(ExitEventArgs e)
        {{
            _hotkeyService?.Dispose();
            _notifyIcon?.Dispose();
            base.OnExit(e);
        }}
    }}
}}
"""

# Models/Note.cs
NOTE_MODEL_CS_CONTENT = """
namespace QuickMemo.Models
{
    public class Note
    {
        public int Id { get; set; }
        public string Content { get; set; } = string.Empty;
        public string? Tags { get; set; }
        public DateTime CreatedAt { get; set; }
    }
}
"""

# Data/DatabaseService.cs
DATABASE_SERVICE_CS_CONTENT = """
using Dapper;
using Microsoft.Data.SqlClient;
using QuickMemo.Models;

namespace QuickMemo.Data
{
    public class DatabaseService
    {
        // !!! ì¤‘ìš”: ì´ ì—°ê²° ë¬¸ìì—´ì„ ìì‹ ì˜ DB í™˜ê²½ì— ë§ê²Œ ë°˜ë“œì‹œ ìˆ˜ì •í•˜ì„¸ìš” !!!
        // ì˜ˆ: "Server=localhost\\SQLEXPRESS;Database=MyNotesDB;Trusted_Connection=True;TrustServerCertificate=True;"
        private readonly string _connectionString = "Server=YOUR_SERVER_NAME;Database=YOUR_DATABASE_NAME;User Id=your_user;Password=your_password;TrustServerCertificate=True;";

        public async Task AddNoteAsync(string content, string? tags = null)
        {
            using var connection = new SqlConnection(_connectionString);
            var sql = "INSERT INTO Notes (Content, Tags) VALUES (@Content, @Tags)";
            await connection.ExecuteAsync(sql, new { Content = content, Tags = tags });
        }

        public async Task<IEnumerable<Note>> SearchNotesAsync(string searchTerm)
        {
            using var connection = new SqlConnection(_connectionString);
            var sql = "SELECT Id, Content, Tags, CreatedAt FROM Notes WHERE Content LIKE @SearchTerm ORDER BY CreatedAt DESC";
            return await connection.QueryAsync<Note>(sql, new { SearchTerm = $"%{searchTerm}%" });
        }
    }
}
"""

# Services/GlobalHotkeyService.cs
HOTKEY_SERVICE_CS_CONTENT = """
using System.Runtime.InteropServices;
using System.Windows;
using System.Windows.Input;
using System.Windows.Interop;

namespace QuickMemo.Services
{
    [Flags]
    public enum ModifierKeys : uint
    {
        None = 0,
        Alt = 1,
        Control = 2,
        Shift = 4,
        Win = 8
    }

    public class GlobalHotkeyService : IDisposable
    {
        [DllImport("user32.dll")]
        private static extern bool RegisterHotKey(IntPtr hWnd, int id, uint fsModifiers, uint vk);

        [DllImport("user32.dll")]
        private static extern bool UnregisterHotKey(IntPtr hWnd, int id);

        private HwndSource? _source;
        private const int HOTKEY_ID = 9000;
        public event EventHandler? HotKeyPressed;

        public GlobalHotkeyService()
        {
            // ê°€ìƒ ìœˆë„ìš°ë¥¼ ë§Œë“¤ì–´ ë‹¨ì¶•í‚¤ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ 
            var helperWindow = new Window();
            helperWindow.Show();
            helperWindow.Hide();
            
            _source = HwndSource.FromHwnd(new WindowInteropHelper(helperWindow).Handle);
            _source?.AddHook(HwndHook);
        }
        
        public void Register(ModifierKeys modifier, Key key)
        {
            if (_source == null) return;
            var virtualKey = KeyInterop.VirtualKeyFromKey(key);
            RegisterHotKey(_source.Handle, HOTKEY_ID, (uint)modifier, (uint)virtualKey);
        }

        private IntPtr HwndHook(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
        {
            const int WM_HOTKEY = 0x0312;
            if (msg == WM_HOTKEY && wParam.ToInt32() == HOTKEY_ID)
            {
                HotKeyPressed?.Invoke(this, EventArgs.Empty);
                handled = true;
            }
            return IntPtr.Zero;
        }

        public void Dispose()
        {
            _source?.RemoveHook(HwndHook);
            if(_source != null)
            {
                UnregisterHotKey(_source.Handle, HOTKEY_ID);
            }
            GC.SuppressFinalize(this);
        }
    }
}
"""

# ViewModels/MainViewModel.cs
MAIN_VIEWMODEL_CS_CONTENT = """
using QuickMemo.Data;
using QuickMemo.Models;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Runtime.CompilerServices;
using System.Windows.Input;

namespace QuickMemo.ViewModels
{
    public class MainViewModel : INotifyPropertyChanged
    {
        private readonly DatabaseService _databaseService;
        private string _searchTerm = string.Empty;
        private ObservableCollection<Note> _notes = new();

        public MainViewModel()
        {
            _databaseService = new DatabaseService();
            SearchCommand = new RelayCommand(async _ => await LoadNotesAsync());
            // ì´ˆê¸° ë¡œë”©
            Task.Run(async () => await LoadNotesAsync());
        }

        public string SearchTerm
        {
            get => _searchTerm;
            set
            {
                _searchTerm = value;
                OnPropertyChanged();
                // íƒ€ì´í•‘í•  ë•Œë§ˆë‹¤ ê²€ìƒ‰ ì‹¤í–‰
                Task.Run(async () => await LoadNotesAsync());
            }
        }

        public ObservableCollection<Note> Notes
        {
            get => _notes;
            set
            {
                _notes = value;
                OnPropertyChanged();
            }
        }

        public ICommand SearchCommand { get; }

        public async Task LoadNotesAsync()
        {
            var result = await _databaseService.SearchNotesAsync(SearchTerm);
            App.Current.Dispatcher.Invoke(() =>
            {
                Notes.Clear();
                foreach (var note in result)
                {
                    Notes.Add(note);
                }
            });
        }

        public event PropertyChangedEventHandler? PropertyChanged;
        protected void OnPropertyChanged([CallerMemberName] string? propertyName = null)
        {
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    
    // Simple RelayCommand implementation
    public class RelayCommand : ICommand
    {
        private readonly Action<object?> _execute;
        private readonly Predicate<object?>? _canExecute;

        public RelayCommand(Action<object?> execute, Predicate<object?>? canExecute = null)
        {
            _execute = execute ?? throw new ArgumentNullException(nameof(execute));
            _canExecute = canExecute;
        }

        public bool CanExecute(object? parameter) => _canExecute == null || _canExecute(parameter);
        public void Execute(object? parameter) => _execute(parameter);
        public event EventHandler? CanExecuteChanged
        {
            add { CommandManager.RequerySuggested += value; }
            remove { CommandManager.RequerySuggested -= value; }
        }
    }
}
"""

# Views/MainWindow.xaml
MAIN_WINDOW_XAML_CONTENT = """
<Window x:Class="QuickMemo.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:QuickMemo.Views"
        xmlns:viewModels="clr-namespace:QuickMemo.ViewModels"
        mc:Ignorable="d"
        Title="QuickMemo Search" Height="600" Width="800"
        WindowStartupLocation="CenterScreen" Icon="/icon.ico">
    <Window.DataContext>
        <viewModels:MainViewModel/>
    </Window.DataContext>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBox Grid.Row="0" Margin="5" Padding="5" FontSize="16"
                 Text="{Binding SearchTerm, UpdateSourceTrigger=PropertyChanged}"
                 ToolTip="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."/>

        <ListView Grid.Row="1" Margin="5" ItemsSource="{Binding Notes}" HorizontalContentAlignment="Stretch">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="LightGray" BorderThickness="0,0,0,1" Padding="10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" FontWeight="Bold" Foreground="#FF5A5A5A"
                                       Text="{Binding CreatedAt, StringFormat='yyyy-MM-dd HH:mm:ss'}"/>
                            <TextBlock Grid.Row="1" TextWrapping="Wrap" Margin="0,5,0,0" FontSize="14"
                                       Text="{Binding Content}"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Window>
"""

# Views/MainWindow.xaml.cs
MAIN_WINDOW_XAML_CS_CONTENT = """
using QuickMemo.ViewModels;
using System.Windows;

namespace QuickMemo.Views
{
    public partial class MainWindow : Window
    {
        public MainViewModel ViewModel => (MainViewModel)DataContext;

        public MainWindow()
        {
            InitializeComponent();
        }
        
        protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
        {
            // ì°½ì„ ì‹¤ì œë¡œ ë‹«ì§€ ì•Šê³  ìˆ¨ê¸°ê¸°ë§Œ í•¨
            e.Cancel = true;
            this.Hide();
        }
    }
}
"""

# Views/CaptureWindow.xaml
CAPTURE_WINDOW_XAML_CONTENT = """
<Window x:Class="QuickMemo.Views.CaptureWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Capture Note" Height="150" Width="500"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="False"
        KeyDown="Window_KeyDown">
    <Border Background="#333" CornerRadius="10" BorderBrush="#555" BorderThickness="2">
        <Grid>
            <TextBox x:Name="NoteTextBox" 
                     Background="Transparent" Foreground="White" 
                     CaretBrush="White" FontSize="18"
                     TextWrapping="Wrap" AcceptsReturn="True"
                     VerticalContentAlignment="Center"
                     Margin="15" BorderThickness="0"
                     Text="..."/>
        </Grid>
    </Border>
</Window>
"""

# Views/CaptureWindow.xaml.cs
CAPTURE_WINDOW_XAML_CS_CONTENT = """
using System.Windows;
using System.Windows.Input;

namespace QuickMemo.Views
{
    public partial class CaptureWindow : Window
    {
        public string? NoteContent { get; private set; }

        public CaptureWindow()
        {
            InitializeComponent();
            Loaded += (s, e) =>
            {
                NoteTextBox.Focus();
                NoteTextBox.SelectAll();
            };
        }

        private void Window_KeyDown(object sender, KeyEventArgs e)
        {
            // Enterë§Œ ëˆ„ë¥´ë©´ ì €ì¥, Shift+EnterëŠ” ì¤„ë°”ê¿ˆ
            if (e.Key == Key.Enter && (Keyboard.Modifiers & ModifierKeys.Shift) == 0)
            {
                e.Handled = true;
                NoteContent = NoteTextBox.Text;
                DialogResult = true;
                Close();
            }
            else if (e.Key == Key.Escape)
            {
                e.Handled = true;
                DialogResult = false;
                Close();
            }
        }
    }
}
"""

# icon.ico (Base64 encoded)
ICON_BASE64 = "AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5ubm/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+jo6P/n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//m5ub/4uLi/+Li4v/i4uL/5ubm/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//k5OT/3t7e/97e3v/e3t7/5OTk/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//j4+P/3d3d/93d3f/d3d3/4+Pj/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//h4eH/29vb/9vb2//b29v/4eHh/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//g4OD/2tra/9ra2v/a2tr/4ODg/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/wAAAADn5+f/5+fn/wAAAADn5+f/AAAAAAAAAAAAAAAA5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/5+fn/+fn5//n5+f/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAA=="

# --- ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë¡œì§ ---
def create_file(path, content):
    """ì§€ì •ëœ ê²½ë¡œì— íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‚´ìš©ì„ ì“´ë‹¤."""
    os.makedirs(os.path.dirname(path), exist_ok=True)
    with open(path, 'w', encoding='utf-8') as f:
        f.write(content)
    print(f"CREATED: {path}")

def create_binary_file(path, base64_content):
    """Base64 ì¸ì½”ë”©ëœ ì½˜í…ì¸ ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ìƒì„±í•œë‹¤."""
    import base64
    os.makedirs(os.path.dirname(path), exist_ok=True)
    with open(path, 'wb') as f:
        f.write(base64.b64decode(base64_content))
    print(f"CREATED: {path}")

def main():
    """í”„ë¡œì íŠ¸ êµ¬ì¡°ì™€ ëª¨ë“  íŒŒì¼ì„ ìƒì„±í•œë‹¤."""
    print(f"'{SOLUTION_NAME}' ì†”ë£¨ì…˜ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤...")

    # ê¸°ë³¸ ê²½ë¡œ ì„¤ì •
    solution_dir = SOLUTION_NAME
    project_dir = os.path.join(solution_dir, PROJECT_NAME)

    # ë””ë ‰í† ë¦¬ ìƒì„±
    os.makedirs(os.path.join(project_dir, "Models"), exist_ok=True)
    os.makedirs(os.path.join(project_dir, "Data"), exist_ok=True)
    os.makedirs(os.path.join(project_dir, "Services"), exist_ok=True)
    os.makedirs(os.path.join(project_dir, "ViewModels"), exist_ok=True)
    os.makedirs(os.path.join(project_dir, "Views"), exist_ok=True)

    # íŒŒì¼ ìƒì„±
    create_file(os.path.join(solution_dir, ".gitignore"), GITIGNORE_CONTENT)
    create_file(os.path.join(solution_dir, "README.md"), README_CONTENT)
    create_file(os.path.join(solution_dir, "database_setup.sql"), SQL_SCRIPT_CONTENT)
    create_file(os.path.join(solution_dir, f"{SOLUTION_NAME}.sln"), SLN_CONTENT)

    create_file(os.path.join(project_dir, f"{PROJECT_NAME}.csproj"), CSPROJ_CONTENT)
    create_file(os.path.join(project_dir, "App.xaml"), APP_XAML_CONTENT)
    create_file(os.path.join(project_dir, "App.xaml.cs"), APP_XAML_CS_CONTENT)

    create_file(os.path.join(project_dir, "Models", "Note.cs"), NOTE_MODEL_CS_CONTENT)
    create_file(os.path.join(project_dir, "Data", "DatabaseService.cs"), DATABASE_SERVICE_CS_CONTENT)
    create_file(os.path.join(project_dir, "Services", "GlobalHotkeyService.cs"), HOTKEY_SERVICE_CS_CONTENT)
    create_file(os.path.join(project_dir, "ViewModels", "MainViewModel.cs"), MAIN_VIEWMODEL_CS_CONTENT)

    create_file(os.path.join(project_dir, "Views", "MainWindow.xaml"), MAIN_WINDOW_XAML_CONTENT)
    create_file(os.path.join(project_dir, "Views", "MainWindow.xaml.cs"), MAIN_WINDOW_XAML_CS_CONTENT)
    create_file(os.path.join(project_dir, "Views", "CaptureWindow.xaml"), CAPTURE_WINDOW_XAML_CONTENT)
    create_file(os.path.join(project_dir, "Views", "CaptureWindow.xaml.cs"), CAPTURE_WINDOW_XAML_CS_CONTENT)

    # ì•„ì´ì½˜ íŒŒì¼ ìƒì„±
    create_binary_file(os.path.join(project_dir, "icon.ico"), ICON_BASE64)

    print("\n" + "="*50)
    print("ğŸ‰ í”„ë¡œì íŠ¸ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
    print(f"'{SOLUTION_NAME}' í´ë”ë¥¼ í™•ì¸í•˜ì„¸ìš”.")
    print("ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì§„í–‰í•´ ì£¼ì„¸ìš”. (ìì„¸í•œ ë‚´ìš©ì€ README.md ì°¸ì¡°)")
    print("1. 'database_setup.sql' ìŠ¤í¬ë¦½íŠ¸ë¥¼ MSSQLì—ì„œ ì‹¤í–‰")
    print("2. 'QuickMemo/Data/DatabaseService.cs' íŒŒì¼ì˜ ì—°ê²° ë¬¸ìì—´ ìˆ˜ì •")
    print("3. Visual Studioì—ì„œ 'QuickMemoSolution.sln' ì—´ê³  ë¹Œë“œ (Ctrl+Shift+B)")
    print("="*50)

if __name__ == '__main__':
    main()
2ë‹¨ê³„: ì•± ë¹Œë“œ ë° ì‹¤í–‰
ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •: ìƒì„±ëœ QuickMemoSolution í´ë” ì•ˆì— ìˆëŠ” database_setup.sql íŒŒì¼ì„ ì—´ì–´ ê·¸ ë‚´ìš©ì„ ë³µì‚¬í•œ í›„, SQL Server Management Studio(SSMS) ì—ì„œ ì‹¤í–‰í•˜ì—¬ Notes í…Œì´ë¸”ì„ ë§Œë“­ë‹ˆë‹¤.

ì—°ê²° ë¬¸ìì—´ ìˆ˜ì •: Visual Studioë¡œ QuickMemoSolution.sln íŒŒì¼ì„ ì—½ë‹ˆë‹¤. ì†”ë£¨ì…˜ íƒìƒ‰ê¸°ì—ì„œ QuickMemo í”„ë¡œì íŠ¸ ì•„ë˜ Data/DatabaseService.cs íŒŒì¼ì„ ì—´ê³ , ìƒë‹¨ì— ìˆëŠ” _connectionString ë³€ìˆ˜ì˜ ê°’ì„ ì‚¬ìš©í•˜ì‹œëŠ” MSSQL ì„œë²„ ì •ë³´ë¡œ ì •í™•í•˜ê²Œ ìˆ˜ì •í•©ë‹ˆë‹¤.

ë¹Œë“œ ë° ì‹¤í–‰: Visual Studioì—ì„œ Ctrl + Shift + Bë¥¼ ëˆŒëŸ¬ ì†”ë£¨ì…˜ì„ ë¹Œë“œí•˜ê³ , F5 í‚¤ë¥¼ ëˆŒëŸ¬ ì‹¤í–‰í•©ë‹ˆë‹¤.