합니다. 리스트박스에 항목을 추가하는 부분을 명확히 보여드리겠습니다. QR 코드가 MySQL 데이터베이스에서 확인된 경우, 리스트박스에 해당 정보를 추가하는 함수는 다음과 같습니다.

리스트박스에 항목을 추가하는 함수
리스트박스에 데이터를 추가하는 작업은 qrCodeAdapter.add(item)을 통해 이루어지며, notifyDataSetChanged()를 호출하여 리스트의 업데이트를 반영합니다.

kotlin
코드 복사
private fun addItemToListView(item: String) {
    // 리스트박스에 항목 추가
    qrCodeAdapter.add(item)
    // 리스트가 갱신되었음을 알림
    qrCodeAdapter.notifyDataSetChanged()
}
사용 예시
이 함수는 MySQL 데이터베이스에서 QR 코드가 확인된 경우에 호출됩니다. 예를 들어, checkModelInMySQL 함수에서 QR 코드가 MySQL 데이터베이스에서 확인된 후 이 함수를 호출하게 됩니다.

kotlin
코드 복사
private suspend fun checkModelInMySQL(qrCode: String): String? {
    return withContext(Dispatchers.IO) {
        var connection: Connection? = null
        var preparedStatement: PreparedStatement? = null
        var resultSet: ResultSet? = null
        var result: String? = null
        try {
            // MySQL JDBC 드라이버 로드
            Class.forName("com.mysql.jdbc.Driver")

            // 데이터베이스 연결
            connection = DriverManager.getConnection(mySqlUrl, mySqlUser, mySqlPassword)

            // 쿼리 실행
            val query = "SELECT district, at, modelnumber FROM smd.management_mobile_mainseet WHERE modelnumber = ?"
            preparedStatement = connection.prepareStatement(query)
            preparedStatement.setString(1, qrCode)
            
            resultSet = preparedStatement.executeQuery()

            // 결과 처리
            if (resultSet.next()) {
                val district = resultSet.getString("district")
                val at = resultSet.getString("at")
                val modelnumber = resultSet.getString("modelnumber")
                result = "District: $district, At: $at, Model: $modelnumber"
                
                // 메인 스레드에서 리스트박스에 항목 추가
                withContext(Dispatchers.Main) {
                    addItemToListView(result)
                }
            }
        } catch (e: Exception) {
            e.printStackTrace()
        } finally {
            try {
                resultSet?.close()
                preparedStatement?.close()
                connection?.close()
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
        result
    }
}
주요 사항:
addItemToListView 함수: 이 함수는 리스트박스에 항목을 추가하고 notifyDataSetChanged()를 호출하여 리스트가 즉시 갱신되도록 합니다.
withContext(Dispatchers.Main): 이 부분은 UI 작업이 메인 스레드에서 실행되도록 보장합니다. 데이터베이스 작업은 IO 디스패처에서 처리되지만, UI 업데이트는 반드시 메인 스레드에서 이루어져야 합니다.
이제 이 함수를 통해 QR 코드 데이터가 리스트박스에 제대로 추가되도록 할 수 있습