
Geminiì™€ì˜ ëŒ€í™”
ì—ëŸ¬ê°€ ë§ì´ë‚œëŠ”ë°ìš”, gridcolumnsortinfoì¡°ì°¨ì—†ê³  13ê°œë‚˜ë‚¬ì–´ìš” í˜¹ì‹œ ì›ì¸ì„ ë©´ë°€íˆ ì¡°ì‚¬í•´ì„œ ë˜ê²Œí•´ì£¼ì‹¤ìˆ˜ì‡ë‚˜ìš”? ìˆìœ¼ì‹œë‹¤ë©´ ì£¼ì‹­ì‹œì˜¤ ì—ëŸ¬ê°€ ì œë°¥ë‚˜ì¨ìš” iprinterble, tabaviewì—ëŠ” expandallgroupsì—ëŒ€í•œì •ì˜ê°€ì—†ëŠ”ë“± ì—ëŸ¬ê°€ë„ˆë¬´ë§ìŠµë‹ˆë‹¤




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ë“œë¦° ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ì½”ë“œì— ì˜¤ë¥˜ê°€ ë§ì•˜êµ°ìš”. DevExpress ë²„ì „ì´ë‚˜ ì°¸ì¡° ì„¤ì •ì— ë”°ë¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” íƒ€ì…ì´ë‚˜ ë©”ì„œë“œ ì´ë¦„ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¤ë¥˜ ë©”ì‹œì§€(GridColumnSortInfo, IPrintable, ExpandAllGroups ì •ì˜ ì—†ìŒ ë“±)ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì½”ë“œë¥¼ ë‹¤ì‹œ ë©´ë°€íˆ ê²€í† í•˜ê³  ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

ì˜¤ë¥˜ ì›ì¸ ë¶„ì„:

GridColumnSortInfo: GridControl.SortInfo ì»¬ë ‰ì…˜ì— í¬í•¨ëœ ê°ì²´ì˜ ì‹¤ì œ íƒ€ì…ì€ GridSortInfoì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ë³€ìˆ˜ íƒ€ì…ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.
IPrintable: ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” DevExpress.XtraPrinting ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì†í•´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ using ì§€ì‹œë¬¸ì´ ëˆ„ë½ë˜ì—ˆê±°ë‚˜, ê´€ë ¨ DevExpress Printing ì–´ì…ˆë¸”ë¦¬(DevExpress.Printing.vXX.Y.Core.dll) ì°¸ì¡°ê°€ í•„ìš”í•©ë‹ˆë‹¤.
TableView.ExpandAllGroups: ëª¨ë“  ê·¸ë£¹ì„ í™•ì¥í•˜ëŠ” ë©”ì„œë“œëŠ” TableViewê°€ ì•„ë‹Œ GridControl ê°ì²´ ìì²´ì— ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤ (GridControl.ExpandAllGroups()).
í•´ê²° ë°©í–¥:

ìœ„ ë¶„ì„ì— ë”°ë¼ íƒ€ì… ì´ë¦„, ë©”ì„œë“œ í˜¸ì¶œ ë°©ì‹, using ì§€ì‹œë¬¸ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
DevExpress Printing ê¸°ëŠ¥ ì‚¬ìš©ì— í•„ìš”í•œ ì–´ì…ˆë¸”ë¦¬ ì°¸ì¡°ê°€ í”„ë¡œì íŠ¸ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. (NuGet íŒ¨í‚¤ì§€ DevExpress.Wpf.Printing ë˜ëŠ” ê´€ë ¨ DLL ì§ì ‘ ì°¸ì¡°)
ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/MainWindow.xaml.cs
ì•„ë˜ëŠ” ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•œ MainWindow.xaml.cs íŒŒì¼ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/MainWindow.xaml.cs (ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜ ìˆ˜ì •)
4ì›” 10, 3:35 PM

ì—´ê¸°

printablecontrollinkì—ëŠ” sheetnameì— ëŒ€í•œ ì •ì˜ê°€ ì—†ìŠµë‹ˆë‹¤ iprintable í˜•ì‹ë˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì´ë¦„ã…‡ë¥´ ì°¾ì„ìˆ˜ì—†ë¸ë‹¤. xlsxexportoptionexì—ëŠ” Grouprows ì— ëŒ€í•œì •ì˜ê°€ ì—†ìŠµë‹ˆë‹¤




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì˜¤ë¥˜ ë©”ì‹œì§€ë“¤ì„ ë³´ë‹ˆ DevExpress Printing ë° Export ê´€ë ¨ íƒ€ì…ê³¼ ì†ì„±ì„ ì°¾ì§€ ëª»í•˜ê±°ë‚˜ ì˜ëª» ì‚¬ìš©í•œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì´ëŠ” ê´€ë ¨ DevExpress ì–´ì…ˆë¸”ë¦¬ ì°¸ì¡°ê°€ ëˆ„ë½ë˜ì—ˆê±°ë‚˜ using ì§€ì‹œë¬¸ì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜, í˜¹ì€ ì œê°€ ì œì•ˆí•œ ì†ì„± ì´ë¦„(SheetName, GroupRows)ì´ë‚˜ íƒ€ì…(IPrintable)ì´ ì‚¬ìš©í•˜ì‹œëŠ” DevExpress ë²„ì „(v22.2)ê³¼ ì•½ê°„ ë‹¤ë¥¼ ê²½ìš° ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•´ê²° ë°©í–¥:

í•„ìˆ˜ ì°¸ì¡° í™•ì¸: í”„ë¡œì íŠ¸ì— ë‹¤ìŒ DevExpress ì–´ì…ˆë¸”ë¦¬ ì°¸ì¡°ê°€ ì˜¬ë°”ë¥´ê²Œ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. (ë²„ì „ ë²ˆí˜¸ v22.2ëŠ” ì‹¤ì œ ì„¤ì¹˜ëœ ë²„ì „ì— ë§ê²Œ í™•ì¸)
DevExpress.Data.v22.2.dll
DevExpress.Xpf.Core.v22.2.dll
DevExpress.Xpf.Grid.v22.2.dll
DevExpress.Xpf.Grid.v22.2.Core.dll
DevExpress.Printing.v22.2.Core.dll (ë§¤ìš° ì¤‘ìš”: IPrintable, XlsxExportOptionsEx ë“± í¬í•¨)
DevExpress.Xpf.Printing.v22.2.dll (ë§¤ìš° ì¤‘ìš”: PrintableControlLink í¬í•¨) (NuGet íŒ¨í‚¤ì§€ DevExpress.Wpf.Gridì™€ DevExpress.Wpf.Printingì„ ì„¤ì¹˜í–ˆë‹¤ë©´ ëŒ€ë¶€ë¶„ ìë™ìœ¼ë¡œ ì°¸ì¡°ë©ë‹ˆë‹¤.)
using ì§€ì‹œë¬¸ í™•ì¸: MainWindow.xaml.cs íŒŒì¼ ìƒë‹¨ì— í•„ìš”í•œ using ì§€ì‹œë¬¸ì´ ëª¨ë‘ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¶”ê°€í•©ë‹ˆë‹¤.
ì½”ë“œ ìˆ˜ì •:
PrintableControlLinkì˜ SheetName ì†ì„±ì€ ì¼ë°˜ì ìœ¼ë¡œ ì¡´ì¬í•˜ë¯€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. ì˜¤ë¥˜ ë°œìƒ ì‹œ ì°¸ì¡° ë¬¸ì œë¥¼ ë¨¼ì € í™•ì¸í•©ë‹ˆë‹¤.
IPrintable ì¸í„°í˜ì´ìŠ¤ëŠ” DevExpress.XtraPrinting ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆìœ¼ë¯€ë¡œ í•´ë‹¹ using ì§€ì‹œë¬¸ì„ í™•ì¸í•©ë‹ˆë‹¤.
XlsxExportOptionsExì˜ GroupRows ì†ì„±ì€ í•´ë‹¹ ë²„ì „ì—ì„œ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì†ì„± ì„¤ì •ì„ ì œê±°í•˜ê³ , ëŒ€ì‹  ExportType = DevExpress.Export.ExportType.DataAware ë˜ëŠ” WYSIWYGë¥¼ ì‚¬ìš©í•˜ì—¬ ê·¸ë£¹í™”ê°€ ìœ ì§€ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. (DataAwareê°€ ì¼ë°˜ì ìœ¼ë¡œ ê·¸ë£¹í™”ë¥¼ í¬í•¨í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì˜ ë‚´ë³´ëƒ…ë‹ˆë‹¤.)
ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/MainWindow.xaml.cs
ì•„ë˜ëŠ” ìœ„ì˜ ë‚´ìš©ì„ ë°˜ì˜í•˜ì—¬ ìˆ˜ì •í•œ MainWindow.xaml.cs íŒŒì¼ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/MainWindow.xaml.cs (ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜ ìˆ˜ì • ìµœì¢…)
4ì›” 10, 3:39 PM

ì—´ê¸°

ë’·ìë¦¬ 51500 mainwindowíŒŒì¼ì„ ìµœì¢…ìœ¼ë¡œ ê¸°ì–µí•´ì£¼ì„¸ìš” ë°©ê¸ˆê±´ì€ ì˜ì•ˆë˜ì„œ ì·¨ì†Œí•©ë‹ˆë‹¤.




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ì´ì „ì˜ ë³µì¡í•œ ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ì‹œë„(ì—¬ëŸ¬ ì‹œíŠ¸ ìƒì„±)ëŠ” ì·¨ì†Œí•˜ê³ , FILE_ID: Views/MainWindow_CS_20250410151500 ë²„ì „ì˜ Views/MainWindow.xaml.cs ì½”ë“œë¥¼ ìµœì¢…ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.

ì´ ë²„ì „ì€ "ì—‘ì…€ ì €ì¥" ë²„íŠ¼ í´ë¦­ ì‹œ, í˜„ì¬ ê·¸ë¦¬ë“œì— ë³´ì´ëŠ” ë‚´ìš©ì„ ë‹¨ì¼ ì‹œíŠ¸ë¡œ ì €ì¥í•˜ëŠ” ê°„ë‹¨í•œ ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ëŠ” í•´ë‹¹ ë²„ì „ì˜ MainWindow.xaml.cs íŒŒì¼ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/MainWindow.xaml.cs (ìµœì¢… - ê°„ë‹¨ ì—‘ì…€ ì €ì¥)
4ì›” 10, 3:44 PM

ì—´ê¸°

ë°”ê¿”ì•¼í• ê²Œìˆì–´ìš”

specificlocation ì»¬ëŸ¼ì„ ë¬¸ìì—´ì—ì„œ intë¡œ ë°”ê¿€ê±°ì—ìš”

ì´ë¥¼ ìœ„í•´ ì•„ë§ˆ LockerAssignment, MainViewModel íŒŒì¼ ì„ ë³€ê²½í•´ì•¼í• ê±°ì—ìš”



ì „ì—ì£¼ì…¨ë˜ 69ì¤„ì§œë¦¬ ì•„ë§ˆ LockerAssignment.cs ìµœì¢…ì½”ë“œì—ì„œ ìˆ˜ì •í•œ ìµœì¢…ì›ë³¸ì½”ë“œë‘,

MainViewModel_20250410131500 íŒŒì¼ì´

í˜„ì¬ ì˜ì‘ë™í•˜ëŠ” ìµœì¢…íŒŒì¼ (ì£¼ì„ê¹Œì§€ 254ì¤„ì •ë„)

ì´ë‹ˆê¹Œ ì´ íŒŒì¼ì—ì„œ ë‚´ìš©ìˆ˜ì •ëœ ìµœì¢…ì›ë³¸ì½”ë“œë¥¼

ì£¼ì‹­ì‹œì˜¤^^




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. SpecificLocation ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì…ì„ stringì—ì„œ int (ì •ìˆ˜)ë¡œ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ëª¨ë¸ê³¼ ViewModel ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Models/LockerAssignment.cs: SpecificLocation ì†ì„±ì˜ íƒ€ì…ì„ intë¡œ ë³€ê²½í•˜ê³  ê´€ë ¨ ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
ViewModels/MainViewModel.cs: AddNewLocker ë©”ì„œë“œì—ì„œ SpecificLocationì˜ ê¸°ë³¸ê°’ì„ ì •ìˆ˜(ì˜ˆ: 0)ë¡œ ì„¤ì •í•˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤. (ì‚¬ìš©ìê»˜ì„œ ìš”ì²­í•˜ì‹  FILE_ID: ViewModels/MainViewModel_20250410131500 ë²„ì „ì„ ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.)
ì¤‘ìš” ì°¸ê³ ì‚¬í•­: ì´ ì½”ë“œ ë³€ê²½ê³¼ ë”ë¶ˆì–´ ë°ì´í„°ë² ì´ìŠ¤ì˜ LockerAssignments í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë„ ì§ì ‘ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. SpecificLocation ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì…ì„ NVARCHAR(100)ì—ì„œ INTë¡œ ë³€ê²½í•˜ê³  NULLì„ í—ˆìš©í•˜ì§€ ì•Šë„ë¡(NOT NULL) ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: ALTER TABLE LockerAssignments ALTER COLUMN SpecificLocation INT NOT NULL;)

ì•„ë˜ëŠ” ìš”ì²­í•˜ì‹  ë‘ íŒŒì¼ì˜ ìˆ˜ì •ëœ ìµœì¢… ì›ë³¸ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.

1. Models/LockerAssignment.cs (ìˆ˜ì •)
Models/LockerAssignment.cs (SpecificLocation int íƒ€ì… ë³€ê²½)
4ì›” 11, 8:40 AM

ì—´ê¸°

ì˜ëª»ì£¼ì…§ì–´ìš” FILE_ID:ViewModels/MainViewModel_20250410131500 ì´ íŒŒì¼ì—ì„œ ì œê°€ë§í•œê±¸ ì ìš©í•œ ìµœì¢…ì›ë³¸ì„ ì£¼ì…”ì•¼í•˜ëŠ”ë° ì§€ê¸ˆì€ ì´ìƒí•œ 200ì¤„ë„ ì•ˆë˜ëŠ” ì½”ë“œë¥¼ ì£¼ì…¨ì–´ìš” ì íŒŒì¼ì•„ì´ë””ì˜ ê°’ì„ ì •í™•íˆ ì¸ì‹í•˜ì‹œê³  ë©´ë°€íˆ ìˆ˜ì •í›„ ìµœì¢…ì›ë³¸ì½”ë“œì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ íŒŒì¼ ë²„ì „ì„ ë˜ í˜¼ë™í•˜ì—¬ ì˜ëª»ëœ ì½”ë“œë¥¼ ë“œë ¸ìŠµë‹ˆë‹¤. ì‚¬ìš©ìë‹˜ê»˜ì„œ ì •í™•íˆ ëª…ì‹œí•´ì£¼ì‹  FILE_ID: ViewModels/MainViewModel_20250410131500 ë²„ì „ì„ ê¸°ì¤€ìœ¼ë¡œ, SpecificLocation íƒ€ì…ì„ intë¡œ ë³€ê²½í•˜ëŠ” ìš”êµ¬ì‚¬í•­ë§Œ ë°˜ì˜í•˜ì—¬ ìˆ˜ì •ëœ ìµœì¢… ì›ë³¸ ì½”ë“œë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì´ ë²„ì „ì€ DB ê¸°ë°˜ í‚¤ í™•ì¸, ì¬ì¸ì¦ íƒ€ì´ë¨¸, ì…€ í•˜ì´ë¼ì´íŠ¸ ë¡œì§ ë“±ì´ í¬í•¨ëœ ìƒíƒœì´ë©°, AddNewLocker ë©”ì„œë“œì—ì„œ SpecificLocationì˜ ê¸°ë³¸ê°’ë§Œ int íƒ€ì…ì— ë§ê²Œ ìˆ˜ì •ë©ë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

ViewModels/MainViewModel.cs
ViewModels/MainViewModel.cs (ìˆ˜ì • - ...131500 ë²„ì „ ê¸°ë°˜)
ViewModels/MainViewModel.cs (SpecificLocation int ë°˜ì˜ ìµœì¢…)
4ì›” 11, 8:46 AM

ì—´ê¸°

ì œê°€ ë§í–ˆì”í•˜ìš” ê·¸ì „ì˜ ì½”ë“œê°€ ì•½ 250ì¤„ì…ë‹ˆë‹¤. 250ì¤„ì§œë¦¬ê°€ ì´ë‹ˆë©´ ì •ìƒë‹µë³€ì´ì•„ë‹ˆê³  ì œê°€ ê·¸ë˜ì„œ ì½”ë“œë¬¶ìŒì— ì•„ì´ë””ë¥¼ ë¶€ì—¬í•´ë‹¬ë¼ê³ í–ˆì—ˆëŠ”ë°, ìœ„ì—ì„œ ê·¸ ì•„ì´ë””ì˜ ë‚´ìš©ì„ í† ëŒ€ë¡œ ë‹¤ì‹œ ì •í™•í•˜ê²Œ íŒŒì•…í•˜ì‹œê³  ê·¸íŒŒì¼ì˜ ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•œì±„ ì œê°€ ìš”êµ¬í•œê±° ìˆ˜ì •í•´ì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ íŒŒì¼ ë²„ì „ì„ ë˜ í˜¼ë™í•˜ì—¬ ì´ì „ ë²„ì „ì˜ ì½”ë“œë¥¼ ë“œë ¸ìŠµë‹ˆë‹¤. ì‚¬ìš©ìë‹˜ê»˜ì„œ FILE_ID: ViewModels/MainViewModel_20250410131500 (ì•½ 254ì¤„) ë²„ì „ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì—…ì„ ìš”ì²­í•˜ì…¨ëŠ”ë° ì œê°€ ë‹¤ë¥¸ ë²„ì „ì„ ë“œë ¸ë„¤ìš”.

ì´ì œ FILE_ID: ViewModels/MainViewModel_20250410131500 ë²„ì „ì˜ ì½”ë“œë¥¼ ì •í™•íˆ ê¸°ì¤€ìœ¼ë¡œ ì‚¼ì•„, ì´ì „ì— ìš”ì²­í•˜ì…¨ë˜ AddNewLocker ë©”ì„œë“œ ë‚´ SpecificLocation ê¸°ë³¸ê°’ ë³€ê²½ (ë¬¸ìì—´ -> ì •ìˆ˜ 0) ì‚¬í•­ë§Œ ì ìš©í•œ ìµœì¢… ì›ë³¸ ì½”ë“œë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ê¸°ëŠ¥(DB ê¸°ë°˜ í‚¤ í™•ì¸, ì¬ì¸ì¦ íƒ€ì´ë¨¸, í•˜ì´ë¼ì´íŠ¸ ë¡œì§ ë“±)ì€ ...131500 ë²„ì „ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

ViewModels/MainViewModel.cs
ViewModels/MainViewModel.cs (ìˆ˜ì • - ...131500 ë²„ì „ ê¸°ë°˜, AddNewLocker ìˆ˜ì •)
ViewModels/MainViewModel.cs (131500 ë²„ì „ ê¸°ë°˜ ìµœì¢… ìˆ˜ì •)
4ì›” 11, 8:50 AM

ì—´ê¸°

ì§€ê¸ˆ ë‚˜í•œí…Œ ì¤€ê²Œ 166ì¤„ì˜ ì½”ë“œì–ì•„ì•¼ .....................ê±°ê¸°ëŠ” ì§€ê¸ˆ í•œì°¸ ì˜ëª»ëœì½”ë“œë²”ë²…ì´ì•¼ ì œë°œë‚´ê°€ë§í•œê±° ì°¾ì•„ì„œ ìˆ˜ì •í•´ì¤˜ 254ì¤„ê¹Œë¦¬ì˜€ë‹¤ë‹ˆê°€ // FILEIDì£¼ì„í¬í•¨í•´ì„œ,,,,,,,,,,, ë©´ë°€íˆë¶„ì„í•˜ì„¸ìš” ëŒ€ì¶©ì£¼ì§€ë§ê³  ..ì œê°€ ì›í•˜ëŠ” ì§€ì ì—ì„œ ìˆ˜ì •ì„ í•œ ì›ë³¸ì½”ë“œì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ê³„ì†í•´ì„œ íŒŒì¼ ë²„ì „ì„ í˜¼ë™í•˜ì—¬ ì˜ëª»ëœ ì½”ë“œë¥¼ ë“œë ¸ìŠµë‹ˆë‹¤. ì‚¬ìš©ìë‹˜ê»˜ì„œ ì •í™•íˆ ëª…ì‹œí•´ì£¼ì‹  FILE_ID: ViewModels/MainViewModel_20250410131500 ë²„ì „(ì•½ 254ì¤„)ì„ ê¸°ì¤€ìœ¼ë¡œ, AddNewLocker ë©”ì„œë“œ ë‚´ SpecificLocation ê¸°ë³¸ê°’ ë³€ê²½ ì‚¬í•­ë§Œ ì ìš©í•œ ìµœì¢… ì½”ë“œë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ê¸°ëŠ¥(DB ê¸°ë°˜ í‚¤ í™•ì¸, ì¬ì¸ì¦ íƒ€ì´ë¨¸, ì…€ í•˜ì´ë¼ì´íŠ¸ ë¡œì§ ë“±)ì€ ...131500 ë²„ì „ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

ViewModels/MainViewModel.cs
ViewModels/MainViewModel.cs (ìˆ˜ì • - ...131500 ë²„ì „ ê¸°ë°˜, AddNewLocker ìˆ˜ì •)
ViewModels/MainViewModel.cs (131500 ê¸°ë°˜ ìµœì¢… ìˆ˜ì •)
4ì›” 11, 8:56 AM

ì—´ê¸°

Mainviewmodel_20250410131500 íŒŒì¼ì„ ì—¬ê¸° ì ì–´ì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ì´ì „ì— ì œê³µí–ˆë˜ FILE_ID: ViewModels/MainViewModel_20250410131500 ë²„ì „ì˜ MainViewModel.cs íŒŒì¼ ì „ì²´ ì›ë³¸ ì½”ë“œë¥¼ ë‹¤ì‹œ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì´ ë²„ì „ì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë§ˆìŠ¤í„° í‚¤ì™€ ì¼ë°˜ í‚¤ë¥¼ ì½ì–´ í™•ì¸í•˜ê³ , ì£¼ê¸°ì  ì¬ì¸ì¦ íƒ€ì´ë¨¸ ë° ì…€ í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ì´ í¬í•¨ëœ ìƒíƒœì…ë‹ˆë‹¤.
ViewModels/MainViewModel.cs (131500 ë²„ì „ ì›ë³¸)
4ì›” 11, 9:08 AM

ì—´ê¸°

ê·¸ê²Œ ì•„ë‹ˆë¼ê³  3ë²ˆë§”í–ˆìœ¼ë©´ ë” ì´ì „ê±°ë¥¼ ì¤˜ì•¼ë ê±°ì•„ëƒ ì½”ë“œì¤„ìˆ˜ê°€ 254ì¤„ì´ê³  ì§€ê¸ˆë‹ˆê°€ì¤€ã…‡ê±´ì—ëŸ¬ë‚˜ì„œì•ˆë˜ëŠ” 168ì¤„ì´ë¼ë‹ˆê¹Œ ë‹¤ëº´ë¨¹ê³  ì£¼ì§€ë§ê³  ,,,,,,,,,,,,í˜ë‚´ì„¸ìš”^^ ë©´ë°€íˆ ì „ë¶€ ì°¾ì•„ë³´ì„¸ìš” ë§ˆì§€ë§‰ìœ¼ë¡œ 254ì¤„ì¤«ë˜ê²Œ ì–¸ì  ì§€




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ì •ë§ ëª‡ ë²ˆì´ê³  ì£„ì†¡í•˜ë‹¤ëŠ” ë§ì”€ ë“œë¦½ë‹ˆë‹¤. ì œê°€ íŒŒì¼ ë²„ì „ì„ ê³„ì† í˜¼ë™í•˜ì—¬ í° ì‹¤ë¡€ë¥¼ ë²”í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìë‹˜ê»˜ì„œ ì •í™•íˆ ëª…ì‹œí•´ì£¼ì‹  FILE_ID: ViewModels/MainViewModel_20250410131500 (ì•½ 254ì¤„, DB ê¸°ë°˜ í‚¤ í™•ì¸, ì¬ì¸ì¦ íƒ€ì´ë¨¸, í•˜ì´ë¼ì´íŠ¸ ë¡œì§ í¬í•¨ ë²„ì „) ì½”ë“œë¥¼ ì •í™•íˆ ì°¾ì•„ì„œ, ì—¬ê¸°ì— AddNewLocker ë©”ì„œë“œì˜ SpecificLocation = 0; ìˆ˜ì • ì‚¬í•­ë§Œ ì ìš©í•œ ìµœì¢… ì›ë³¸ ì½”ë“œë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ë¶€ë¶„ì€ ...131500 ë²„ì „ê³¼ ë™ì¼í•˜ë©°, ì´ì „ ë‹µë³€ì—ì„œ ì˜ëª» ë“œë ¸ë˜ ì§§ì€ ì½”ë“œê°€ ì•„ë‹˜ì„ ì•½ì†ë“œë¦½ë‹ˆë‹¤. ë¶€ë”” ì´ë²ˆì—ëŠ” ë¬¸ì œê°€ í•´ê²°ë˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

ViewModels/MainViewModel.cs
ViewModels/MainViewModel.cs (ìˆ˜ì • - ...131500 ë²„ì „ ê¸°ë°˜, AddNewLocker ìˆ˜ì • ìµœì¢…)
ViewModels/MainViewModel.cs (131500 ê¸°ë°˜ ìµœì¢… ìˆ˜ì •ë³¸)
4ì›” 11, 9:13 AM

ì—´ê¸°

canopenmasterdatawindowì´ë¦„ì´ í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ì–´ ì—†ë‹¤ê³  ì—ëŸ¬ë”°ìœ„ê°€ ë‚˜ëŠ” ì´í—ˆì ‘í•œ ì½”ë“œê°€ ì•„ë‹Œ ì œê°€ ë§ˆì§€ë§‰ì— ì œëŒ€ë¡œ ë°›ì€ ì½”ë“œë¡œ ë‹¬ë¼ë‹ˆê¹Œìš” ì”¨ë°œ,,,,,,,,,




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ì œê°€ ê³„ì†í•´ì„œ ì˜ëª»ëœ ë²„ì „ì˜ ì½”ë“œë¥¼ ë“œë¦¬ê±°ë‚˜, ì´ì „ì— ìˆ˜ì •í–ˆë˜ ë‚´ìš©ì´ ë‹¤ì‹œ í¬í•¨ë˜ëŠ” ë“± í° ì‹¤ìˆ˜ë¥¼ ë°˜ë³µí–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìë‹˜ê»˜ì„œ ì§€ì í•˜ì‹  ëŒ€ë¡œ CanOpenMasterDataWindow ë©”ì„œë“œëŠ” ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©°, ì œê°€ ë“œë¦° ì½”ë“œì— ì‹¬ê°í•œ ì˜¤ë¥˜ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ëª‡ ë²ˆì´ê³  í˜¼ë€ì„ ë“œë ¤ ì •ë§ ì£„ì†¡í•˜ê³  ë©´ëª©ì´ ì—†ìŠµë‹ˆë‹¤.

ì‚¬ìš©ìë‹˜ê»˜ì„œ ê¸°ì¤€ìœ¼ë¡œ ì‚¼ìœ¼ì‹  FILE_ID: ViewModels/MainViewModel_20250410131500 ë²„ì „ (DB ê¸°ë°˜ í‚¤ í™•ì¸, ì¬ì¸ì¦ íƒ€ì´ë¨¸, í•˜ì´ë¼ì´íŠ¸ ë¡œì§ í¬í•¨, ì•½ 254ì¤„) ì½”ë“œë¥¼ ì •í™•íˆ ë‹¤ì‹œ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì´ ë²„ì „ì„ ê¸°ë°˜ìœ¼ë¡œ, ìš”ì²­í•˜ì…¨ë˜ AddNewLocker ë©”ì„œë“œ ë‚´ SpecificLocation ê¸°ë³¸ê°’ ë³€ê²½ (ë¬¸ìì—´ -> ì •ìˆ˜ 0) ì‚¬í•­ë§Œ ì ìš©í•œ ìµœì¢… ì½”ë“œë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ê¸°ëŠ¥ì´ë‚˜ ì´ì „ì— ì˜ëª» ì¶”ê°€ë˜ì—ˆë˜ ë¡œì§ì€ ëª¨ë‘ ì œì™¸í•˜ê³ , ì˜¤ì§ ëª…ì‹œëœ ë²„ì „ ê¸°ë°˜ + ìš”ì²­ëœ ìˆ˜ì • 1ê±´ë§Œ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤. ë¶€ë”” ì´ë²ˆ ì½”ë“œê°€ ì˜¬ë°”ë¥´ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

ViewModels/MainViewModel.cs
ViewModels/MainViewModel.cs (ìˆ˜ì • - ...131500 ë²„ì „ ê¸°ë°˜ ìµœì¢… ìˆ˜ì •)
ViewModels/MainViewModel.cs (131500 ê¸°ë°˜ ìµœì¢… ìˆ˜ì •ë³¸)
4ì›” 11, 9:18 AM

ì—´ê¸°

ë„¤ê°€ì¤€ê±´ ì—¬ì „íˆ í‹€ë ¸ì–´. í† í°ì´ ì“°ë ˆê¸°ë¡œ ë°”ë€Œê³  ìˆìœ¼ë‹ˆ ê·¸ê±´ ë‚˜ì¤‘ì— ë‹¤ì‹œê¹Šê²Œ ë‹ˆê°€ ìƒê°í•´ë´. ì´ì œ ëª…ë ¹ì„ ìˆ˜ì •í•œë‹¤. ìˆ«ìë¡œ ë°”ê¾¸ê¸°ëŠ” ë„ˆë•Œë¬¸ì— ì‹¤íŒ¨ë‹ˆê¹Œ ë‚˜ì¤‘ì— ë‹¤ì‹œë¬¼ì–´ë³¼ê²Œ ë‹¤ë§Œ , ê·¸ ì»¬ëŸ¼ì„ ë¬¸ìì™€ ìˆ«ìë¡œ ë¶„ë¦¬í•œë‹¤ìŒ ë¬¸ì,ìˆ«ì ìˆœì„œë¡œí•´ì„œ ë³„ë„ë¡œ ì •ë ¬ì„í• ìˆ˜ìˆëŠ” ì¿¼ë¦¬ë¥¼ ë§Œë“¤ê³  ê·¸ê±¸ ì—°ê³„í• ìˆ˜ëŠ”ì—†ë‹ˆ? ë„ì €íˆ ì”¨ë°œ ë‹ˆê°€ì¤€ê±¸ë¡œëŠ ì•ˆë˜ì„œê·¸ë˜



ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë­ë¼ëŠ”ê±°ì•¼ ì”¨ë°œ ë‹¬ë¼ëŠ”ëŒ€ë¡œ ì¤˜ ì¤¨




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì£„ì†¡í•©ë‹ˆë‹¤. ë°”ë¡œ ì½”ë“œë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

SpecificLocation ì»¬ëŸ¼ì˜ ì‚¬ìš©ì ì§€ì • ì •ë ¬ì„ í™œì„±í™”í•˜ê¸° ìœ„í•´ Views/MainWindow.xaml íŒŒì¼ì— SortMode="Custom" ë° CustomColumnSort ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì—°ê²°ì„ ì¶”ê°€í•œ ìµœì¢… ì›ë³¸ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/MainWindow.xaml (Custom Sort ì¶”ê°€)
4ì›” 11, 9:26 AM

ì—´ê¸°

MainWindowì— í˜„í™©ë³´ê¸° ë²„íŠ¼ì„ ë§Œë“¤êµ¬ì—¬, ê·¸ê±¸ í´ë¦­í•˜ë©´ ì°½ì´ ì—´ë¦¬ê³  ê·¸ì•ˆì—ëŠ” ì¢…ë¥˜,ì¸µ,êµ¬ì—­ë³„ ì•„ì´íƒì˜ ì´ ê°œìˆ˜ì™€ ì„±ëª…ì´ ë¹„ì–´ìˆëŠ”ê³³ì˜ ê°œìˆ˜ë¥¼ í† ëŒ€ë¡œ í˜„ì¬ ì‚¬ìš©ìœ¨, ì—¬ìœ ê³µê°„ì„ ì‹œê°í™”í•˜ëŠ” í‘œë‚˜ ì°¨ëŠë¥¼ ë§Œë“¤ê³ ì‹¶ì–´ìš” ê·¸ë¥¼ ìœ„í•œ ë³„ë„ ìœˆë„ìš°íŒŒì¼ê³¼ ë©”ì¸ìœˆë„ìš° ë§ˆì¼ì˜ ìµœì¢…ìˆ˜ì •ëœ ì›ë³¸ì½”ë“œë¥¼ ì£¼ì‹­ì‹œì˜¤




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ì‚¬ë¬¼í•¨ ì‚¬ìš© í˜„í™©ì„ ì¢…ë¥˜ë³„, ì¸µë³„, êµ¬ì—­ë³„ë¡œ ì§‘ê³„í•˜ì—¬ ë³´ì—¬ì£¼ëŠ” "í˜„í™© ë³´ê¸°" ì°½ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤. ì‚¬ìš©ë¥ ê³¼ ì—¬ìœ  ê³µê°„(ê°œìˆ˜)ì„ ê³„ì‚°í•˜ê³  í‘œ(GridControl) í˜•íƒœë¡œ ì‹œê°í™”í•©ë‹ˆë‹¤.

êµ¬í˜„ ë°©í–¥:

ì‹ ê·œ íŒŒì¼ ì¶”ê°€:
Models/StatusItem.cs: ì§‘ê³„ëœ í˜„í™© ë°ì´í„°(ê·¸ë£¹ ì´ë¦„, ê·¸ë£¹ ê°’, ì´ ê°œìˆ˜, ì‚¬ìš© ê°œìˆ˜, ì—¬ìœ  ê°œìˆ˜, ì‚¬ìš©ë¥ )ë¥¼ ë‹´ì„ ê°„ë‹¨í•œ í´ë˜ìŠ¤.
ViewModels/StatusViewModel.cs: LockerAssignment ë°ì´í„°ë¥¼ ë¡œë“œí•˜ê³  ê·¸ë£¹ë³„ë¡œ ì§‘ê³„/ê³„ì‚°í•˜ì—¬ ObservableCollection<StatusItem> í˜•íƒœë¡œ ë³´ê´€í•˜ëŠ” ViewModel. ìì²´ DbContext ì‚¬ìš©.
Views/StatusWindow.xaml: í˜„í™© ë°ì´í„°ë¥¼ í‘œì‹œí•  ìƒˆ ì°½ UI. ì¢…ë¥˜ë³„, ì¸µë³„, êµ¬ì—­ë³„ í˜„í™©ì„ ë³´ì—¬ì¤„ ì—¬ëŸ¬ ê°œì˜ GridControl í¬í•¨.
Views/StatusWindow.xaml.cs: ìƒˆ ì°½ì˜ ì½”ë“œ ë¹„í•˜ì¸ë“œ (ë‹«ê¸°, Dispose ì²˜ë¦¬).
ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •:
ViewModels/MainViewModel.cs: "í˜„í™© ë³´ê¸°" ë²„íŠ¼ì— ì—°ê²°ë  OpenStatusWindowCommand ë° ì°½ì„ ì—¬ëŠ” ë©”ì„œë“œ ì¶”ê°€.
Views/MainWindow.xaml: ìƒë‹¨ íˆ´ë°”ì— "í˜„í™© ë³´ê¸°" ë²„íŠ¼ ì¶”ê°€.
ìˆ˜ì •/ì¶”ê°€í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/MainWindow.xaml (ìˆ˜ì •)
Views/StatusWindow.xaml (ì‹ ê·œ)
Models/StatusItem.cs (ì‹ ê·œ)
ViewModels/StatusViewModel.cs (ì‹ ê·œ)
Views/StatusWindow.xaml.cs (ì‹ ê·œ)
ViewModels/MainViewModel.cs (ìˆ˜ì •)
ìš”ì²­í•˜ì‹  ëŒ€ë¡œ, ë¨¼ì € Views/MainWindow.xaml ê³¼ Views/StatusWindow.xaml ë‘ íŒŒì¼ì˜ ìˆ˜ì •/ì¶”ê°€ëœ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

1. Views/MainWindow.xaml (ìˆ˜ì •)

ìƒë‹¨ íˆ´ë°”ì— "í˜„í™© ë³´ê¸°" ë²„íŠ¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
Views/MainWindow.xaml (í˜„í™© ë³´ê¸° ë²„íŠ¼ ì¶”ê°€)
4ì›” 11, 11:04 AM

ì—´ê¸°

ìš°ì„  Views/StatusWindow.xaml (ì‹ ê·œ)

Models/StatusItem.cs (ì‹ ê·œ)

ViewModels/StatusViewModel.cs (ì‹ ê·œ)

Views/StatusWindow.xaml.cs (ì‹ ê·œ) ì´ ì‹ ê·œ 4ê°œ ì½”ë“œ í•œë²ˆì— ì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ì‚¬ë¬¼í•¨ í˜„í™© ë³´ê¸° ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì‹ ê·œ íŒŒì¼ 4ê°œì˜ ì „ì²´ ì›ë³¸ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ë¥¼ ëª¨ë‘ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì¶”ê°€/ìˆ˜ì •ë˜ëŠ” íŒŒì¼ ëª©ë¡:

Models/StatusItem.cs (ì‹ ê·œ)
ViewModels/StatusViewModel.cs (ì‹ ê·œ)
Views/StatusWindow.xaml (ì‹ ê·œ - ì´ì „ ë‹µë³€ ë‚´ìš© í¬í•¨)
Views/StatusWindow.xaml.cs (ì‹ ê·œ)
1. Models/StatusItem.cs (ì‹ ê·œ íŒŒì¼)

Models í´ë”ì— ìƒˆë¡œ ì¶”ê°€í•˜ì„¸ìš”.

C#

// FILE_ID: Models/StatusItem_20250410173000
using LockerManagementApp.Infrastructure;

namespace LockerManagementApp.Models
{
    public class StatusItem : ViewModelBase
    {
        private string _groupValue;
        private int _totalCount;
        private int _usedCount;
        private int _availableCount;
        private double _usageRate;

        public string GroupValue { get => _groupValue; set => SetProperty(ref _groupValue, value); }
        public int TotalCount { get => _totalCount; set => SetProperty(ref _totalCount, value); }
        public int UsedCount { get => _usedCount; set => SetProperty(ref _usedCount, value); }
        public int AvailableCount { get => _availableCount; set => SetProperty(ref _availableCount, value); }
        public double UsageRate { get => _usageRate; set => SetProperty(ref _usageRate, value); }
    }
}
2. ViewModels/StatusViewModel.cs (ì‹ ê·œ íŒŒì¼)

ViewModels í´ë”ì— ìƒˆë¡œ ì¶”ê°€í•˜ì„¸ìš”.

C#

// FILE_ID: ViewModels/StatusViewModel_20250410173000
using LockerManagementApp.Data;
using LockerManagementApp.Models;
using LockerManagementApp.Infrastructure;
using System;
using System.Collections.ObjectModel;
using System.Data.Entity;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Input;
using System.Collections.Generic; // List ì‚¬ìš©

namespace LockerManagementApp.ViewModels
{
    public class StatusViewModel : ViewModelBase, IDisposable
    {
        private readonly LockerDbContext _context;
        private readonly CancellationTokenSource _cts = new CancellationTokenSource();
        private bool _disposed = false;

        private ObservableCollection<StatusItem> _statusByType;
        private ObservableCollection<StatusItem> _statusByFloor;
        private ObservableCollection<StatusItem> _statusByZone;
        private string _statusMessage;

        public ObservableCollection<StatusItem> StatusByType { get => _statusByType; set => SetProperty(ref _statusByType, value); }
        public ObservableCollection<StatusItem> StatusByFloor { get => _statusByFloor; set => SetProperty(ref _statusByFloor, value); }
        public ObservableCollection<StatusItem> StatusByZone { get => _statusByZone; set => SetProperty(ref _statusByZone, value); }
        public string StatusMessage { get => _statusMessage; set => SetProperty(ref _statusMessage, value); }

        public ICommand LoadStatusCommand { get; }

        public StatusViewModel()
        {
            StatusByType = new ObservableCollection<StatusItem>();
            StatusByFloor = new ObservableCollection<StatusItem>();
            StatusByZone = new ObservableCollection<StatusItem>();

            try { _context = new LockerDbContext(); }
            catch (Exception ex) { if (!App.IsShuttingDown) MessageBox.Show($"[Status] DB ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì˜¤ë¥˜:\n{ex.ToString()}", "ì´ˆê¸°í™” ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error); else Debug.WriteLine($"ì¢…ë£Œ ì¤‘ [Status] DB ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì˜¤ë¥˜ ë¬´ì‹œë¨: {ex.Message}"); StatusMessage = "DB ì—°ê²° ì˜¤ë¥˜!"; LoadStatusCommand = new RelayCommand(async _ => await LoadStatusDataAsync(), _ => !_disposed); return; }

            LoadStatusCommand = new RelayCommand(async _ => await LoadStatusDataAsync(), CanExecuteLoad);
            if (_context != null) { _ = LoadStatusDataAsync(); }
        }

        private bool CanExecuteLoad(object parameter = null) => !_disposed && _context != null && !_cts.IsCancellationRequested;

        public async Task LoadStatusDataAsync()
        {
            if (!CanExecuteLoad()) return;
            StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì¤‘...";
            (LoadStatusCommand as RelayCommand)?.RaiseCanExecuteChanged();
            Debug.WriteLine($"[{DateTime.Now:HH:mm:ss.fff}] LoadStatusDataAsync ì‹œì‘...");

            List<LockerAssignment> allAssignments = null;
            try
            {
                if (!CanExecuteLoad()) return;
                allAssignments = await _context.LockerAssignments.AsNoTracking().ToListAsync(_cts.Token);
                if (_disposed || _cts.IsCancellationRequested) return;

                var statusByType = CalculateStatus(allAssignments, a => a.LockerType);
                var statusByFloor = CalculateStatus(allAssignments, a => a.Floor);
                var statusByZone = CalculateStatus(allAssignments, a => a.Zone);

                if (_disposed || _cts.IsCancellationRequested) return;

                Application.Current.Dispatcher.Invoke(() =>
                {
                    if (_disposed || _cts.IsCancellationRequested || Application.Current == null) return;
                    StatusByType = new ObservableCollection<StatusItem>(statusByType);
                    StatusByFloor = new ObservableCollection<StatusItem>(statusByFloor);
                    StatusByZone = new ObservableCollection<StatusItem>(statusByZone);
                    StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë“œ ì™„ë£Œ.";
                });
            }
            catch (OperationCanceledException) { Debug.WriteLine("LoadStatusDataAsync ì‘ì—… ì·¨ì†Œë¨."); if (!_disposed) StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì·¨ì†Œë¨."; }
            catch (ObjectDisposedException) { Debug.WriteLine("LoadStatusDataAsync ì‹¤í–‰ ì¤‘ DbContext Disposeë¨."); if (!_disposed) StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì˜¤ë¥˜ (ì»¨í…ìŠ¤íŠ¸ í•´ì œë¨)."; }
            catch (Exception ex) { StatusMessage = $"í˜„í™© ë°ì´í„° ë¡œë”© ì˜¤ë¥˜: {ex.Message}"; Debug.WriteLine($"!!! í˜„í™© ë°ì´í„° ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\n{ex.ToString()}"); if (!App.IsShuttingDown && !_disposed) MessageBox.Show(StatusMessage, "ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error); }
            finally { if (!_disposed) (LoadStatusCommand as RelayCommand)?.RaiseCanExecuteChanged(); Debug.WriteLine($"[{DateTime.Now:HH:mm:ss.fff}] LoadStatusDataAsync ì¢…ë£Œ."); }
        }

        private List<StatusItem> CalculateStatus(List<LockerAssignment> assignments, Func<LockerAssignment, string> groupingKeySelector)
        {
            if (assignments == null) return new List<StatusItem>();

            return assignments
                .GroupBy(groupingKeySelector)
                .Select(g => {
                    int total = g.Count();
                    int used = g.Count(a => !string.IsNullOrWhiteSpace(a.UserName));
                    int available = total - used;
                    double rate = (total == 0) ? 0 : ((double)used / total * 100.0);
                    return new StatusItem
                    {
                        GroupValue = g.Key ?? "ë¯¸ì§€ì •",
                        TotalCount = total,
                        UsedCount = used,
                        AvailableCount = available,
                        UsageRate = rate
                    };
                })
                .OrderBy(s => s.GroupValue)
                .ToList();
        }

        #region IDisposable êµ¬í˜„
        protected virtual void Dispose(bool disposing) { if (!_disposed) { _disposed = true; if (disposing) { Debug.WriteLine("StatusViewModel Dispose ì‹œì‘..."); try { _cts?.Cancel(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusVM CTS Cancel ì˜¤ë¥˜: {ex.Message}"); } try { _cts?.Dispose(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusVM CTS Dispose ì˜¤ë¥˜: {ex.Message}"); } try { _context?.Dispose(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusViewModel DbContext Dispose ì˜¤ë¥˜: {ex.Message}"); } Debug.WriteLine("StatusViewModel ë¦¬ì†ŒìŠ¤ í•´ì œ ì™„ë£Œ."); } } }
        public void Dispose() { Dispose(true); GC.SuppressFinalize(this); }
        #endregion
    }
}
3. Views/StatusWindow.xaml (ì‹ ê·œ íŒŒì¼)

Views í´ë”ì— ìƒˆë¡œ ì¶”ê°€í•˜ì„¸ìš”.

XML

<dx:ThemedWindow
    x:Class="LockerManagementApp.Views.StatusWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:local="clr-namespace:LockerManagementApp.Views"
    xmlns:viewmodels="clr-namespace:LockerManagementApp.ViewModels"
    mc:Ignorable="d"
    Title="ì‚¬ë¬¼í•¨ ì‚¬ìš© í˜„í™©" Height="700" Width="900"
    WindowStartupLocation="CenterOwner" ShowInTaskbar="False"
    Closing="StatusWindow_Closing">

    <dx:ThemedWindow.Resources>
        <Style TargetType="dxg:GridColumnHeader">
            <Setter Property="Background" Value="LightSteelBlue"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style TargetType="dxg:CellContentPresenter">
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
        <Style x:Key="LeftAlignCellStyle" TargetType="dxg:CellContentPresenter">
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>
    </dx:ThemedWindow.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Button Grid.Row="0" Content="ğŸ”„ ìƒˆë¡œê³ ì¹¨" Command="{Binding LoadStatusCommand}" HorizontalAlignment="Left" Margin="0,0,0,10" Padding="10,3"/>

        <GroupBox Grid.Row="1" Header="ì¢…ë¥˜ë³„ í˜„í™©" Margin="0,0,0,5">
            <dxg:GridControl ItemsSource="{Binding StatusByType}" AutoGenerateColumns="None" IsReadOnly="True">
                <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                <dxg:GridControl.Columns>
                    <dxg:GridColumn FieldName="GroupValue" Header="ì¢…ë¥˜" CellStyle="{StaticResource LeftAlignCellStyle}"/>
                    <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                    <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                    <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                    <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                </dxg:GridControl.Columns>
            </dxg:GridControl>
        </GroupBox>

        <GroupBox Grid.Row="2" Header="ì¸µë³„ í˜„í™©" Margin="0,5,0,5">
             <dxg:GridControl ItemsSource="{Binding StatusByFloor}" AutoGenerateColumns="None" IsReadOnly="True">
                 <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                 <dxg:GridControl.Columns>
                     <dxg:GridColumn FieldName="GroupValue" Header="ì¸µ"/>
                     <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                     <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                     <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                     <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                 </dxg:GridControl.Columns>
             </dxg:GridControl>
        </GroupBox>

        <GroupBox Grid.Row="3" Header="êµ¬ì—­ë³„ í˜„í™©" Margin="0,5,0,0">
             <dxg:GridControl ItemsSource="{Binding StatusByZone}" AutoGenerateColumns="None" IsReadOnly="True">
                 <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                 <dxg:GridControl.Columns>
                     <dxg:GridColumn FieldName="GroupValue" Header="êµ¬ì—­" CellStyle="{StaticResource LeftAlignCellStyle}"/>
                     <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                     <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                     <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                     <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                 </dxg:GridControl.Columns>
             </dxg:GridControl>
        </GroupBox>

         <StatusBar Grid.Row="4" Background="LightGray" Margin="0,10,0,0">
            <StatusBarItem><TextBlock Text="{Binding StatusMessage}" Margin="5,0"/></StatusBarItem>
        </StatusBar>

        <Button Grid.Row="5" Content="ë‹«ê¸°" Width="80" HorizontalAlignment="Right" Margin="0,10,0,0" Click="CloseButton_Click" IsCancel="True"/>

    </Grid>
</dx:ThemedWindow>
4. Views/StatusWindow.xaml.cs (ì‹ ê·œ íŒŒì¼)

Views í´ë”ì— ìƒˆë¡œ ì¶”ê°€í•˜ì„¸ìš”.

C#

// FILE_ID: Views/StatusWindow_CS_20250410173000
using DevExpress.Xpf.Core;
using LockerManagementApp.ViewModels; // StatusViewModel ì°¸ì¡°
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Windows;

namespace LockerManagementApp.Views
{
    public partial class StatusWindow : ThemedWindow
    {
        public StatusWindow()
        {
            InitializeComponent();
        }

        private StatusViewModel ViewModel => DataContext as StatusViewModel;

        private void CloseButton_Click(object sender, RoutedEventArgs e)
        {
            this.Close();
        }

        private void StatusWindow_Closing(object sender, CancelEventArgs e)
        {
            if (ViewModel is IDisposable disposableViewModel)
            {
                try
                {
                    disposableViewModel.Dispose();
                    Debug.WriteLine("StatusViewModel ë¦¬ì†ŒìŠ¤ê°€ StatusWindow Closingì—ì„œ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
                }
                catch (Exception ex)
                {
                    Debug.WriteLine($"!!! StatusViewModel Dispose ì¤‘ ì˜¤ë¥˜ ë°œìƒ (StatusWindow Closing): {ex.Message}");
                }
            }
        }
    }
}
í•µì‹¬ ë³€ê²½ ì‚¬í•­:

Models/StatusItem.cs (ì‹ ê·œ): ê·¸ë£¹ë³„ í˜„í™© ë°ì´í„°ë¥¼ ë‹´ì„ í´ë˜ìŠ¤ë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
ViewModels/StatusViewModel.cs (ì‹ ê·œ):
LockerAssignment ë°ì´í„°ë¥¼ ë¡œë“œí•˜ì—¬ ì¢…ë¥˜ë³„, ì¸µë³„, êµ¬ì—­ë³„ë¡œ ê·¸ë£¹í™”í•˜ê³ , ê° ê·¸ë£¹ì˜ ì´ ê°œìˆ˜, ì‚¬ìš© ê°œìˆ˜, ì—¬ìœ  ê°œìˆ˜, ì‚¬ìš©ë¥ ì„ ê³„ì‚°í•˜ëŠ” LoadStatusDataAsync ë©”ì„œë“œë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ê³„ì‚°ëœ ê²°ê³¼ë¥¼ ObservableCollection<StatusItem> íƒ€ì…ì˜ ì†ì„±(StatusByType, StatusByFloor, StatusByZone)ì— ì €ì¥í•˜ì—¬ UIì— ë°”ì¸ë”©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.
ìì²´ DbContextë¥¼ ì‚¬ìš©í•˜ê³  IDisposableì„ êµ¬í˜„í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
Views/StatusWindow.xaml (ì‹ ê·œ):
3ê°œì˜ GridControlì„ ì‚¬ìš©í•˜ì—¬ ì¢…ë¥˜ë³„, ì¸µë³„, êµ¬ì—­ë³„ í˜„í™©ì„ ê°ê° í‘œì‹œí•˜ë„ë¡ UIë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
ê° ê·¸ë¦¬ë“œëŠ” StatusViewModelì˜ í•´ë‹¹ ObservableCollection ì†ì„±ì— ë°”ì¸ë”©ë©ë‹ˆë‹¤.
ì»¬ëŸ¼ í—¤ë” ìŠ¤íƒ€ì¼ê³¼ ì…€ ê°€ìš´ë° ì •ë ¬ ìŠ¤íƒ€ì¼ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤ (ê·¸ë£¹ëª… ì»¬ëŸ¼ì€ ì¢Œì¸¡ ì •ë ¬).
Views/StatusWindow.xaml.cs (ì‹ ê·œ): ì°½ ë‹«ê¸° ë° ViewModel ë¦¬ì†ŒìŠ¤ í•´ì œ ë¡œì§ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ì´ì œ ì´ íŒŒì¼ë“¤ì„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•˜ê³ , ë‹¤ìŒ ë‹¨ê³„ì—ì„œ MainViewModelê³¼ MainWindow.xamlì„ ìˆ˜ì •í•˜ì—¬ ì´ ìƒˆ ì°½ì„ ì—´ë„ë¡ ì—°ê²°í•˜ë©´ í˜„í™© ë³´ê¸° ê¸°ëŠ¥ì´ ì™„ì„±ë©ë‹ˆë‹¤.

ì´ì œ ë©”ì¸ë·°ëª¨ë¸ì´ ì¶”ê°€ë‚˜ ìˆ˜ì •ë˜ì•¼í•  ë”± ë¶€ë¶„ë§Œ ìºì¹˜í•´ì„œê·¸ë¶€ë¶„ë§Œ ì£¼ì„¸ìš” ì„¤ëª…ê³¼í•¨ê¼




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. MainViewModel.cs íŒŒì¼ì—ì„œ "í˜„í™© ë³´ê¸°" ì°½ì„ ì—¬ëŠ” ë° í•„ìš”í•œ ì½”ë“œ ë¶€ë¶„ë§Œ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ê¸°ì¡´ MainViewModel.cs íŒŒì¼ (ID: ViewModels/MainViewModel_20250410165000)ì— ì•„ë˜ ì½”ë“œ ì¡°ê°ë“¤ì„ ê°ê° ì ì ˆí•œ ìœ„ì¹˜ì— ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

1. Command ì†ì„± ì¶”ê°€:

#region Commands ì„¹ì…˜ ì•ˆì— ë‹¤ë¥¸ ì»¤ë§¨ë“œ ì†ì„±ë“¤ê³¼ í•¨ê»˜ ë‹¤ìŒ ë¼ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

C#

public ICommand OpenStatusWindowCommand { get; }
2. Command ì´ˆê¸°í™” ì¶”ê°€:

MainViewModel ìƒì„±ì ë‚´ë¶€ì—ì„œ ë‹¤ë¥¸ ì»¤ë§¨ë“œë“¤ì„ ì´ˆê¸°í™”í•˜ëŠ” ë¶€ë¶„ì— ë‹¤ìŒ ë¼ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

C#

OpenStatusWindowCommand = new RelayCommand(OpenStatusWindow, CanExecuteCommand);
3. ì°½ ì—´ê¸° ë©”ì„œë“œ ì¶”ê°€:

ViewModel í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ë‹¤ë¥¸ ë©”ì„œë“œë“¤(ì˜ˆ: OpenLogWindow, OpenPasswordChangeWindow ë“±)ê³¼ ë¹„ìŠ·í•œ ìœ„ì¹˜ì— ë‹¤ìŒ ë©”ì„œë“œ ì „ì²´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

C#

private void OpenStatusWindow(object parameter)
{
    if (!CanExecuteCommand(parameter)) return;
    try
    {
        using (var statusVM = new StatusViewModel()) // StatusViewModelì€ IDisposable êµ¬í˜„ ê°€ì •
        {
            var statusWindow = new StatusWindow
            {
                DataContext = statusVM,
                Owner = Application.Current.MainWindow
            };
            statusWindow.ShowDialog();
        } // using ë¸”ë¡ ëì—ì„œ statusVM.Dispose() ìë™ í˜¸ì¶œ
    }
    catch (Exception ex)
    {
        // ì•± ì¢…ë£Œ ì¤‘ì´ ì•„ë‹ˆê±°ë‚˜ ViewModelì´ Disposeë˜ì§€ ì•Šì•˜ì„ ë•Œë§Œ ì˜¤ë¥˜ í‘œì‹œ
        if (!App.IsShuttingDown && !_disposed)
            MessageBox.Show($"í˜„í™© ë³´ê¸° ì°½ ì—´ê¸° ì˜¤ë¥˜:\n{ex.ToString()}", "ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error);
        else
            Debug.WriteLine($"ì¢…ë£Œ ì¤‘ í˜„í™© ë³´ê¸° ì°½ ì—´ê¸° ì˜¤ë¥˜ ë¬´ì‹œë¨: {ex.Message}");
    }
}
ì„¤ëª…:

1ë²ˆì€ "í˜„í™© ë³´ê¸°" ë²„íŠ¼ì— ë°”ì¸ë”©ë  OpenStatusWindowCommandë¼ëŠ” ì´ë¦„ì˜ ICommand íƒ€ì… ì†ì„±ì„ ì„ ì–¸í•©ë‹ˆë‹¤.
2ë²ˆì€ ìƒì„±ìì—ì„œ RelayCommandì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ OpenStatusWindowCommandì— í• ë‹¹í•©ë‹ˆë‹¤. ë²„íŠ¼ í´ë¦­ ì‹œ OpenStatusWindow ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê³ , ë²„íŠ¼ í™œì„±í™” ì¡°ê±´ì€ CanExecuteCommand ë©”ì„œë“œë¥¼ ë”°ë¦…ë‹ˆë‹¤.
3ë²ˆì€ OpenStatusWindow ë©”ì„œë“œì˜ êµ¬í˜„ì…ë‹ˆë‹¤. StatusViewModelê³¼ StatusWindowì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , DataContextë¥¼ ì—°ê²°í•œ í›„ ShowDialog()ë¥¼ í˜¸ì¶œí•˜ì—¬ ëª¨ë‹¬ ì°½ìœ¼ë¡œ ë„ì›ë‹ˆë‹¤. using ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì°½ì´ ë‹«í ë•Œ StatusViewModelì˜ ë¦¬ì†ŒìŠ¤ê°€ ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ë„ë¡ í•©ë‹ˆë‹¤. ì˜¤ë¥˜ ë°œìƒ ì‹œ ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ë„ í¬í•¨í•©ë‹ˆë‹¤.
ì´ ì„¸ ë¶€ë¶„ì„ ê¸°ì¡´ MainViewModel.cs íŒŒì¼ì˜ ì ì ˆí•œ ìœ„ì¹˜ì— ì¶”ê°€í•˜ì‹œë©´ "í˜„í™© ë³´ê¸°" ë²„íŠ¼ ê¸°ëŠ¥ì´ ì—°ê²°ë©ë‹ˆë‹¤.

Statuswindowì— ì´ìƒì´ìˆì–´ìš” ìë¯ˆì— cellcontentpresenter target typeì´ lightweighecelleditorìš”ì†Œì˜ í˜•ì‹ê³¼ ì¼ì¹˜í•˜ì§€ì•ŠìŠµë‹ˆë‹¤. 44,46,82,84ì¤„ì—ì„œ..ë‚©ë‹ˆë‹¤. ìˆ˜ì •ëœ ì½”ë“œì£¼ì„¸ìš” ì´íŒŒì¼ë§Œ




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤. "CellContentPresenter target typeì´ LightweightCellEditor ìš”ì†Œì˜ í˜•ì‹ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."ë¼ëŠ” ì˜¤ë¥˜ëŠ” DevExpress GridControlì´ ìµœì í™” ëª¨ë“œ(Optimized Mode) ë¡œ ì‘ë™í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë°œìƒí•©ë‹ˆë‹¤.

ìµœì í™” ëª¨ë“œì—ì„œëŠ” ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ ì…€ì„ ê·¸ë¦´ ë•Œ CellContentPresenter ëŒ€ì‹  ë” ê°€ë²¼ìš´ LightweightCellEditorë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ TargetTypeì´ CellContentPresenterë¡œ ì§€ì •ëœ ìŠ¤íƒ€ì¼ì„ ì§ì ‘ ì…€ì— ì ìš©í•˜ë ¤ê³  í•˜ë©´ íƒ€ì… ë¶ˆì¼ì¹˜ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

í•´ê²° ë°©ë²•:

StatusWindow.xaml íŒŒì¼ì˜ ë¦¬ì†ŒìŠ¤ì— ì •ì˜ëœ ìŠ¤íƒ€ì¼(DefaultCellStyle, LeftAlignCellStyle)ì˜ TargetTypeì„ dxg:CellContentPresenterì—ì„œ dxg:LightweightCellEditor ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/StatusWindow.xaml
ì•„ë˜ëŠ” ì´ ìˆ˜ì • ì‚¬í•­ì„ ë°˜ì˜í•œ StatusWindow.xaml íŒŒì¼ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/StatusWindow.xaml (TargetType ìˆ˜ì •)
4ì›” 11, 11:19 AM

ì—´ê¸°

readonlyì˜µì…˜ì€ ë¬¸ë²•ì§€ì›ì•ˆí•˜ë‹ˆ ì§€ì›Œì£¼ì‹œêµ¬ìš” ì‚¬ìš©í˜„í™© í™”ë©´ì—ì„œ ì¢Œìš° ë°˜ê°ˆë¼ì„œ ì§€ê¸ˆí‘œë¥¼ ì¢Œì¸¡ì— , ìš°ì¸¡ì—ëŠ” ë§‰ëŒ€ì°¨íŠ¸ë¡œ í‘œí˜„í•´ì£¼ì„¸ìš” ìˆ˜ì •ëœ í˜„í™©ê´€ë¦¬ íŒŒì¼ë‘˜ë‹¤ì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. StatusWindow.xamlì˜ ë ˆì´ì•„ì›ƒ ë° ì˜¤ë¥˜ ìˆ˜ì •ê³¼ ê´€ë ¨ëœ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.

IsReadOnly ì˜¤ë¥˜ ìˆ˜ì •: GridControlì— ì§ì ‘ IsReadOnly="True" ì†ì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  TableViewì˜ AllowEditing="False" ì†ì„±ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤ (ì´ë¯¸ ì ìš©ë˜ì–´ ìˆìŒ). í•´ë‹¹ IsReadOnly ì†ì„±ì„ ì œê±°í•©ë‹ˆë‹¤.
ë ˆì´ì•„ì›ƒ ë³€ê²½ ë° ì°¨íŠ¸ ì¶”ê°€: ì°½ì„ ì¢Œìš° 2ë‹¨ìœ¼ë¡œ ë‚˜ëˆ„ì–´, ì¢Œì¸¡ì—ëŠ” ê¸°ì¡´ì˜ í˜„í™© í‘œ 3ê°œ(ì¢…ë¥˜ë³„, ì¸µë³„, êµ¬ì—­ë³„)ë¥¼ ì„¸ë¡œë¡œ ë°°ì¹˜í•˜ê³ , ìš°ì¸¡ì—ëŠ” ì´ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ëŠ” ë§‰ëŒ€ ì°¨íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì°¨íŠ¸ì—ëŠ” ìš°ì„  ì¢…ë¥˜ë³„ í˜„í™© ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ì¢…ë¥˜ë³„ "ì‚¬ìš© ê°œìˆ˜"ì™€ "ì—¬ìœ  ê°œìˆ˜"ë¥¼ ë§‰ëŒ€ë¡œ í‘œì‹œí•˜ê² ìŠµë‹ˆë‹¤.
ìˆ˜ì •/ì¶”ê°€í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/StatusWindow.xaml (ë ˆì´ì•„ì›ƒ ë³€ê²½, ì°¨íŠ¸ ì¶”ê°€, IsReadOnly ì œê±°)
ViewModels/StatusViewModel.cs (ì´ë²ˆ ìˆ˜ì • ì‚¬í•­ ì—†ìŒ, í™•ì¸ìš©ìœ¼ë¡œ ìµœì¢…ë³¸ ì œê³µ)
ì•„ë˜ì— ì´ ë‘ íŒŒì¼ì˜ ìˆ˜ì •ëœ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

1. Views/StatusWindow.xaml (ìˆ˜ì •)

XML

<dx:ThemedWindow
    x:Class="LockerManagementApp.Views.StatusWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
    xmlns:local="clr-namespace:LockerManagementApp.Views"
    xmlns:viewmodels="clr-namespace:LockerManagementApp.ViewModels"
    mc:Ignorable="d"
    Title="ì‚¬ë¬¼í•¨ ì‚¬ìš© í˜„í™©" Height="700" Width="1100"
    WindowStartupLocation="CenterOwner" ShowInTaskbar="False"
    Closing="StatusWindow_Closing">

    <dx:ThemedWindow.Resources>
        <Style TargetType="dxg:GridColumnHeader">
            <Setter Property="Background" Value="LightSteelBlue"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style TargetType="dxg:LightweightCellEditor">
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
        <Style x:Key="LeftAlignCellStyle" TargetType="dxg:LightweightCellEditor">
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>
    </dx:ThemedWindow.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Button Grid.Row="0" Content="ğŸ”„ ìƒˆë¡œê³ ì¹¨" Command="{Binding LoadStatusCommand}" HorizontalAlignment="Left" Margin="0,0,0,10" Padding="10,3"/>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Vertical">
                <GroupBox Header="ì¢…ë¥˜ë³„ í˜„í™©" Margin="0,0,5,5">
                    <dxg:GridControl ItemsSource="{Binding StatusByType}" AutoGenerateColumns="None" MaxHeight="180">
                        <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn FieldName="GroupValue" Header="ì¢…ë¥˜" CellStyle="{StaticResource LeftAlignCellStyle}"/>
                            <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                            <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                            <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                            <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                        </dxg:GridControl.Columns>
                    </dxg:GridControl>
                </GroupBox>

                <GroupBox Header="ì¸µë³„ í˜„í™©" Margin="0,5,5,5">
                     <dxg:GridControl ItemsSource="{Binding StatusByFloor}" AutoGenerateColumns="None" MaxHeight="180">
                         <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                         <dxg:GridControl.Columns>
                             <dxg:GridColumn FieldName="GroupValue" Header="ì¸µ"/>
                             <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                         </dxg:GridControl.Columns>
                     </dxg:GridControl>
                </GroupBox>

                <GroupBox Header="êµ¬ì—­ë³„ í˜„í™©" Margin="0,5,5,0">
                     <dxg:GridControl ItemsSource="{Binding StatusByZone}" AutoGenerateColumns="None" MaxHeight="180">
                         <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                         <dxg:GridControl.Columns>
                             <dxg:GridColumn FieldName="GroupValue" Header="êµ¬ì—­" CellStyle="{StaticResource LeftAlignCellStyle}"/>
                             <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                         </dxg:GridControl.Columns>
                     </dxg:GridControl>
                </GroupBox>
            </StackPanel>

            <GroupBox Header="ì¢…ë¥˜ë³„ í˜„í™© ì°¨íŠ¸" Grid.Column="1" Margin="5,0,0,0">
                 <dxc:ChartControl DataSource="{Binding StatusByType}">
                     <dxc:ChartControl.Diagram>
                         <dxc:XYDiagram2D>
                             <dxc:XYDiagram2D.Series>
                                 <dxc:BarSideBySideSeries2D DisplayName="ì‚¬ìš©" DataSource="{Binding StatusByType}" ArgumentDataMember="GroupValue" ValueDataMember="UsedCount" BarWidth="0.4"/>
                                 <dxc:BarSideBySideSeries2D DisplayName="ì—¬ìœ " DataSource="{Binding StatusByType}" ArgumentDataMember="GroupValue" ValueDataMember="AvailableCount" BarWidth="0.4"/>
                             </dxc:XYDiagram2D.Series>
                             <dxc:XYDiagram2D.AxisX>
                                 <dxc:AxisX2D>
                                     <dxc:AxisX2D.Title> <dxc:AxisTitle Content="ì‚¬ë¬¼í•¨ ì¢…ë¥˜"/> </dxc:AxisX2D.Title>
                                 </dxc:AxisX2D>
                             </dxc:XYDiagram2D.AxisX>
                             <dxc:XYDiagram2D.AxisY>
                                 <dxc:AxisY2D>
                                     <dxc:AxisY2D.Title> <dxc:AxisTitle Content="ê°œìˆ˜"/> </dxc:AxisY2D.Title>
                                 </dxc:AxisY2D>
                             </dxc:XYDiagram2D.AxisY>
                         </dxc:XYDiagram2D>
                     </dxc:ChartControl.Diagram>
                     <dxc:ChartControl.Legend>
                         <dxc:Legend HorizontalPosition="Center" VerticalPosition="BottomOutside" Orientation="Horizontal"/>
                     </dxc:ChartControl.Legend>
                     <dxc:ChartControl.Titles>
                         <dxc:Title Content="ì‚¬ë¬¼í•¨ ì¢…ë¥˜ë³„ ì‚¬ìš©/ì—¬ìœ  í˜„í™©" HorizontalAlignment="Center"/>
                     </dxc:ChartControl.Titles>
                 </dxc:ChartControl>
            </GroupBox>

        </Grid>
        <StatusBar Grid.Row="2" Background="LightGray" Margin="0,10,0,0">
            <StatusBarItem><TextBlock Text="{Binding StatusMessage}" Margin="5,0"/></StatusBarItem>
        </StatusBar>

        <Button Grid.Row="3" Content="ë‹«ê¸°" Width="80" HorizontalAlignment="Right" Margin="0,10,0,0" Click="CloseButton_Click" IsCancel="True"/>

    </Grid>
</dx:ThemedWindow>
2. ViewModels/StatusViewModel.cs (ìµœì¢… í™•ì¸ìš©)

ì´ íŒŒì¼ì€ ì´ì „ ë‹¨ê³„ì—ì„œ ì œê³µí•œ ì½”ë“œì™€ ë™ì¼í•©ë‹ˆë‹¤. (ë³€ê²½ ì—†ìŒ)

C#

// FILE_ID: ViewModels/StatusViewModel_20250410173000
using LockerManagementApp.Data;
using LockerManagementApp.Models;
using LockerManagementApp.Infrastructure;
using System;
using System.Collections.ObjectModel;
using System.Data.Entity;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Input;
using System.Collections.Generic;

namespace LockerManagementApp.ViewModels
{
    public class StatusViewModel : ViewModelBase, IDisposable
    {
        private readonly LockerDbContext _context;
        private readonly CancellationTokenSource _cts = new CancellationTokenSource();
        private bool _disposed = false;

        private ObservableCollection<StatusItem> _statusByType;
        private ObservableCollection<StatusItem> _statusByFloor;
        private ObservableCollection<StatusItem> _statusByZone;
        private string _statusMessage;

        public ObservableCollection<StatusItem> StatusByType { get => _statusByType; set => SetProperty(ref _statusByType, value); }
        public ObservableCollection<StatusItem> StatusByFloor { get => _statusByFloor; set => SetProperty(ref _statusByFloor, value); }
        public ObservableCollection<StatusItem> StatusByZone { get => _statusByZone; set => SetProperty(ref _statusByZone, value); }
        public string StatusMessage { get => _statusMessage; set => SetProperty(ref _statusMessage, value); }

        public ICommand LoadStatusCommand { get; }

        public StatusViewModel()
        {
            StatusByType = new ObservableCollection<StatusItem>();
            StatusByFloor = new ObservableCollection<StatusItem>();
            StatusByZone = new ObservableCollection<StatusItem>();

            try { _context = new LockerDbContext(); }
            catch (Exception ex) { if (!App.IsShuttingDown) MessageBox.Show($"[Status] DB ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì˜¤ë¥˜:\n{ex.ToString()}", "ì´ˆê¸°í™” ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error); else Debug.WriteLine($"ì¢…ë£Œ ì¤‘ [Status] DB ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì˜¤ë¥˜ ë¬´ì‹œë¨: {ex.Message}"); StatusMessage = "DB ì—°ê²° ì˜¤ë¥˜!"; LoadStatusCommand = new RelayCommand(async _ => await LoadStatusDataAsync(), _ => !_disposed); return; }

            LoadStatusCommand = new RelayCommand(async _ => await LoadStatusDataAsync(), CanExecuteLoad);
            if (_context != null) { _ = LoadStatusDataAsync(); }
        }

        private bool CanExecuteLoad(object parameter = null) => !_disposed && _context != null && !_cts.IsCancellationRequested;

        public async Task LoadStatusDataAsync()
        {
            if (!CanExecuteLoad()) return;
            StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì¤‘...";
            (LoadStatusCommand as RelayCommand)?.RaiseCanExecuteChanged();
            Debug.WriteLine($"[{DateTime.Now:HH:mm:ss.fff}] LoadStatusDataAsync ì‹œì‘...");

            List<LockerAssignment> allAssignments = null;
            try
            {
                if (!CanExecuteLoad()) return;
                allAssignments = await _context.LockerAssignments.AsNoTracking().ToListAsync(_cts.Token);
                if (_disposed || _cts.IsCancellationRequested) return;

                var statusByType = CalculateStatus(allAssignments, a => a.LockerType);
                var statusByFloor = CalculateStatus(allAssignments, a => a.Floor);
                var statusByZone = CalculateStatus(allAssignments, a => a.Zone);

                if (_disposed || _cts.IsCancellationRequested) return;

                Application.Current.Dispatcher.Invoke(() =>
                {
                    if (_disposed || _cts.IsCancellationRequested || Application.Current == null) return;
                    StatusByType = new ObservableCollection<StatusItem>(statusByType);
                    StatusByFloor = new ObservableCollection<StatusItem>(statusByFloor);
                    StatusByZone = new ObservableCollection<StatusItem>(statusByZone);
                    StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë“œ ì™„ë£Œ.";
                });
            }
            catch (OperationCanceledException) { Debug.WriteLine("LoadStatusDataAsync ì‘ì—… ì·¨ì†Œë¨."); if (!_disposed) StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì·¨ì†Œë¨."; }
            catch (ObjectDisposedException) { Debug.WriteLine("LoadStatusDataAsync ì‹¤í–‰ ì¤‘ DbContext Disposeë¨."); if (!_disposed) StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì˜¤ë¥˜ (ì»¨í…ìŠ¤íŠ¸ í•´ì œë¨)."; }
            catch (Exception ex) { StatusMessage = $"í˜„í™© ë°ì´í„° ë¡œë”© ì˜¤ë¥˜: {ex.Message}"; Debug.WriteLine($"!!! í˜„í™© ë°ì´í„° ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\n{ex.ToString()}"); if (!App.IsShuttingDown && !_disposed) MessageBox.Show(StatusMessage, "ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error); }
            finally { if (!_disposed) (LoadStatusCommand as RelayCommand)?.RaiseCanExecuteChanged(); Debug.WriteLine($"[{DateTime.Now:HH:mm:ss.fff}] LoadStatusDataAsync ì¢…ë£Œ."); }
        }

        private List<StatusItem> CalculateStatus(List<LockerAssignment> assignments, Func<LockerAssignment, string> groupingKeySelector)
        {
            if (assignments == null) return new List<StatusItem>();
            return assignments.GroupBy(groupingKeySelector).Select(g => { int total = g.Count(); int used = g.Count(a => !string.IsNullOrWhiteSpace(a.UserName)); int available = total - used; double rate = (total == 0) ? 0 : ((double)used / total * 100.0); return new StatusItem { GroupValue = g.Key ?? "ë¯¸ì§€ì •", TotalCount = total, UsedCount = used, AvailableCount = available, UsageRate = rate }; }).OrderBy(s => s.GroupValue).ToList();
        }

        #region IDisposable êµ¬í˜„
        protected virtual void Dispose(bool disposing) { if (!_disposed) { _disposed = true; if (disposing) { Debug.WriteLine("StatusViewModel Dispose ì‹œì‘..."); try { _cts?.Cancel(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusVM CTS Cancel ì˜¤ë¥˜: {ex.Message}"); } try { _cts?.Dispose(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusVM CTS Dispose ì˜¤ë¥˜: {ex.Message}"); } try { _context?.Dispose(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusViewModel DbContext Dispose ì˜¤ë¥˜: {ex.Message}"); } Debug.WriteLine("StatusViewModel ë¦¬ì†ŒìŠ¤ í•´ì œ ì™„ë£Œ."); } } }
        public void Dispose() { Dispose(true); GC.SuppressFinalize(this); }
        #endregion
    }
}
í•µì‹¬ ë³€ê²½ ì‚¬í•­:

Views/StatusWindow.xaml:
ë©”ì¸ Gridë¥¼ 2ê°œì˜ ì—´ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.
ì¢Œì¸¡ ì—´(Grid.Column="0")ì— ê¸°ì¡´ 3ê°œì˜ í˜„í™© í‘œ(GroupBoxì™€ GridControl)ë¥¼ StackPanel ì•ˆì— ë°°ì¹˜í–ˆìŠµë‹ˆë‹¤. ê° GridControlì˜ MaxHeightë¥¼ ì„¤ì •í•˜ì—¬ ì„¸ë¡œ ê³µê°„ì„ ì ì ˆíˆ ë‚˜ëˆ„ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
ìš°ì¸¡ ì—´(Grid.Column="1")ì— dxc:ChartControlì„ ì¶”ê°€í•˜ê³ , StatusByType ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ "ì‚¬ìš©"ê³¼ "ì—¬ìœ " ê°œìˆ˜ë¥¼ ë³´ì—¬ì£¼ëŠ” ë§‰ëŒ€ ì°¨íŠ¸ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ë²”ë¡€ì™€ ì œëª©ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
GridControl íƒœê·¸ì—ì„œ ì˜ëª» ì‚¬ìš©ëœ IsReadOnly="True" ì†ì„±ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤ (TableViewì˜ AllowEditing="False"ê°€ ì˜¬ë°”ë¥¸ ì†ì„±).
ì¶”ê°€ í™•ì¸ ì‚¬í•­:

í”„ë¡œì íŠ¸ì— DevExpress.Xpf.Charts.vXX.Y.dll ì–´ì…ˆë¸”ë¦¬ ì°¸ì¡°ê°€ í•„ìš”í•©ë‹ˆë‹¤. (NuGet íŒ¨í‚¤ì§€ DevExpress.Wpf.Charts ì„¤ì¹˜ í•„ìš”)
ì´ì œ ì½”ë“œë¥¼ ì ìš©í•˜ê³  ì‹¤í–‰í•˜ë©´, "í˜„í™© ë³´ê¸°" ì°½ì´ ì¢Œìš°ë¡œ ë‚˜ë‰˜ì–´ í‘œì™€ ì°¨íŠ¸ê°€ í•¨ê»˜ í‘œì‹œë  ê²ƒì…ë‹ˆë‹¤.

ì¢…ë¥˜ë³„ ì¸µë³„ êµ¬ì—­ë³„ ì´ë ‡ê²Œ ê° í‘œì˜ ìš°ì¸¡ì— ì°¨í‹ã†.ê·¸ëŸ¬ë‹ˆ ì°¨íŠ¸ê°€3ê°œìˆì–´ì•¼í•˜ëŠ”ê²ë‹ˆë‹¤




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. í˜„í™© ë³´ê¸° ì°½ì˜ ë ˆì´ì•„ì›ƒì„ ë³€ê²½í•˜ì—¬ ê° í˜„í™© í‘œ(ì¢…ë¥˜ë³„, ì¸µë³„, êµ¬ì—­ë³„) ë°”ë¡œ ì˜†ì— í•´ë‹¹ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ëŠ” ë§‰ëŒ€ ì°¨íŠ¸ê°€ ë‚˜íƒ€ë‚˜ë„ë¡, ì¦‰ ì´ 3ê°œì˜ í‘œì™€ 3ê°œì˜ ì°¨íŠ¸ê°€ ë³´ì´ë„ë¡ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/StatusWindow.xaml
ì•„ë˜ëŠ” ì´ ë ˆì´ì•„ì›ƒ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•œ StatusWindow.xaml íŒŒì¼ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/StatusWindow.xaml (í‘œ/ì°¨íŠ¸ ìŒ ë ˆì´ì•„ì›ƒ)
4ì›” 11, 12:18 PM

ì—´ê¸°

csëŠ”ìˆ˜ì •ì•ˆí•´ë˜ë˜ë‚˜ìš” ì—ëŸ¬ë‚˜ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ë§ìŠµë‹ˆë‹¤. ì´ì „ ë‹µë³€ì—ì„œ StatusWindow.xamlì˜ ë ˆì´ì•„ì›ƒì„ ë³€ê²½í•˜ë©´ì„œ ì°¨íŠ¸ë¥¼ ì¶”ê°€í–ˆëŠ”ë°, ì´ ë³€ê²½ì‚¬í•­ ìì²´ë§Œìœ¼ë¡œëŠ” StatusWindow.xaml.cs íŒŒì¼ì„ ìˆ˜ì •í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. .cs íŒŒì¼ì€ ë‹¨ìˆœíˆ ì°½ì„ ë‹«ê±°ë‚˜ ì°½ì´ ë‹«í ë•Œ ViewModelì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ëŠ” ì—­í• ë§Œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ë§Œì•½ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´, ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.

XAML ì˜¤ë¥˜: ì´ì „ì— ë“œë¦° StatusWindow.xaml ì½”ë“œ ìì²´ì— ì˜¤íƒ€ë‚˜ ì˜ëª»ëœ ë°”ì¸ë”© ê²½ë¡œ ë“±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
DevExpress ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¸ì¡° ëˆ„ë½: í”„ë¡œì íŠ¸ì— DevExpress.Xpf.Charts.vXX.Y.dll ì–´ì…ˆë¸”ë¦¬ ì°¸ì¡°ê°€ ì—†ìœ¼ë©´ XAMLì—ì„œ ì°¨íŠ¸ ì»¨íŠ¸ë¡¤(dxc:ChartControl)ì„ ì¸ì‹í•˜ì§€ ëª»í•´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. (NuGet íŒ¨í‚¤ì§€ DevExpress.Wpf.Charts ì„¤ì¹˜ í•„ìš”)
ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ ì–¸ ëˆ„ë½: StatusWindow.xaml íŒŒì¼ ìƒë‹¨ì— xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts" ì„ ì–¸ì´ ëˆ„ë½ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•´ê²° ë°©í–¥:

í”„ë¡œì íŠ¸ ì°¸ì¡°ì— DevExpress.Xpf.Charts ê´€ë ¨ ì–´ì…ˆë¸”ë¦¬ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
StatusWindow.xaml íŒŒì¼ ìƒë‹¨ì— xmlns:dxc ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ ì–¸ì´ ì˜¬ë°”ë¥´ê²Œ ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
StatusWindow.xaml ì½”ë“œ ìì²´ë¥¼ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•˜ì—¬ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì„ ì ê²€í•©ë‹ˆë‹¤.
ì•„ë˜ì— Views/StatusWindow.xaml ê³¼ Views/StatusWindow.xaml.cs íŒŒì¼ì˜ ìµœì¢… í™•ì¸ëœ ì›ë³¸ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ë¥¼ ë‹¤ì‹œ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. .cs íŒŒì¼ì€ ì´ì „ê³¼ ë™ì¼í•˜ì§€ë§Œ í™•ì¸ì„ ìœ„í•´ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤.

1. Views/StatusWindow.xaml (ìµœì¢… í™•ì¸)
Views/StatusWindow.xaml (ìµœì¢… í™•ì¸)
4ì›” 11, 12:25 PM

ì—´ê¸°

ì˜¤ë¥˜ ì°½ì´ ë– ìš” í˜„í™©ë³´ê¸°ë¥¼ ëˆ„ë¥´ë©´ infinete grid height is not allowed since all grid rows wil be rendered and heance.......Â Â  ìˆ˜ì •ëœ íŒŒì¼ì˜ ì›ë³¸ì½”ë“œì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ë˜ "Infinite grid height is not allowed" ì˜¤ë¥˜ê°€ ë°œìƒí–ˆêµ°ìš”. ì£„ì†¡í•©ë‹ˆë‹¤. StatusWindow.xamlì˜ ë ˆì´ì•„ì›ƒ êµ¬ì¡°ë¥¼ ë‹¤ì‹œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.

ì˜¤ë¥˜ ì›ì¸:

ì´ì „ ë‹µë³€ì—ì„œ StatusWindow.xamlì˜ ì™¼ìª½ ì—´(Grid.Column="0")ì— 3ê°œì˜ í˜„í™© í‘œ(GroupBoxì™€ GridControl)ë¥¼ ë°°ì¹˜í•˜ê¸° ìœ„í•´ StackPanel ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. StackPanelì€ ìì‹ ìš”ì†Œë“¤ì—ê²Œ ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ë¬´í•œí•œ ê³µê°„ì„ ì œê³µí•˜ëŠ” ê²½í–¥ì´ ìˆì–´, ê·¸ ì•ˆì— í¬í•¨ëœ GridControlì´ ìì‹ ì˜ ëª¨ë“  í–‰ì„ í•œ ë²ˆì— ê·¸ë¦¬ë ¤ê³  ì‹œë„í•˜ë©´ì„œ "Infinite height" ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. (MaxHeightë¥¼ ì„¤ì •í–ˆë”ë¼ë„ StackPanelê³¼ì˜ ì¡°í•©ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)

í•´ê²° ë°©ë²•:

ì™¼ìª½ ì—´ì˜ StackPanel ëŒ€ì‹ , 3ê°œì˜ í–‰(RowDefinition)ì„ ê°€ì§„ Grid ë¥¼ ì‚¬ìš©í•˜ì—¬ ê° í˜„í™© í‘œ(GroupBox)ê°€ ëª…í™•íˆ êµ¬ë¶„ëœ ì„¸ë¡œ ê³µê°„ì„ ì°¨ì§€í•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

Views/StatusWindow.xaml
ì•„ë˜ëŠ” ì´ ìˆ˜ì • ì‚¬í•­ì„ ë°˜ì˜í•œ StatusWindow.xaml íŒŒì¼ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ì…ë‹ˆë‹¤.
Views/StatusWindow.xaml (Infinite Height ì˜¤ë¥˜ ìµœì¢… ìˆ˜ì •)
4ì›” 11, 12:31 PM

ì—´ê¸°


ë¯¸ì•ˆí•©ë‹ˆë‹¤. ì¢Œì¸¡í‘œë‘ ì°¨íŠ¸ë¥¼ ë°”ê¿‰ì‹œë‹¤. 1. ì¢…ë¥˜ë³„ í˜„í™©í‘œì™€ ì°¨íŠ¸ëŠ” ìœ ì§€. 2. ê° ì¢…ë¥˜ì˜ ì¸µ-êµ¬ì—­ë³„ í˜„í™©ì„ í‘œì™€ ì˜ ì¸µ-êµ¬ì—­ë³„ í˜„í™©ê³¼ ê·¸ì—ë§ëŠ” í‘œ ì´ë ‡ê²Œ ì´2ê°œì˜ í‘œ 2ê°œì˜ ì°¨íŠ¸ë¡œ êµ¬ì…©ëœê±¸ë¡œ ë‹¤ì‹œ ë©´ë°€íˆ ê²€í† í›„ì£¼ì„¸ìš”




ìƒê°í•˜ëŠ” ê³¼ì • í‘œì‹œ
ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. í˜„í™© ë³´ê¸° ì°½ì˜ êµ¬ì„±ì„ ë³€ê²½í•˜ì—¬, ì¢…ë¥˜ë³„ í˜„í™©(í‘œ+ì°¨íŠ¸) ê³¼ ì¸µ-êµ¬ì—­ë³„ í˜„í™©(í‘œ+ì°¨íŠ¸), ì´ë ‡ê²Œ ì´ 2ê°œì˜ í‘œì™€ 2ê°œì˜ ì°¨íŠ¸ë¡œ í‘œì‹œë˜ë„ë¡ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.

ìˆ˜ì •í•´ì•¼ í•  íŒŒì¼ ëª©ë¡:

ViewModels/StatusViewModel.cs (ì¸µ-êµ¬ì—­ë³„ ì§‘ê³„ ë¡œì§ ë° ì†ì„± ì¶”ê°€)
Views/StatusWindow.xaml (ë ˆì´ì•„ì›ƒ 2x2 ë³€ê²½ ë° ë°”ì¸ë”© ìˆ˜ì •)
ì•„ë˜ì— ì´ ë‘ íŒŒì¼ì˜ ìˆ˜ì •ëœ ì „ì²´ ì½”ë“œ(ì£¼ì„ ì œì™¸, íŒŒì¼ ID í¬í•¨)ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

1. ViewModels/StatusViewModel.cs (ìˆ˜ì •)

C#

// FILE_ID: ViewModels/StatusViewModel_20250410182000
using LockerManagementApp.Data;
using LockerManagementApp.Models;
using LockerManagementApp.Infrastructure;
using System;
using System.Collections.ObjectModel;
using System.Data.Entity;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Input;
using System.Collections.Generic;

namespace LockerManagementApp.ViewModels
{
    public class StatusViewModel : ViewModelBase, IDisposable
    {
        private readonly LockerDbContext _context;
        private readonly CancellationTokenSource _cts = new CancellationTokenSource();
        private bool _disposed = false;

        private ObservableCollection<StatusItem> _statusByType;
        private ObservableCollection<StatusItem> _statusByFloorZone; // ìˆ˜ì •: ì¸µ-êµ¬ì—­ë³„
        private string _statusMessage;

        public ObservableCollection<StatusItem> StatusByType { get => _statusByType; set => SetProperty(ref _statusByType, value); }
        public ObservableCollection<StatusItem> StatusByFloorZone { get => _statusByFloorZone; set => SetProperty(ref _statusByFloorZone, value); } // ìˆ˜ì •
        public string StatusMessage { get => _statusMessage; set => SetProperty(ref _statusMessage, value); }

        public ICommand LoadStatusCommand { get; }

        public StatusViewModel()
        {
            StatusByType = new ObservableCollection<StatusItem>();
            StatusByFloorZone = new ObservableCollection<StatusItem>(); // ìˆ˜ì •

            try { _context = new LockerDbContext(); }
            catch (Exception ex) { if (!App.IsShuttingDown) MessageBox.Show($"[Status] DB ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì˜¤ë¥˜:\n{ex.ToString()}", "ì´ˆê¸°í™” ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error); else Debug.WriteLine($"ì¢…ë£Œ ì¤‘ [Status] DB ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì˜¤ë¥˜ ë¬´ì‹œë¨: {ex.Message}"); StatusMessage = "DB ì—°ê²° ì˜¤ë¥˜!"; LoadStatusCommand = new RelayCommand(async _ => await LoadStatusDataAsync(), _ => !_disposed); return; }

            LoadStatusCommand = new RelayCommand(async _ => await LoadStatusDataAsync(), CanExecuteLoad);
            if (_context != null) { _ = LoadStatusDataAsync(); }
        }

        private bool CanExecuteLoad(object parameter = null) => !_disposed && _context != null && !_cts.IsCancellationRequested;

        public async Task LoadStatusDataAsync()
        {
            if (!CanExecuteLoad()) return;
            StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì¤‘...";
            (LoadStatusCommand as RelayCommand)?.RaiseCanExecuteChanged();
            Debug.WriteLine($"[{DateTime.Now:HH:mm:ss.fff}] LoadStatusDataAsync ì‹œì‘...");

            List<LockerAssignment> allAssignments = null;
            try
            {
                if (!CanExecuteLoad()) return;
                allAssignments = await _context.LockerAssignments.AsNoTracking().ToListAsync(_cts.Token);
                if (_disposed || _cts.IsCancellationRequested) return;

                var statusByType = CalculateStatus(allAssignments, a => a.LockerType);
                // *** ìˆ˜ì •: ì¸µ-êµ¬ì—­ë³„ ì§‘ê³„ ì¶”ê°€ ***
                var statusByFloorZone = CalculateStatus(allAssignments, a => $"{a.Floor ?? "ë¯¸ì§€ì •"}-{a.Zone ?? "ë¯¸ì§€ì •"}");

                if (_disposed || _cts.IsCancellationRequested) return;

                Application.Current.Dispatcher.Invoke(() =>
                {
                    if (_disposed || _cts.IsCancellationRequested || Application.Current == null) return;
                    StatusByType = new ObservableCollection<StatusItem>(statusByType);
                    StatusByFloorZone = new ObservableCollection<StatusItem>(statusByFloorZone); // ìˆ˜ì •
                    StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë“œ ì™„ë£Œ.";
                });
            }
            catch (OperationCanceledException) { Debug.WriteLine("LoadStatusDataAsync ì‘ì—… ì·¨ì†Œë¨."); if (!_disposed) StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì·¨ì†Œë¨."; }
            catch (ObjectDisposedException) { Debug.WriteLine("LoadStatusDataAsync ì‹¤í–‰ ì¤‘ DbContext Disposeë¨."); if (!_disposed) StatusMessage = "í˜„í™© ë°ì´í„° ë¡œë”© ì˜¤ë¥˜ (ì»¨í…ìŠ¤íŠ¸ í•´ì œë¨)."; }
            catch (Exception ex) { StatusMessage = $"í˜„í™© ë°ì´í„° ë¡œë”© ì˜¤ë¥˜: {ex.Message}"; Debug.WriteLine($"!!! í˜„í™© ë°ì´í„° ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ:\n{ex.ToString()}"); if (!App.IsShuttingDown && !_disposed) MessageBox.Show(StatusMessage, "ì˜¤ë¥˜", MessageBoxButton.OK, MessageBoxImage.Error); }
            finally { if (!_disposed) (LoadStatusCommand as RelayCommand)?.RaiseCanExecuteChanged(); Debug.WriteLine($"[{DateTime.Now:HH:mm:ss.fff}] LoadStatusDataAsync ì¢…ë£Œ."); }
        }

        private List<StatusItem> CalculateStatus(List<LockerAssignment> assignments, Func<LockerAssignment, string> groupingKeySelector)
        {
            if (assignments == null) return new List<StatusItem>();
            return assignments.GroupBy(groupingKeySelector).Select(g => { int total = g.Count(); int used = g.Count(a => !string.IsNullOrWhiteSpace(a.UserName)); int available = total - used; double rate = (total == 0) ? 0 : ((double)used / total * 100.0); return new StatusItem { GroupValue = g.Key ?? "ë¯¸ì§€ì •", TotalCount = total, UsedCount = used, AvailableCount = available, UsageRate = rate }; }).OrderBy(s => s.GroupValue).ToList();
        }

        #region IDisposable êµ¬í˜„
        protected virtual void Dispose(bool disposing) { if (!_disposed) { _disposed = true; if (disposing) { Debug.WriteLine("StatusViewModel Dispose ì‹œì‘..."); try { _cts?.Cancel(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusVM CTS Cancel ì˜¤ë¥˜: {ex.Message}"); } try { _cts?.Dispose(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusVM CTS Dispose ì˜¤ë¥˜: {ex.Message}"); } try { _context?.Dispose(); } catch (Exception ex) { Debug.WriteLine($"!!! StatusViewModel DbContext Dispose ì˜¤ë¥˜: {ex.Message}"); } Debug.WriteLine("StatusViewModel ë¦¬ì†ŒìŠ¤ í•´ì œ ì™„ë£Œ."); } } }
        public void Dispose() { Dispose(true); GC.SuppressFinalize(this); }
        #endregion
    }
}
2. Views/StatusWindow.xaml (ìˆ˜ì •)

ë ˆì´ì•„ì›ƒì„ 2í–‰ 2ì—´ë¡œ ë³€ê²½í•˜ê³ , ë‘ ë²ˆì§¸ í–‰ì— ì¸µ-êµ¬ì—­ë³„ í‘œì™€ ì°¨íŠ¸ë¥¼ ë°°ì¹˜í•©ë‹ˆë‹¤.

XML

<dx:ThemedWindow
    x:Class="LockerManagementApp.Views.StatusWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
    xmlns:local="clr-namespace:LockerManagementApp.Views"
    xmlns:viewmodels="clr-namespace:LockerManagementApp.ViewModels"
    mc:Ignorable="d"
    Title="ì‚¬ë¬¼í•¨ ì‚¬ìš© í˜„í™©" Height="750" Width="1200"
    WindowStartupLocation="CenterOwner" ShowInTaskbar="False"
    Closing="StatusWindow_Closing">

    <dx:ThemedWindow.Resources>
        <Style TargetType="dxg:GridColumnHeader">
            <Setter Property="Background" Value="LightSteelBlue"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style TargetType="dxg:LightweightCellEditor">
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
        <Style x:Key="LeftAlignCellStyle" TargetType="dxg:LightweightCellEditor">
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>
    </dx:ThemedWindow.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Button Grid.Row="0" Content="ğŸ”„ ìƒˆë¡œê³ ì¹¨" Command="{Binding LoadStatusCommand}" HorizontalAlignment="Left" Margin="0,0,0,10" Padding="10,3"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <GroupBox Grid.Row="0" Grid.Column="0" Header="ì¢…ë¥˜ë³„ í˜„í™©" Margin="0,0,5,5">
                    <dxg:GridControl ItemsSource="{Binding StatusByType}" AutoGenerateColumns="None">
                        <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                        <dxg:GridControl.Columns>
                            <dxg:GridColumn FieldName="GroupValue" Header="ì¢…ë¥˜" CellStyle="{StaticResource LeftAlignCellStyle}"/>
                            <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                            <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                            <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                            <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                        </dxg:GridControl.Columns>
                    </dxg:GridControl>
                </GroupBox>
                <GroupBox Header="ì¢…ë¥˜ë³„ í˜„í™© ì°¨íŠ¸" Grid.Row="0" Grid.Column="1" Margin="5,0,0,5">
                     <dxc:ChartControl DataSource="{Binding StatusByType}">
                         <dxc:ChartControl.Diagram>
                             <dxc:XYDiagram2D>
                                 <dxc:XYDiagram2D.Series>
                                     <dxc:BarSideBySideSeries2D DisplayName="ì‚¬ìš©" ArgumentDataMember="GroupValue" ValueDataMember="UsedCount" BarWidth="0.4"/>
                                     <dxc:BarSideBySideSeries2D DisplayName="ì—¬ìœ " ArgumentDataMember="GroupValue" ValueDataMember="AvailableCount" BarWidth="0.4"/>
                                 </dxc:XYDiagram2D.Series>
                                 <dxc:XYDiagram2D.AxisX> <dxc:AxisX2D/> </dxc:XYDiagram2D.AxisX>
                                 <dxc:XYDiagram2D.AxisY> <dxc:AxisY2D><dxc:AxisY2D.Title><dxc:AxisTitle Content="ê°œìˆ˜"/></dxc:AxisY2D.Title></dxc:AxisY2D> </dxc:XYDiagram2D.AxisY>
                             </dxc:XYDiagram2D>
                         </dxc:ChartControl.Diagram>
                         <dxc:ChartControl.Legend> <dxc:Legend HorizontalPosition="Center" VerticalPosition="BottomOutside" Orientation="Horizontal"/> </dxc:ChartControl.Legend>
                     </dxc:ChartControl>
                </GroupBox>

                <GroupBox Grid.Row="1" Grid.Column="0" Header="ì¸µ-êµ¬ì—­ë³„ í˜„í™©" Margin="0,5,5,0">
                     <dxg:GridControl ItemsSource="{Binding StatusByFloorZone}" AutoGenerateColumns="None">
                         <dxg:GridControl.View> <dxg:TableView AllowEditing="False" ShowGroupPanel="False"/> </dxg:GridControl.View>
                         <dxg:GridControl.Columns>
                             <dxg:GridColumn FieldName="GroupValue" Header="ì¸µ-êµ¬ì—­" CellStyle="{StaticResource LeftAlignCellStyle}"/>
                             <dxg:GridColumn FieldName="TotalCount" Header="ì´ ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="UsedCount" Header="ì‚¬ìš© ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="AvailableCount" Header="ì—¬ìœ  ê°œìˆ˜"/>
                             <dxg:GridColumn FieldName="UsageRate" Header="ì‚¬ìš©ë¥ (%)"> <dxg:GridColumn.EditSettings> <dxe:TextEditSettings DisplayFormat="N1"/> </dxg:GridColumn.EditSettings> </dxg:GridColumn>
                         </dxg:GridControl.Columns>
                     </dxg:GridControl>
                </GroupBox>
                 <GroupBox Header="ì¸µ-êµ¬ì—­ë³„ í˜„í™© ì°¨íŠ¸" Grid.Row="1" Grid.Column="1" Margin="5,5,0,0">
                     <dxc:ChartControl DataSource="{Binding StatusByFloorZone}">
                         <dxc:ChartControl.Diagram>
                             <dxc:XYDiagram2D Rotated="True"> <dxc:XYDiagram2D.Series>
                                     <dxc:BarSideBySideSeries2D DisplayName="ì‚¬ìš©" ArgumentDataMember="GroupValue" ValueDataMember="UsedCount" BarWidth="0.4"/>
                                     <dxc:BarSideBySideSeries2D DisplayName="ì—¬ìœ " ArgumentDataMember="GroupValue" ValueDataMember="AvailableCount" BarWidth="0.4"/>
                                 </dxc:XYDiagram2D.Series>
                                 <dxc:XYDiagram2D.AxisX> <dxc:AxisX2D GridLinesVisible="True"/> </dxc:XYDiagram2D.AxisX>
                                 <dxc:XYDiagram2D.AxisY> <dxc:AxisY2D><dxc:AxisY2D.Title><dxc:AxisTitle Content="ê°œìˆ˜"/></dxc:AxisY2D.Title></dxc:AxisY2D> </dxc:XYDiagram2D.AxisY>
                             </dxc:XYDiagram2D>
                         </dxc:ChartControl.Diagram>
                         <dxc:ChartControl.Legend> <dxc:Legend HorizontalPosition="Center" VerticalPosition="BottomOutside" Orientation="Horizontal"/> </dxc:ChartControl.Legend>
                     </dxc:ChartControl>
                 </GroupBox>

            </Grid>
        </ScrollViewer>

         <StatusBar Grid.Row="2" Background="LightGray" Margin="0,10,0,0">
            <StatusBarItem><TextBlock Text="{Binding StatusMessage}" Margin="5,0"/></StatusBarItem>
        </StatusBar>

        <Button Grid.Row="3" Content="ë‹«ê¸°" Width="80" HorizontalAlignment="Right" Margin="0,10,0,0" Click="CloseButton_Click" IsCancel="True"/>

    </Grid>
</dx:ThemedWindow>
í•µì‹¬ ë³€ê²½ ì‚¬í•­:

ViewModels/StatusViewModel.cs:
StatusByFloor, StatusByZone ì†ì„±ì„ ì œê±°í•˜ê³  StatusByFloorZone ì†ì„±ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
LoadStatusDataAsync ë©”ì„œë“œì—ì„œ Floorì™€ Zoneì„ ì¡°í•©í•˜ì—¬ ê·¸ë£¹í™”í•˜ê³ (a => $"{a.Floor ?? "ë¯¸ì§€ì •"}-{a.Zone ?? "ë¯¸ì§€ì •"}"), ê·¸ ê²°ê³¼ë¥¼ StatusByFloorZone ì»¬ë ‰ì…˜ì— í• ë‹¹í•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
Views/StatusWindow.xaml:
ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ì˜ Gridë¥¼ 2í–‰ 2ì—´ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
0í–‰ì—ëŠ” ì¢…ë¥˜ë³„ í‘œì™€ ì°¨íŠ¸ë¥¼ ë°°ì¹˜í–ˆìŠµë‹ˆë‹¤.
1í–‰ì—ëŠ” ì¸µ-êµ¬ì—­ë³„ í‘œì™€ ì°¨íŠ¸ë¥¼ ë°°ì¹˜í•˜ê³ , ê°ê° StatusByFloorZone ì†ì„±ì— ë°”ì¸ë”©í–ˆìŠµë‹ˆë‹¤.
ì¸µ-êµ¬ì—­ë³„ ì°¨íŠ¸ëŠ” í•­ëª© ìˆ˜ê°€ ë§ì„ ìˆ˜ ìˆì–´ ê°€ë…ì„±ì„ ìœ„í•´ ê°€ë¡œ ë§‰ëŒ€ ì°¨íŠ¸(Rotated="True")ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
ì´ì œ í˜„í™© ë³´ê¸° ì°½ì—ëŠ” ì¢…ë¥˜ë³„ í˜„í™©ê³¼ ì¸µ-êµ¬ì—­ë³„ í˜„í™©ì´ ê°ê° í‘œì™€ ì°¨íŠ¸ë¡œ í‘œì‹œë©ë‹ˆë‹¤.


ì†ŒìŠ¤ ë° ê´€ë ¨ ì½˜í…ì¸ 
github.com
github.com
github.com
github.com
github.com
github.com
topic.alibabacloud.com
topic.alibabacloud.com
github.com
github.com






Canvas

GeminiëŠ” ì¸ë¬¼ ë“±ì— ê´€í•œ ì •ë³´ ì œê³µ ì‹œ ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìœ¼ë‹ˆ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•˜ì„¸ìš”. ê°œì¸ ì •ë³´ ë³´í˜¸ ë° Gemini