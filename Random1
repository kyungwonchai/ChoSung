using System.Net.NetworkInformation;
using System.Threading;

// IP 주소에 대한 ping 체크 함수
private bool PingIP(string ipAddress)
{
    bool result = false;
    AutoResetEvent resetEvent = new AutoResetEvent(false);

    using (Ping ping = new Ping())
    {
        ping.PingCompleted += (sender, e) =>
        {
            if (e.Reply != null && e.Reply.Status == IPStatus.Success)
            {
                result = true;
            }

            resetEvent.Set();
        };

        ping.SendAsync(ipAddress, null);
        resetEvent.WaitOne(50); // 0.05초 대기

        ping.PingCompleted -= (sender, e) =>
        {
            resetEvent.Set();
        };
    }

    return result;
}
