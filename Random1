 중인 상태를 관리하는 작업은 약간 복잡할 수 있습니다. 제가 여기에서 간단하게 코드로 나타내면 아래와 같습니다.
C# 코드

csharp

using System.Data;
using System.Data.SqlClient;
using DevExpress.Utils;

public partial class MainWindow : Window
{
    public static string Username = "Username1";  // 사용자 이름
    public MainWindow()
    {
        InitializeComponent();
    }

    private void myGrid_ShownEditor(object sender, DevExpress.Xpf.Grid.EditorEventArgs e)
    {
        string key1 = e.Row.ToString(); // 해당 Row의 Key1값을 가져옵니다.
        bool isEditable = CheckAndUpdateEditStatus(key1, 1, Username);

        if (!isEditable)
        {
            myGrid.CloseEditor();
        }
    }

    private void myGrid_HiddenEditor(object sender, DevExpress.Xpf.Grid.EditorEventArgs e)
    {
        string key1 = e.Row.ToString();  // 해당 Row의 Key1값을 가져옵니다.
        CheckAndUpdateEditStatus(key1, 0, null);
    }

    private bool CheckAndUpdateEditStatus(string key1, int editStatus, string username)
    {
        string connectionString = "Data Source=YourServer;Initial Catalog=YourDatabase;User ID=YourUser;Password=YourPassword";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            using (SqlCommand command = new SqlCommand("UpdateTableEditStatus", connection))
            {
                command.CommandType = CommandType.StoredProcedure;
                command.Parameters.AddWithValue("@Key1", key1);
                command.Parameters.AddWithValue("@EditStatus", editStatus);
                command.Parameters.AddWithValue("@Username", username);

                int rowsAffected = command.ExecuteNonQuery();

                return rowsAffected > 0;
            }
        }
    }
}

SQL Stored Procedure (UpdateTableEditStatus)

sql

CREATE PROCEDURE UpdateTableEditStatus
    @Key1 INT,
    @EditStatus INT,
    @Username NVARCHAR(50)
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @CurrentEditStatus INT;
    SELECT @CurrentEditStatus = EditStatus FROM Table_수기입 WHERE Key1 = @Key1;

    IF @CurrentEditStatus = 0 OR (@CurrentEditStatus = 1 AND @EditStatus = 0)
    BEGIN
        UPDATE Table_수기입
        SET EditStatus = @EditStatus,
            Username = @Username,
            EditTime = GETDATE()
        WHERE Key1 = @Key1;
    END
END

이 코드는 간단한 예시이기 때문에 실제 어플리케이션에서 사용하기 전에 추가적인 검증과 예외 처리가 필요할 수 있습니다. 예를 들어, 동시성 문제나 네트워크 문제 등을 고려해야 할 수 있습니다.

myGrid_ShownEditor와 myGrid_HiddenEditor 메서드는 각각 편집이 시작되거나 끝났을 때 호출됩니다. 이 시점에 CheckAndUpdateEditStatus 함수를 통해 데이터베이스를 업데이트하고, 해당 row의 편집 가능 여부를 결정합니다.

SQL에서는 UpdateTableEditStatus라는 저장 프로시저를 사용하여 상태를 업데이트합니다. 이 저장 프로시저는 EditStatus, Username, 그리고 현재 시간 (GETDATE())을 업데이트합니다.

편집이 끝나면 저장 버튼을 눌러야만 최종적으로 상태가 사라지는 것을 구현하고 싶다면, 저장 버튼의 클릭 이벤트 핸들러에서 이 로직을 추가하면 됩니다