L 5.7에서 주어진 조건에 맞는 레코드의 gatherok 값을 1로 업데이트하는 작업을 추가하고, 이 작업을 10분에 한 번씩 실행하려면 다음과 같은 방법을 사용할 수 있습니다.

업데이트 쿼리:

sql
코드 복사
UPDATE smd.tbl_history
SET gatherok = 1
WHERE CAST(SUBSTRING_INDEX(flow)mch, ':', 1) AS UNSIGNED) >= 5;
이 작업을 10분마다 실행하기 위해 MySQL 이벤트 스케줄러를 사용할 수 있습니다. 이벤트 스케줄러를 활성화하고 이벤트를 생성하는 방법은 다음과 같습니다:

먼저 MySQL 이벤트 스케줄러를 활성화합니다:

sql
코드 복사
SET GLOBAL event_scheduler = ON;
그런 다음, 이벤트를 생성합니다:

sql
코드 복사
CREATE EVENT update_gatherok_event
ON SCHEDULE EVERY 10 MINUTE
DO
  UPDATE smd.tbl_history
  SET gatherok = 1
  WHERE CAST(SUBSTRING_INDEX(flow)mch, ':', 1) AS UNSIGNED) >= 5;
위의 코드에서 update_gatherok_event라는 이름의 이벤트를 생성하여 10분마다 smd.tbl_history 테이블의 flow)mch 값이 000:00:00 형태이고, 가장 앞의 000 부분이 5 이상인 레코드의 gatherok 값을 1로 업데이트합니다.

이렇게 하면 10분마다 자동으로 해당 조건에 맞는 레코드가 업데이트됩니다. 이벤트 스케줄러가 제대로 작동하도록 MySQL 서버의 권한과 설정을 확인하는 것이 중요합니다.






