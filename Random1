, 우분투(Ubuntu) 백엔드 서버에서 데이터베이스 비밀번호나 API 키 같은 민감 정보를 .env 파일로 안전하게 관리하는 표준적인 방법을 샘플과 함께 알려드리겠습니다.

핵심은 .env 파일에 민감 정보를 작성하고, 이 파일이 절대 Git과 같은 버전 관리 시스템에 올라가지 않도록 .gitignore에 등록하는 것입니다.

## 📝 기본 사용법 및 샘플 (Node.js 기준)
가장 널리 사용되는 Node.js 환경을 기준으로 설명합니다.

1. dotenv 라이브러리 설치
프로젝트의 터미널에서 아래 명령어로 dotenv 패키지를 설치합니다.

Bash

npm install dotenv
# 또는
yarn add dotenv
2. 프로젝트 최상위 경로에 .env 파일 생성
프로젝트의 루트 디렉토리(보통 package.json 파일이 있는 위치)에 .env 파일을 만들고 아래와 같이 변수를 KEY=VALUE 형식으로 저장합니다.

.env

코드 스니펫

# .env 파일 샘플
# 주석은 #으로 작성합니다.

# 데이터베이스 정보
DB_HOST=localhost
DB_PORT=5432
DB_USER=myadmin
DB_PASS=a1b2c3d4!@#$very-secret-password

# API 키
API_KEY=kakao_apikey_abcdef123456789

# 서버 포트
PORT=8080
3. .gitignore 파일에 .env 추가 (매우 중요)
.env 파일이 실수로라도 Git 저장소에 커밋되는 것을 막기 위해 .gitignore 파일에 다음 한 줄을 반드시 추가해야 합니다.

.gitignore

# Log files
*.log

# Dependency directories
node_modules

# Environment variables
.env  # <-- 이 줄을 반드시 추가하세요!

# Production build
/build
4. 백엔드 코드에서 환경 변수 사용하기
애플리케이션의 시작점(예: index.js, server.js) 최상단에서 dotenv를 설정하면, process.env.KEY 형태로 .env 파일의 값들을 가져올 수 있습니다.

server.js (Express.js 예시)

JavaScript

// 코드 최상단에서 dotenv를 실행하여 환경변수를 로드합니다.
require('dotenv').config();

const express = require('express');
const app = express();

// .env 파일에서 불러온 환경 변수를 변수에 할당
const serverPort = process.env.PORT;
const dbUser = process.env.DB_USER;
const dbPass = process.env.DB_PASS;

console.log(`DB 유저: ${dbUser}`);
// console.log(`DB 비밀번호: ${dbPass}`); // 실제 운영 코드에서는 비밀번호를 로그로 출력하지 마세요!

// DB 연결이나 다른 로직에서 환경 변수 사용
// const db = new Database({ user: dbUser, password: dbPass, ... });

app.get('/', (req, res) => {
  res.send('서버가 정상적으로 동작하고 있습니다.');
});

app.listen(serverPort, () => {
  console.log(`서버가 ${serverPort}번 포트에서 실행되었습니다.`);
});
## 🔒 보안 핵심 원칙 (Production 서버)
개발 환경뿐만 아니라 실제 운영 서버(Ubuntu)에 배포할 때는 다음 사항을 추가로 고려해야 합니다.

파일 권한 제한: SSH로 서버에 접속한 뒤, .env 파일이 저장된 경로에서 아래 명령어를 실행하여 파일 소유자 외에는 아무도 읽거나 쓸 수 없도록 권한을 제한하세요.

Bash

chmod 600 .env
협업을 위한 .env.example 파일: 팀원들이 어떤 환경 변수가 필요한지 알 수 있도록, 실제 값은 비워둔 .env.example 파일을 만들어 Git에 포함시키는 것이 좋습니다.
.env.example (이 파일은 Git에 커밋합니다)

코드 스니펫

# 이 파일을 복사하여 .env 파일을 만들고 실제 값을 채워주세요.
DB_HOST=
DB_PORT=
DB_USER=
DB_PASS=
API_KEY=
PORT=
운영 환경에서는 직접 주입 권장: 더 높은 보안 수준을 원한다면, .env 파일 대신 서버 실행 시점에 환경 변수를 직접 주입하는 방식을 사용합니다.

PM2 (프로세스 매니저) 사용 시: ecosystem.config.js 파일에 환경 변수를 정의할 수 있습니다.

Docker 사용 시: docker run -e "DB_PASS=my-secret-pw" 옵션이나 docker-compose.yml의 environment 섹션을 통해 주입합니다.