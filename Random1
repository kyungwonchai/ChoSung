용하여 DELETE 작업을 수행할 때 발생하는 일반적인 문제입니다. 이를 해결하려면 서브쿼리 결과를 임시 테이블에 저장한 후 삭제 작업을 수행해야 합니다. 다음은 이 과정을 단계별로 수행하는 SQL 스크립트입니다.

1단계: 서브쿼리 결과를 임시 테이블에 저장
sql
코드 복사
CREATE TEMPORARY TABLE tmp_barcodes
SELECT barcode
FROM smd.ft_2d_archive
WHERE machine = 2;
2단계: 임시 테이블을 사용하여 삭제 작업 수행
sql
코드 복사
DELETE FROM smd.ft_2d_archive
WHERE machine = 1
  AND ftsite = '0,0'
  AND barcode IN (SELECT barcode FROM tmp_barcodes);
3단계: 임시 테이블 삭제
sql
코드 복사
DROP TEMPORARY TABLE tmp_barcodes;
전체 스크립트
전체 스크립트는 다음과 같습니다:

sql
코드 복사
-- 이벤트 스케줄러 활성화
SET GLOBAL event_scheduler = ON;

-- 이벤트 등록
CREATE EVENT delete_specific_rows
ON SCHEDULE EVERY 1 DAY -- 하루에 한 번 실행
DO
BEGIN
    -- 임시 테이블 생성 및 서브쿼리 결과 저장
    CREATE TEMPORARY TABLE tmp_barcodes
    SELECT barcode
    FROM smd.ft_2d_archive
    WHERE machine = 2;
    
    -- 임시 테이블을 사용하여 삭제 작업 수행
    DELETE FROM smd.ft_2d_archive
    WHERE machine = 1
      AND ftsite = '0,0'
      AND barcode IN (SELECT barcode FROM tmp_barcodes);
    
    -- 임시 테이블 삭제
    DROP TEMPORARY TABLE tmp_barcodes;
END;
이 스크립트를 사용하면 MySQL에서 주기적으로 조건에 맞는 행을 삭제하