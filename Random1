가장 앞에 - 문자가 있는 값을 조회하려면 문자열의 첫 번째 문자가 -인지 확인하는 조건을 추가해야 합니다. 이를 위해 LIKE 연산자를 사용할 수 있습니다.

업데이트 쿼리는 다음과 같습니다:

업데이트 쿼리:

sql
코드 복사
UPDATE smd.tbl_history
SET gatherok = 1
WHERE flow)mch LIKE '-%'
  AND CAST(NULLIF(SUBSTRING_INDEX(flow)mch, ':', 1), '') AS UNSIGNED) >= 5;
이 작업을 10분마다 실행하기 위해 MySQL 이벤트 스케줄러를 사용할 수 있습니다:

먼저 MySQL 이벤트 스케줄러를 활성화합니다:

sql
코드 복사
SET GLOBAL event_scheduler = ON;
그런 다음, 이벤트를 생성합니다:

sql
코드 복사
CREATE EVENT update_gatherok_event
ON SCHEDULE EVERY 10 MINUTE
DO
  UPDATE smd.tbl_history
  SET gatherok = 1
  WHERE flow)mch LIKE '-%'
    AND CAST(NULLIF(SUBSTRING_INDEX(flow)mch, ':', 1), '') AS UNSIGNED) >= 5;
이 쿼리는 flow)mch 열의 값이 - 문자로 시작하는 경우에만 조건을 검사하여 해당 레코드의 gatherok 값을 1로 업데이트합니다. LIKE '-%' 조건이 가장 앞에 - 문자가 있는 값을 필터링하는 데 사용됩니다.





아까 추가했던 작업 삭제하는법
ChatGPT
MySQL에서 생성한 이벤트를 삭제하려면 DROP EVENT 문을 사용하면 됩니다. 이전에 생성한 이벤트 update_gatherok_event를 삭제하려면 다음 쿼리를 실행하세요:

sql
코드 복사
DROP EVENT IF EXISTS update_gatherok_event;
이 쿼리는 update_gatherok_event 이벤트가 존재하는 경우 삭제합니다. MySQL 명령줄 또는 SQL 클라이언트를 사용하여 이 쿼리를 실행하