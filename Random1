PF에서 텍스트박스(txt1, txt2, txt3, txt4)의 값을 사용자가 입력하고 포커스를 잃을 때 자동으로 저장하고, 폼을 열 때 저장된 값을 로드하여 표시하는 코드입니다. 이 코드는 label분할..ini 파일에 저장 및 로드하며, 폴더가 존재하지 않으면 자동으로 생성됩니다.

파일 저장과 로드를 위한 설정 파일을 다루기 위해 System.IO 네임스페이스와 ConfigurationManager를 사용하여 .ini 파일 형식으로 값을 저장하겠습니다.

코드 예시
MainWindow.xaml
xml
코드 복사
<Window x:Class="LabelSaverApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Label Saver" Height="200" Width="400">
    <StackPanel Margin="20">
        <TextBox Name="txt1" Width="300" Margin="0,5" LostFocus="TextBox_LostFocus"/>
        <TextBox Name="txt2" Width="300" Margin="0,5" LostFocus="TextBox_LostFocus"/>
        <TextBox Name="txt3" Width="300" Margin="0,5" LostFocus="TextBox_LostFocus"/>
        <TextBox Name="txt4" Width="300" Margin="0,5" LostFocus="TextBox_LostFocus"/>
    </StackPanel>
</Window>
MainWindow.xaml.cs
csharp
코드 복사
using System;
using System.IO;
using System.Windows;

namespace LabelSaverApp
{
    public partial class MainWindow : Window
    {
        private readonly string folderPath = @"C:\agent\mySMD_v2\label";
        private readonly string filePath;

        public MainWindow()
        {
            InitializeComponent();

            // 파일 경로 설정 및 폴더 생성
            filePath = System.IO.Path.Combine(folderPath, "label분할..ini");
            Directory.CreateDirectory(folderPath);

            // 폼을 열 때 파일에서 값 로드
            LoadSettings();
        }

        // 텍스트박스의 포커스를 잃을 때 값을 저장하는 이벤트 핸들러
        private void TextBox_LostFocus(object sender, RoutedEventArgs e)
        {
            SaveSettings();
        }

        // 파일에 값을 저장하는 함수
        private void SaveSettings()
        {
            using (StreamWriter writer = new StreamWriter(filePath))
            {
                writer.WriteLine($"txt1={txt1.Text}");
                writer.WriteLine($"txt2={txt2.Text}");
                writer.WriteLine($"txt3={txt3.Text}");
                writer.WriteLine($"txt4={txt4.Text}");
            }
        }

        // 파일에서 값을 로드하여 텍스트박스에 설정하는 함수
        private void LoadSettings()
        {
            if (!File.Exists(filePath)) return;

            using (StreamReader reader = new StreamReader(filePath))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    string[] parts = line.Split('=');
                    if (parts.Length == 2)
                    {
                        switch (parts[0])
                        {
                            case "txt1":
                                txt1.Text = parts[1];
                                break;
                            case "txt2":
                                txt2.Text = parts[1];
                                break;
                            case "txt3":
                                txt3.Text = parts[1];
                                break;
                            case "txt4":
                                txt4.Text = parts[1];
                                break;
                        }
                    }
                }
            }
        }
    }
}
설명
폴더와 파일 경로 설정: folderPath와 filePath 변수에 저장 경로를 지정합니다. 폴더가 없으면 Directory.CreateDirectory(folderPath)로 폴더를 생성합니다.

값 저장: TextBox_LostFocus 이벤트 핸들러는 각 텍스트박스가 포커스를 잃을 때 호출되며, SaveSettings 함수에서 label분할..ini 파일에 값을 저장합니다.

값 로드: LoadSettings 함수는 폼이 열릴 때 호출되어, label분할..ini 파일이 존재하면 값을 읽어와 텍스트박스에 표시합니다.