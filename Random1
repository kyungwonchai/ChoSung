<dx:ThemedWindow
    x:Class="LockerManagementApp.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:local="clr-namespace:LockerManagementApp.Views"
    xmlns:viewmodels="clr-namespace:LockerManagementApp.ViewModels"
    xmlns:models="clr-namespace:LockerManagementApp.Models"
    Title="ì‚¬ë¬¼í•¨ ê´€ë¦¬ í”„ë¡œê·¸ëž¨ (DevExpress MVVM)" Height="600" Width="1000"
    Loaded="ThemedWindow_Loaded"
    Closing="ThemedWindow_Closing">

    <dx:ThemedWindow.DataContext>
        <viewmodels:MainViewModel/>
    </dx:ThemedWindow.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <RowDefinition Height="*"/>    <RowDefinition Height="Auto"/> </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="{dx:ThemeResource ThemeBrush}" Padding="5">
             <StackPanel Orientation="Horizontal">
                <Button Content="ðŸ”„ Load/Refresh" Margin="3" Command="{Binding LoadDataCommand}" ToolTip="ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìµœì‹  ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤."/>
                <Button Content="ðŸ’¾ Save Changes" Margin="3" Command="{Binding SaveChangesCommand}" ToolTip="ë³€ê²½ ì‚¬í•­ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥í•©ë‹ˆë‹¤."/>
                <Button Content="âž• Add New Locker" Margin="3" Command="{Binding AddNewCommand}" ToolTip="ìƒˆë¡œìš´ ì‚¬ë¬¼í•¨ ì •ë³´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤ (í–‰ ì¶”ê°€ í›„ íŽ¸ì§‘)."/>
                <Button Content="âŒ Delete Selected" Margin="3" Command="{Binding DeleteCommand}" ToolTip="ì„ íƒëœ ì‚¬ë¬¼í•¨ ì •ë³´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤."/>
                 <Button Content="ðŸ§¹ Clear Assignment" Margin="3,3,15,3" Command="{Binding ClearAssignmentCommand}" ToolTip="ì„ íƒëœ ì‚¬ë¬¼í•¨ì˜ ì‚¬ìš©ìž ë°°ì • ì •ë³´ë¥¼ ì œê±°í•©ë‹ˆë‹¤."/>
            </StackPanel>
        </Border>

        <dxg:GridControl Grid.Row="1"
                         ItemsSource="{Binding LockerAssignments}"
                         SelectedItem="{Binding SelectedAssignment, Mode=TwoWay}"
                         AutoGenerateColumns="None"
                         EnableSmartColumnsGeneration="True">

            <dxg:GridControl.View>
                <dxg:TableView AllowPerPixelScrolling="True"
                               ShowTotalSummary="False"
                               ShowGroupPanel="True"  AllowEditing="True"    AllowAddingNewItems="False" AllowDeletingItems="False" NavigationStyle="Cell" ShowAutoFilterRow="True" NewItemRowPosition="None">
                     <dxg:TableView.RowCellMenuCustomizations>
                         <dx:BarButtonItem Content="Clear Assignment"
                                           Command="{Binding View.DataContext.ClearAssignmentCommand}"
                                           Glyph="{dx:DXImage 'Svg/Actions/DeleteList.svg'}"/>
                         <dx:BarButtonItem Content="Delete Row"
                                           Command="{Binding View.DataContext.DeleteCommand}"
                                            Glyph="{dx:DXImage Svg/Actions/Delete.svg}"/>
                     </dxg:TableView.RowCellMenuCustomizations>
                </dxg:TableView>
            </dxg:GridControl.View>

            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="LockerType" Header="ì¢…ë¥˜">
                    <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.LockerTypes, RelativeSource={RelativeSource AncestorType={x:Type dx:ThemedWindow}}}"
                                                  IsTextEditable="False"/> </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>

                 <dxg:GridColumn FieldName="Floor" Header="ì¸µ">
                     <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.Floors, RelativeSource={RelativeSource AncestorType={x:Type dx:ThemedWindow}}}"
                                                  IsTextEditable="False"/>
                    </dxg:GridColumn.EditSettings>
                 </dxg:GridColumn>

                <dxg:GridColumn FieldName="Zone" Header="êµ¬ì—­">
                     <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.Zones, RelativeSource={RelativeSource AncestorType={x:Type dx:ThemedWindow}}}"
                                                  IsTextEditable="True"/> </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>

                <dxg:GridColumn FieldName="SpecificLocation" Header="ì„¸ë¶€ ìœ„ì¹˜"/>

                 <dxg:GridColumn FieldName="UserName" Header="ì„±ëª…"/>
                <dxg:GridColumn FieldName="KnoxId" Header="Knox ID"/>

                <dxg:GridColumn FieldName="SubPart" Header="ì†ŒíŒŒíŠ¸">
                     <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.SubParts, RelativeSource={RelativeSource AncestorType={x:Type dx:ThemedWindow}}}"
                                                  IsTextEditable="True"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>

                 <dxg:GridColumn FieldName="Administrator" Header="ê´€ë¦¬ìž">
                      <dxg:GridColumn.EditSettings>
                        <dxe:ComboBoxEditSettings ItemsSource="{Binding DataContext.Administrators, RelativeSource={RelativeSource AncestorType={x:Type dx:ThemedWindow}}}"
                                                  IsTextEditable="True"/>
                    </dxg:GridColumn.EditSettings>
                 </dxg:GridColumn>

                <dxg:GridColumn FieldName="LastUpdated" Header="ìµœì¢… ìˆ˜ì •ì¼" AllowEditing="False">
                     <dxg:GridColumn.EditSettings>
                        <dxe:DateEditSettings MaskType="DateTime" Mask="yyyy-MM-dd HH:mm:ss" MaskUseAsDisplayFormat="True"/>
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>

                <dxg:GridColumn FieldName="Id" Header="ID" Visible="False" ReadOnly="True"/> </dxg:GridControl.Columns>

            <dxg:GridControl.ViewSettings>
                 <dxg:TableViewSettings ShowSearchPanelMode="Always" />
             </dxg:GridControl.ViewSettings>

        </dxg:GridControl>

        <StatusBar Grid.Row="2" Background="{dx:ThemeResource EditorGroupBox.Background}">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusBarText}" Margin="5,0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>