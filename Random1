using System;
using System.Windows;
using System.Windows.Media.Imaging;
using System.IO;

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void LoadImage(string imagePath)
    {
        BitmapImage bitmap = new BitmapImage();
        bitmap.BeginInit();
        bitmap.CacheOption = BitmapCacheOption.OnLoad;
        bitmap.UriSource = new Uri(imagePath, UriKind.Absolute);
        bitmap.EndInit();

        MyImageControl.Source = bitmap;
    }

    private void UnloadImage()
    {
        if (MyImageControl.Source != null)
        {
            var bitmapImage = MyImageControl.Source as BitmapImage;
            MyImageControl.Source = null;

            // Dispose를 직접 호출할 수 없지만, 메모리에서 해제를 돕는 방법
            bitmapImage.UriSource = null;
            bitmapImage = null;
        }

        // 강제 가비지 컬렉션 수행 (일반적으로 권장되지 않으나 필요에 따라 사용)
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
}
