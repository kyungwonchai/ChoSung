QL Server 데이터베이스를 사용하여 데이터를 가져오고, 필터링한 다음 특정 조건에 맞는 데이터를 업데이트하려면 System.Data.SqlClient 네임스페이스의 클래스들을 사용할 수 있습니다. 아래의 C# 예제 코드는 T_메인확정 테이블에서 데이터를 가져와 필요한 업데이트를 수행하는 방법을 보여줍니다:

    SqlConnection을 사용하여 데이터베이스에 연결합니다.
    SqlCommand를 사용하여 필요한 데이터를 검색하는 SELECT 쿼리를 실행합니다.
    SqlDataAdapter와 DataTable을 사용하여 데이터를 메모리에 가져옵니다.
    DataTable을 순회하면서 조건에 맞는 행을 찾아 SqlCommand를 사용하여 업데이트합니다.

csharp

using System;
using System.Data;
using System.Data.SqlClient;

namespace BulkUpdateExample
{
    class Program
    {
        static void Main(string[] args)
        {
            string connectionString = "Your Connection String Here";
            string selectQuery = "SELECT * FROM T_메인확정";
            string updateQuery = "UPDATE T_메인확정 SET N_Dis = @NewDis WHERE N_RKey = @RKey";

            using (SqlConnection connection = new SqlConnection(connectionString))
            {
                connection.Open();

                // 데이터를 가져오기 위한 SqlDataAdapter와 DataTable 설정
                SqlDataAdapter adapter = new SqlDataAdapter(selectQuery, connection);
                DataTable mainTable = new DataTable();
                adapter.Fill(mainTable);

                // T_설계변경요약 데이터 - 이 데이터는 예시로 코딩에 직접 넣었습니다.
                // 실제로는 이 데이터를 어떻게 가져올 것인지 결정해야 합니다.
                var summaryData = new DataTable();
                summaryData.Columns.Add("N_RKey", typeof(int));
                summaryData.Columns.Add("설계변경단계값", typeof(string));
                // ... summaryData에 데이터를 채웁니다 ...

                // T_메인확정을 순회하면서 T_설계변경요약과 비교 후 업데이트
                foreach (DataRow row in mainTable.Rows)
                {
                    int rKey = row.Field<int>("N_RKey");
                    DataRow summaryRow = summaryData.Select($"N_RKey = {rKey}").FirstOrDefault();
                    if (summaryRow != null)
                    {
                        using (SqlCommand updateCommand = new SqlCommand(updateQuery, connection))
                        {
                            updateCommand.Parameters.AddWithValue("@NewDis", summaryRow["설계변경단계값"]);
                            updateCommand.Parameters.AddWithValue("@RKey", rKey);
                            updateCommand.ExecuteNonQuery();
                        }
                    }
                }
            }

            Console.WriteLine("업데이트 완료");
        }
    }
}

위의 코드는 T_메인확정 테이블에서 모든 데이터를 가져온 후, C#에서 가져온 T_설계변경요약 테이블과의 데이터를 비교하여 N_RKey가 일치하는 행을 찾아 N_Dis를 업데이트합니다.

중요사항:

    connectionString 변수는 데이터베이스 연결 문자열로, 실제 환경에 맞게 설정해야 합니다.
    summaryData 테이블은 예시로 직접 데이터를 넣는 방식으로 표현했습니다. 실제로는 데이터베이스에서 가져오거나, 다른 소스에서 가져올 수 있습니다.
    SQL 인젝션을 방지하기 위해 SqlCommand에 파라미터를 사용합니다.
    예외 처리 및 트랜잭션 관리는 이 예제에서 생략되었으나, 실제 애플리케이션