분투에서 Flask 웹 서비스가 특정 포트로 요청이 들어왔을 때 다른 포트로 리다이렉션하는 방법은 여러 가지가 있습니다. 가장 일반적인 방법은 Nginx나 Apache 같은 웹 서버를 사용하는 것입니다. 이 서버들은 리버스 프록시(reverse proxy)로 설정할 수 있어, 특정 포트에 대한 요청을 다른 포트로 리다이렉트하는 데 적합합니다.

여기서는 Nginx를 사용하여 포트 8111로 들어오는 요청을 포트 8000으로 리다이렉션하는 방법을 상세히 설명합니다.

1. Nginx 설치
만약 Nginx가 설치되어 있지 않다면, 먼저 설치해야 합니다. 아래 명령어를 사용합니다:

bash
코드 복사
sudo apt update
sudo apt install nginx
2. Nginx 설정 파일 수정
Nginx 설정 파일을 수정하여 포트 8111로 들어오는 요청을 포트 8000으로 리다이렉트하도록 설정합니다. Nginx의 설정 파일은 /etc/nginx/sites-available/에 있습니다.

새 설정 파일을 생성하거나 기존 설정 파일을 수정합니다. 여기서는 flask_redirect라는 설정 파일을 생성하겠습니다.

bash
코드 복사
sudo nano /etc/nginx/sites-available/flask_redirect
아래 내용을 추가합니다:

nginx
코드 복사
server {
    listen 8111;  # Nginx가 포트 8111에서 요청을 듣습니다.

    location / {
        proxy_pass http://127.0.0.1:8000;  # Flask 서버가 포트 8000에서 동작 중이라고 가정합니다.
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
listen 8111;: Nginx가 포트 8111에서 요청을 듣도록 설정합니다.
proxy_pass http://127.0.0.1:8000;: 포트 8111로 들어오는 요청을 포트 8000으로 전달합니다.
proxy_set_header 지시어는 클라이언트의 정보를 Flask 서버에 전달하는 역할을 합니다. (예: IP 주소, 프로토콜)
3. 설정 파일 활성화
sites-available에 설정 파일을 만들었으므로, 이를 sites-enabled로 심볼릭 링크를 만들어 활성화해야 합니다.

bash
코드 복사
sudo ln -s /etc/nginx/sites-available/flask_redirect /etc/nginx/sites-enabled/
4. Nginx 구성 확인
Nginx 설정 파일에 오류가 없는지 확인합니다.

bash
코드 복사
sudo nginx -t
만약 오류가 없다면, syntax is ok와 test is successful 메시지가 나타날 것입니다.
5. Nginx 재시작
설정을 반영하려면 Nginx를 재시작해야 합니다.

bash
코드 복사
sudo systemctl restart nginx
6. 방화벽 설정 (선택 사항)
만약 UFW(우분투 방화벽)가 활성화되어 있다면, 포트 8111과 8000을 허용해야 합니다.

bash
코드 복사
sudo ufw allow 8111
sudo ufw allow 8000
7. Flask 애플리케이션 실행 확인
이제 Flask 애플리케이션이 포트 8000에서 실행되고 있어야 하며, Nginx가 포트 8111에서 들어오는 요청을 포트 8000으로 리다이렉트합니다. Flask 서버를 실행할 때는 다음과 같이 포트를 명시해줍니다.

bash
코드 복사
flask run --host=0.0.0.0 --port=8000
최종 확인
웹 브라우저에서 http://<your-server-ip>:8111로 접근했을 때 Flask 애플리케이션이 정상적으로 작동하는지 확인합니다. 만약 설정이 제대로 되었다면, 8111 포트로의 요청이 8000 포트로 리다이렉트되면서 Flask 애플리케이션에 접근할 수 있을 것입니다.