<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Checkbox Table</title>
    <script>
        // 전역 변수로 체크된 항목 관리
        let checkedLines = new Set();

        // 테이블 데이터 예제
        const tableData = [
            { line: "Line1", value: "Value1" },
            { line: "Line2", value: "Value2" },
            { line: "Line3", value: "Value3" },
        ];

        // 테이블 렌더링
        function renderTable() {
            const tableBody = document.getElementById('table-body');
            tableBody.innerHTML = ''; // 기존 내용을 비움

            tableData.forEach(item => {
                // 테이블 행 생성
                const isChecked = checkedLines.has(item.line) ? 'checked' : '';
                tableBody.innerHTML += `
                    <tr>
                        <td>
                            <input type="checkbox" ${isChecked} onchange="handleCheckboxChange('${item.line}', this.checked)">
                        </td>
                        <td>${item.line}</td>
                        <td>${item.value}</td>
                    </tr>
                `;
            });
        }

        // 체크박스 상태 변경 핸들러
        function handleCheckboxChange(line, isChecked) {
            if (isChecked) {
                checkedLines.add(line);
            } else {
                checkedLines.delete(line);
            }
            console.log("Checked Lines:", Array.from(checkedLines)); // 상태 확인
        }

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', () => {
            renderTable(); // 테이블 렌더링
        });
    </script>
</head>
<body>
    <h1>Dynamic Checkbox Table</h1>
    <table border="1">
        <thead>
            <tr>
                <th>Select</th>
                <th>Line</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody id="table-body">
            <!-- JavaScript로 동적 생성 -->
        </tbody>
    </table>
    <button onclick="renderTable()">Refresh Table</button>
</body>
</html>
