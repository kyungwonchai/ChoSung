using System;
using System.IO;
using System.Threading;
using ScreenRecorderLib;

namespace ScreenRecorder
{
    class Program
    {
        static void Main(string[] args)
        {
            string path = @"D:\blackbox";
            if (!Directory.Exists(path))
            {
                Directory.CreateDirectory(path);
            }

            Console.WriteLine("녹화 시작");
            for (int i = 0; i < 60480; i++)
            {
                string fileName = Path.Combine(path, DateTime.Now.ToString("yyyyMMddHHmmss") + ".mp4");
                using (var rec = Recorder.CreateRecorder())
                {
                    rec.OnRecordingComplete += (s, e) => Console.WriteLine($"{fileName} 저장 완료");
                    rec.Record(fileName, 10, RecorderOutputType.Mp4, 10); // 10초 동안 녹화
                }
                Thread.Sleep(10000); // 다음 녹화를 위해 10초 대기
            }
            Console.WriteLine("녹화 종료");
        }
    }
}
