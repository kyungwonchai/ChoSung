죄송합니다! 파일 내용에 pppp라는 키워드가 포함된 가장 최근 파일의 파일 이름을 반환해야 한다는 말씀이군요. 다음은 수정된 C# 코드입니다. 이 코드는 .log 파일들 중에서 파일 내용에 pppp가 포함된 가장 최근의 파일을 찾아 그 파일 이름을 반환합니다.

csharp
코드 복사
using System;
using System.IO;
using System.Linq;

public class FileProcessor
{
    public string GetLatestLogFileContainingText(string folderPath, string keyword)
    {
        // 폴더 내 모든 .log 파일을 가져옵니다.
        var logFiles = Directory.GetFiles(folderPath, "*.log");

        // 파일이 없으면 null을 반환합니다.
        if (logFiles.Length == 0)
        {
            return null;
        }

        // 가장 최근에 keyword를 포함하는 파일을 찾기 위한 변수
        string latestFileWithKeyword = null;
        DateTime latestFileDate = DateTime.MinValue;

        // 각 파일을 순회하면서 keyword를 포함한 가장 최근 파일을 찾습니다.
        foreach (var file in logFiles)
        {
            try
            {
                // 파일을 읽기 및 쓰기 공유 모드로 엽니다.
                using (FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
                using (StreamReader sr = new StreamReader(fs))
                {
                    string line;
                    // 파일의 각 줄을 읽으며 키워드가 포함된 줄이 있는지 확인
                    while ((line = sr.ReadLine()) != null)
                    {
                        if (line.Contains(keyword))
                        {
                            // 키워드를 찾으면 최종 수정 날짜를 비교하여 최신 파일을 선택
                            var lastWriteTime = File.GetLastWriteTime(file);
                            if (lastWriteTime > latestFileDate)
                            {
                                latestFileWithKeyword = file;
                                latestFileDate = lastWriteTime;
                            }
                            break; // 키워드를 찾았으면 이 파일은 더 이상 읽을 필요가 없음
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                // 오류 발생 시 예외 메시지 출력
                Console.WriteLine($"파일 처리 중 오류 발생: {ex.Message}");
            }
        }

        // 가장 최근의 파일 이름을 반환 (경로를 제외한 파일명만 반환)
        return latestFileWithKeyword != null ? Path.GetFileName(latestFileWithKeyword) : null;
    }
}
수정된 코드 설명:
파일 이름 반환: Path.GetFileName(latestFileWithKeyword)을 사용하여 파일 경로 대신 파일 이름만 반환합니다.
StreamReader: 각 파일을 열어 pppp라는 키워드가 포함된 줄이 있는지 확인하고, 포함된 경우 그 파일의 마지막 수정 날짜를 기준으로 최신 파일을 선택합니다.
예외 처리: 파일을 읽는 과정에서 오류가 발생할 경우, 예외 메시지