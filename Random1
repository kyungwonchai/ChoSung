<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubuntu 22.04 서버 관리 가이드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: sans-serif; /* 시스템 기본 폰트 사용 */
            background-color: #f9fafb; /* gray-50 */
            color: #1f2937; /* gray-800 */
        }
        .container {
            max-width: 900px;
        }
        .card {
            background-color: #ffffff; /* white */
            border: 1px solid #e5e7eb; /* gray-200 */
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .card-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: #111827; /* gray-900 */
            border-bottom: 2px solid #f3f4f6; /* gray-100 */
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937; /* gray-800 */
        }
        .code-block {
            background-color: #f3f4f6; /* gray-100 */
            border: 1px solid #e5e7eb; /* gray-200 */
            color: #111827; /* gray-900 */
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace; /* 시스템 기본 고정폭 폰트 사용 */
            font-size: 0.95rem;
            white-space: pre-wrap;
            word-break: break-all;
            margin-top: 0.5rem;
        }
        /* Syntax Highlighting for Light Theme */
        .code-block .cmd { color: #2563eb; } /* blue-600 */
        .code-block .opt { color: #c2410c; } /* orange-700 */
        .code-block .arg { color: #111827; } /* gray-900 */
        .code-block .comment { color: #6b7280; } /* gray-500 */
    </style>
</head>
<body>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">

        <header class="mb-12 text-center">
            <h1 class="text-4xl font-bold text-gray-900">Ubuntu 22.04 서버 관리 최종 가이드</h1>
            <p class="text-lg text-gray-600 mt-2">사용자, 권한, 그룹, 방화벽(UFW) 핵심 명령어</p>
        </header>

        <div class="space-y-12">
            <!-- 사용자 관리 -->
            <div class="card">
                <h2 class="card-title">?? 사용자 관리 (User Management)</h2>
                <div class="space-y-4">
                    <h3 class="section-title">사용자 생성</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">adduser</span> <span class="arg">newuser</span><span class="comment"> # 'newuser' 생성 (홈 디렉토리, 비밀번호 설정 포함)</span></div>
                    
                    <h3 class="section-title">사용자에게 sudo 권한 부여</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">usermod</span> <span class="opt">-aG</span> <span class="arg">sudo</span> <span class="arg">newuser</span><span class="comment"> # 'newuser'를 'sudo' 그룹에 추가</span></div>
                    
                    <h3 class="section-title">사용자 전환</h3>
                    <div class="code-block"><span class="cmd">su</span> <span class="opt">-</span> <span class="arg">newuser</span><span class="comment"> # 'newuser'로 로그인 (환경변수 포함)</span></div>

                    <h3 class="section-title">사용자 비밀번호 변경</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">passwd</span> <span class="arg">newuser</span><span class="comment"> # 'newuser'의 비밀번호 재설정</span></div>

                    <h3 class="section-title">사용자 삭제</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">deluser</span> <span class="arg">newuser</span><span class="comment"> # 사용자만 삭제 (홈 디렉토리 유지)</span><br><span class="cmd">sudo</span> <span class="cmd">deluser</span> <span class="opt">--remove-home</span> <span class="arg">newuser</span><span class="comment"> # 홈 디렉토리까지 모두 삭제</span></div>
                </div>
            </div>
            
            <!-- 파일 및 그룹 권한 관리 -->
            <div class="card">
                <h2 class="card-title">?? 파일 및 그룹 권한 관리 (Permissions & Grouping)</h2>
                <div class="space-y-4">
                    <h3 class="section-title">권한 변경 (chmod)</h3>
                    <div class="code-block"><span class="comment"># Symbolic 방식: u(user), g(group), o(other), a(all) / +(add), -(remove), =(set)</span><br><span class="cmd">chmod</span> <span class="arg">u+x</span> <span class="arg">script.sh</span><span class="comment"> # 소유자에게 실행(x) 권한 추가</span><br><span class="cmd">chmod</span> <span class="arg">g-w</span> <span class="arg">data.txt</span><span class="comment"> # 그룹에서 쓰기(w) 권한 제거</span><br><span class="cmd">chmod</span> <span class="arg">o=r</span> <span class="arg">config.conf</span><span class="comment"> # 타인에게 읽기(r) 권한만 설정</span><br><br><span class="comment"># Octal 방식: 4(read), 2(write), 1(execute)의 합</span><br><span class="cmd">chmod</span> <span class="arg">755</span> <span class="arg">public_dir</span><span class="comment"> # 소유자:rwx(7), 그룹:r-x(5), 타인:r-x(5)</span><br><span class="cmd">chmod</span> <span class="arg">600</span> <span class="arg">private_key</span><span class="comment"> # 소유자:rw-(6), 그룹:---(0), 타인:---(0)</span><br><br><span class="comment"># 하위 디렉토리 및 파일에 재귀적으로 적용</span><br><span class="cmd">chmod</span> <span class="opt">-R</span> <span class="arg">644</span> <span class="arg">/var/www/html</span></div>

                    <h3 class="section-title">소유권 변경 (chown)</h3>
                    <div class="code-block"><span class="comment"># 소유자만 변경</span><br><span class="cmd">sudo</span> <span class="cmd">chown</span> <span class="arg">newuser</span> <span class="arg">some_file.txt</span><br><br><span class="comment"># 소유자와 그룹을 동시에 변경</span><br><span class="cmd">sudo</span> <span class="cmd">chown</span> <span class="arg">newuser:newgroup</span> <span class="arg">some_dir</span><br><br><span class="comment"># 하위 디렉토리 및 파일에 재귀적으로 적용</span><br><span class="cmd">sudo</span> <span class="cmd">chown</span> <span class="opt">-R</span> <span class="arg">www-data:www-data</span> <span class="arg">/var/www/html</span></div>
                    
                    <h3 class="section-title">그룹 관리</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">groupadd</span> <span class="arg">developers</span><span class="comment"> # 'developers' 그룹 생성</span><br><span class="cmd">sudo</span> <span class="cmd">gpasswd</span> <span class="opt">-a</span> <span class="arg">newuser</span> <span class="arg">developers</span><span class="comment"> # 'newuser'를 'developers' 그룹에 추가</span><br><span class="cmd">sudo</span> <span class="cmd">gpasswd</span> <span class="opt">-d</span> <span class="arg">newuser</span> <span class="arg">developers</span><span class="comment"> # 'newuser'를 'developers' 그룹에서 제거</span><br><span class="cmd">groups</span> <span class="arg">newuser</span><span class="comment"> # 'newuser'가 속한 모든 그룹 확인</span><br><span class="cmd">sudo</span> <span class="cmd">groupdel</span> <span class="arg">developers</span><span class="comment"> # 'developers' 그룹 삭제</span></div>
                </div>
            </div>

            <!-- 방화벽 관리 -->
            <div class="card">
                <h2 class="card-title">??? 방화벽 관리 (UFW: Uncomplicated Firewall)</h2>
                <div class="space-y-4">
                    <h3 class="section-title">상태 확인 및 활성화/비활성화</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">status</span> <span class="arg">verbose</span><span class="comment"> # 상세 상태 확인 (기본 정책 포함)</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">enable</span><span class="comment"> # 방화벽 활성화 (부팅 시 자동 시작)</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">disable</span><span class="comment"> # 방화벽 비활성화</span></div>

                    <h3 class="section-title">기본 정책 설정 (가장 먼저 수행)</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">default</span> <span class="arg">deny</span> <span class="arg">incoming</span><span class="comment"> # 외부에서 서버로 들어오는 모든 연결을 기본 차단</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">default</span> <span class="arg">allow</span> <span class="arg">outgoing</span><span class="comment"> # 서버에서 외부로 나가는 모든 연결을 기본 허용</span></div>

                    <h3 class="section-title">연결 허용 (Allow) - 방향성 설명</h3>
                    <div class="code-block"><span class="comment"># 'allow'는 기본적으로 외부에서 서버로 들어오는(incoming) 연결을 허용합니다.</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">allow</span> <span class="arg">ssh</span><span class="comment"> # (IN) SSH(22/tcp) 포트 허용</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">allow</span> <span class="arg">8080/tcp</span><span class="comment"> # (IN) 8080/tcp 포트 허용</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">allow</span> <span class="arg">from</span> <span class="arg">192.168.0.100</span><span class="comment"> # (IN) 특정 IP로부터의 모든 연결 허용</span><br><br><span class="comment"># 서버에서 외부로 나가는(outgoing) 연결을 특정하려면 'out'을 명시합니다.</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">allow</span> <span class="arg">out</span> <span class="arg">53</span><span class="comment"> # (OUT) DNS(53) 포트로의 연결 허용</span></div>

                    <h3 class="section-title">규칙 삭제 및 초기화</h3>
                    <div class="code-block"><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">status</span> <span class="arg">numbered</span><span class="comment"> # 규칙 목록을 번호와 함께 확인</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">delete</span> <span class="arg">1</span><span class="comment"> # 1번 규칙 삭제</span><br><span class="cmd">sudo</span> <span class="cmd">ufw</span> <span class="arg">reset</span><span class="comment"> # 모든 규칙 초기화 (주의)</span></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
