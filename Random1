동 없이 알람 소리만 재생하고, 팝업을 통해 사용자가 "확인" 버튼을 누르면 사운드를 멈추는 코드입니다.

코드
kotlin
코드 복사
private fun playAlarmSound() {
    // 사운드 재생 설정
    try {
        val alarmSound: Uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM)
            ?: RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION)

        mediaPlayer = MediaPlayer().apply {
            setAudioAttributes(
                AudioAttributes.Builder()
                    .setContentType(AudioAttributes.CONTENT_TYPE_SONIFICATION)
                    .setUsage(AudioAttributes.USAGE_ALARM)
                    .build()
            )
            setDataSource(this@MainActivity, alarmSound)
            isLooping = true // 사운드를 반복 재생
            prepare()
            start()
        }
    } catch (e: Exception) {
        Log.e("MainActivity", "Failed to play alarm sound", e)
    }

    // 팝업 창 설정
    val builder = AlertDialog.Builder(this)
    builder.setTitle("알림")
        .setMessage("문제를 확인하고 창을 터치하여 경고음을 종료하세요.")
        .setPositiveButton("확인") { dialog, _ ->
            stopAlarmSound() // 사운드 멈춤
            dialog.dismiss()
        }
        .setCancelable(false) // 사용자가 창을 닫기 전까지 팝업이 꺼지지 않음
    builder.create().show()
}

private fun stopAlarmSound() {
    mediaPlayer?.let {
        if (it.isPlaying) {
            it.stop()
            it.release()
        }
    }
}
설명
playAlarmSound 함수:

MediaPlayer를 사용하여 알람 소리를 반복 재생합니다. 소리가 알람처럼 반복되며 재생됩니다.
AlertDialog를 사용하여 팝업 창을 띄우고, 사용자가 "확인" 버튼을 누르면 stopAlarmSound 함수가 호출되어 소리를 멈춥니다.
stopAlarmSound 함수:
